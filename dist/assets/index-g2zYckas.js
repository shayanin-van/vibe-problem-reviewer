(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var ud={exports:{}},ro={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function t1(){if(ey)return ro;ey=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var g in l)g!=="key"&&(u[g]=l[g])}else u=l;return l=u.ref,{$$typeof:a,type:s,key:f,ref:l!==void 0?l:null,props:u}}return ro.Fragment=t,ro.jsx=n,ro.jsxs=n,ro}var ny;function e1(){return ny||(ny=1,ud.exports=t1()),ud.exports}var ft=e1(),cd={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function n1(){if(iy)return St;iy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function M(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,U={};function rt(L,$,ut){this.props=L,this.context=$,this.refs=U,this.updater=ut||x}rt.prototype.isReactComponent={},rt.prototype.setState=function(L,$){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,$,"setState")},rt.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function X(){}X.prototype=rt.prototype;function K(L,$,ut){this.props=L,this.context=$,this.refs=U,this.updater=ut||x}var at=K.prototype=new X;at.constructor=K,I(at,rt.prototype),at.isPureReactComponent=!0;var it=Array.isArray;function et(){}var w={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function C(L,$,ut){var ht=ut.ref;return{$$typeof:a,type:L,key:$,ref:ht!==void 0?ht:null,props:ut}}function V(L,$){return C(L.type,$,L.props)}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===a}function z(L){var $={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ut){return $[ut]})}var D=/\/+/g;function Rt(L,$){return typeof L=="object"&&L!==null&&L.key!=null?z(""+L.key):$.toString(36)}function Pt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(et,et):(L.status="pending",L.then(function($){L.status==="pending"&&(L.status="fulfilled",L.value=$)},function($){L.status==="pending"&&(L.status="rejected",L.reason=$)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function B(L,$,ut,ht,Tt){var Nt=typeof L;(Nt==="undefined"||Nt==="boolean")&&(L=null);var jt=!1;if(L===null)jt=!0;else switch(Nt){case"bigint":case"string":case"number":jt=!0;break;case"object":switch(L.$$typeof){case a:case t:jt=!0;break;case b:return jt=L._init,B(jt(L._payload),$,ut,ht,Tt)}}if(jt)return Tt=Tt(L),jt=ht===""?"."+Rt(L,0):ht,it(Tt)?(ut="",jt!=null&&(ut=jt.replace(D,"$&/")+"/"),B(Tt,$,ut,"",function(sr){return sr})):Tt!=null&&(N(Tt)&&(Tt=V(Tt,ut+(Tt.key==null||L&&L.key===Tt.key?"":(""+Tt.key).replace(D,"$&/")+"/")+jt)),$.push(Tt)),1;jt=0;var Me=ht===""?".":ht+":";if(it(L))for(var oe=0;oe<L.length;oe++)ht=L[oe],Nt=Me+Rt(ht,oe),jt+=B(ht,$,ut,Nt,Tt);else if(oe=M(L),typeof oe=="function")for(L=oe.call(L),oe=0;!(ht=L.next()).done;)ht=ht.value,Nt=Me+Rt(ht,oe++),jt+=B(ht,$,ut,Nt,Tt);else if(Nt==="object"){if(typeof L.then=="function")return B(Pt(L),$,ut,ht,Tt);throw $=String(L),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return jt}function J(L,$,ut){if(L==null)return L;var ht=[],Tt=0;return B(L,ht,"","",function(Nt){return $.call(ut,Nt,Tt++)}),ht}function ot(L){if(L._status===-1){var $=L._result;$=$(),$.then(function(ut){(L._status===0||L._status===-1)&&(L._status=1,L._result=ut)},function(ut){(L._status===0||L._status===-1)&&(L._status=2,L._result=ut)}),L._status===-1&&(L._status=0,L._result=$)}if(L._status===1)return L._result.default;throw L._result}var bt=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},xt={map:J,forEach:function(L,$,ut){J(L,function(){$.apply(this,arguments)},ut)},count:function(L){var $=0;return J(L,function(){$++}),$},toArray:function(L){return J(L,function($){return $})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return St.Activity=E,St.Children=xt,St.Component=rt,St.Fragment=n,St.Profiler=l,St.PureComponent=K,St.StrictMode=s,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,St.__COMPILER_RUNTIME={__proto__:null,c:function(L){return w.H.useMemoCache(L)}},St.cache=function(L){return function(){return L.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(L,$,ut){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ht=I({},L.props),Tt=L.key;if($!=null)for(Nt in $.key!==void 0&&(Tt=""+$.key),$)!R.call($,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&$.ref===void 0||(ht[Nt]=$[Nt]);var Nt=arguments.length-2;if(Nt===1)ht.children=ut;else if(1<Nt){for(var jt=Array(Nt),Me=0;Me<Nt;Me++)jt[Me]=arguments[Me+2];ht.children=jt}return C(L.type,Tt,ht)},St.createContext=function(L){return L={$$typeof:f,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},St.createElement=function(L,$,ut){var ht,Tt={},Nt=null;if($!=null)for(ht in $.key!==void 0&&(Nt=""+$.key),$)R.call($,ht)&&ht!=="key"&&ht!=="__self"&&ht!=="__source"&&(Tt[ht]=$[ht]);var jt=arguments.length-2;if(jt===1)Tt.children=ut;else if(1<jt){for(var Me=Array(jt),oe=0;oe<jt;oe++)Me[oe]=arguments[oe+2];Tt.children=Me}if(L&&L.defaultProps)for(ht in jt=L.defaultProps,jt)Tt[ht]===void 0&&(Tt[ht]=jt[ht]);return C(L,Nt,Tt)},St.createRef=function(){return{current:null}},St.forwardRef=function(L){return{$$typeof:g,render:L}},St.isValidElement=N,St.lazy=function(L){return{$$typeof:b,_payload:{_status:-1,_result:L},_init:ot}},St.memo=function(L,$){return{$$typeof:m,type:L,compare:$===void 0?null:$}},St.startTransition=function(L){var $=w.T,ut={};w.T=ut;try{var ht=L(),Tt=w.S;Tt!==null&&Tt(ut,ht),typeof ht=="object"&&ht!==null&&typeof ht.then=="function"&&ht.then(et,bt)}catch(Nt){bt(Nt)}finally{$!==null&&ut.types!==null&&($.types=ut.types),w.T=$}},St.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},St.use=function(L){return w.H.use(L)},St.useActionState=function(L,$,ut){return w.H.useActionState(L,$,ut)},St.useCallback=function(L,$){return w.H.useCallback(L,$)},St.useContext=function(L){return w.H.useContext(L)},St.useDebugValue=function(){},St.useDeferredValue=function(L,$){return w.H.useDeferredValue(L,$)},St.useEffect=function(L,$){return w.H.useEffect(L,$)},St.useEffectEvent=function(L){return w.H.useEffectEvent(L)},St.useId=function(){return w.H.useId()},St.useImperativeHandle=function(L,$,ut){return w.H.useImperativeHandle(L,$,ut)},St.useInsertionEffect=function(L,$){return w.H.useInsertionEffect(L,$)},St.useLayoutEffect=function(L,$){return w.H.useLayoutEffect(L,$)},St.useMemo=function(L,$){return w.H.useMemo(L,$)},St.useOptimistic=function(L,$){return w.H.useOptimistic(L,$)},St.useReducer=function(L,$,ut){return w.H.useReducer(L,$,ut)},St.useRef=function(L){return w.H.useRef(L)},St.useState=function(L){return w.H.useState(L)},St.useSyncExternalStore=function(L,$,ut){return w.H.useSyncExternalStore(L,$,ut)},St.useTransition=function(){return w.H.useTransition()},St.version="19.2.0",St}var sy;function Kd(){return sy||(sy=1,cd.exports=n1()),cd.exports}var $e=Kd(),hd={exports:{}},ao={},fd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function i1(){return ry||(ry=1,(function(a){function t(B,J){var ot=B.length;B.push(J);t:for(;0<ot;){var bt=ot-1>>>1,xt=B[bt];if(0<l(xt,J))B[bt]=J,B[ot]=xt,ot=bt;else break t}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var J=B[0],ot=B.pop();if(ot!==J){B[0]=ot;t:for(var bt=0,xt=B.length,L=xt>>>1;bt<L;){var $=2*(bt+1)-1,ut=B[$],ht=$+1,Tt=B[ht];if(0>l(ut,ot))ht<xt&&0>l(Tt,ut)?(B[bt]=Tt,B[ht]=ot,bt=ht):(B[bt]=ut,B[$]=ot,bt=$);else if(ht<xt&&0>l(Tt,ot))B[bt]=Tt,B[ht]=ot,bt=ht;else break t}}return J}function l(B,J){var ot=B.sortIndex-J.sortIndex;return ot!==0?ot:B.id-J.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();a.unstable_now=function(){return f.now()-g}}var p=[],m=[],b=1,E=null,T=3,M=!1,x=!1,I=!1,U=!1,rt=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function at(B){for(var J=n(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=B)s(m),J.sortIndex=J.expirationTime,t(p,J);else break;J=n(m)}}function it(B){if(I=!1,at(B),!x)if(n(p)!==null)x=!0,et||(et=!0,z());else{var J=n(m);J!==null&&Pt(it,J.startTime-B)}}var et=!1,w=-1,R=5,C=-1;function V(){return U?!0:!(a.unstable_now()-C<R)}function N(){if(U=!1,et){var B=a.unstable_now();C=B;var J=!0;try{t:{x=!1,I&&(I=!1,X(w),w=-1),M=!0;var ot=T;try{e:{for(at(B),E=n(p);E!==null&&!(E.expirationTime>B&&V());){var bt=E.callback;if(typeof bt=="function"){E.callback=null,T=E.priorityLevel;var xt=bt(E.expirationTime<=B);if(B=a.unstable_now(),typeof xt=="function"){E.callback=xt,at(B),J=!0;break e}E===n(p)&&s(p),at(B)}else s(p);E=n(p)}if(E!==null)J=!0;else{var L=n(m);L!==null&&Pt(it,L.startTime-B),J=!1}}break t}finally{E=null,T=ot,M=!1}J=void 0}}finally{J?z():et=!1}}}var z;if(typeof K=="function")z=function(){K(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Rt=D.port2;D.port1.onmessage=N,z=function(){Rt.postMessage(null)}}else z=function(){rt(N,0)};function Pt(B,J){w=rt(function(){B(a.unstable_now())},J)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(B){B.callback=null},a.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},a.unstable_getCurrentPriorityLevel=function(){return T},a.unstable_next=function(B){switch(T){case 1:case 2:case 3:var J=3;break;default:J=T}var ot=T;T=J;try{return B()}finally{T=ot}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(B,J){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ot=T;T=B;try{return J()}finally{T=ot}},a.unstable_scheduleCallback=function(B,J,ot){var bt=a.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?bt+ot:bt):ot=bt,B){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=ot+xt,B={id:b++,callback:J,priorityLevel:B,startTime:ot,expirationTime:xt,sortIndex:-1},ot>bt?(B.sortIndex=ot,t(m,B),n(p)===null&&B===n(m)&&(I?(X(w),w=-1):I=!0,Pt(it,ot-bt))):(B.sortIndex=xt,t(p,B),x||M||(x=!0,et||(et=!0,z()))),B},a.unstable_shouldYield=V,a.unstable_wrapCallback=function(B){var J=T;return function(){var ot=T;T=J;try{return B.apply(this,arguments)}finally{T=ot}}}})(dd)),dd}var ay;function s1(){return ay||(ay=1,fd.exports=i1()),fd.exports}var gd={exports:{}},We={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function r1(){if(ly)return We;ly=1;var a=Kd();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(p,m,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:p,containerInfo:m,implementation:b}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return We.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,We.createPortal=function(p,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(p,m,null,b)},We.flushSync=function(p){var m=f.T,b=s.p;try{if(f.T=null,s.p=2,p)return p()}finally{f.T=m,s.p=b,s.d.f()}},We.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},We.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},We.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var b=m.as,E=g(b,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,M=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;b==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:M}):b==="script"&&s.d.X(p,{crossOrigin:E,integrity:T,fetchPriority:M,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},We.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var b=g(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},We.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var b=m.as,E=g(b,m.crossOrigin);s.d.L(p,b,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},We.preloadModule=function(p,m){if(typeof p=="string")if(m){var b=g(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},We.requestFormReset=function(p){s.d.r(p)},We.unstable_batchedUpdates=function(p,m){return p(m)},We.useFormState=function(p,m,b){return f.H.useFormState(p,m,b)},We.useFormStatus=function(){return f.H.useHostTransitionStatus()},We.version="19.2.0",We}var oy;function a1(){if(oy)return gd.exports;oy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),gd.exports=r1(),gd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function l1(){if(uy)return ao;uy=1;var a=s1(),t=Kd(),n=a1();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,r=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(r=i.return),e=i.return;while(e)}return i.tag===3?r:null}function f(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(s(188))}function m(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(s(188));return i!==e?null:e}for(var r=e,o=i;;){var h=r.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){r=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===r)return p(h),e;if(d===o)return p(h),i;d=d.sibling}throw Error(s(188))}if(r.return!==o.return)r=h,o=d;else{for(var y=!1,A=h.child;A;){if(A===r){y=!0,r=h,o=d;break}if(A===o){y=!0,o=h,r=d;break}A=A.sibling}if(!y){for(A=d.child;A;){if(A===r){y=!0,r=d,o=h;break}if(A===o){y=!0,o=d,r=h;break}A=A.sibling}if(!y)throw Error(s(189))}}if(r.alternate!==o)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:i}function b(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=b(e),i!==null)return i;e=e.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),rt=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),K=Symbol.for("react.context"),at=Symbol.for("react.forward_ref"),it=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function z(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var D=Symbol.for("react.client.reference");function Rt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===D?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case rt:return"Profiler";case U:return"StrictMode";case it:return"Suspense";case et:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case x:return"Portal";case K:return e.displayName||"Context";case X:return(e._context.displayName||"Context")+".Consumer";case at:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case w:return i=e.displayName||null,i!==null?i:Rt(e.type)||"Memo";case R:i=e._payload,e=e._init;try{return Rt(e(i))}catch{}}return null}var Pt=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},bt=[],xt=-1;function L(e){return{current:e}}function $(e){0>xt||(e.current=bt[xt],bt[xt]=null,xt--)}function ut(e,i){xt++,bt[xt]=e.current,e.current=i}var ht=L(null),Tt=L(null),Nt=L(null),jt=L(null);function Me(e,i){switch(ut(Nt,i),ut(Tt,e),ut(ht,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?S_(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=S_(i),e=w_(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(ht),ut(ht,e)}function oe(){$(ht),$(Tt),$(Nt)}function sr(e){e.memoizedState!==null&&ut(jt,e);var i=ht.current,r=w_(i,e.type);i!==r&&(ut(Tt,e),ut(ht,r))}function Gr(e){Tt.current===e&&($(ht),$(Tt)),jt.current===e&&($(jt),eo._currentValue=ot)}var Fr,Qr;function ri(e){if(Fr===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);Fr=i&&i[1]||"",Qr=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fr+e+Qr}var el=!1;function rr(e,i){if(!e||el)return"";el=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Y){var G=Y}Reflect.construct(e,[],tt)}else{try{tt.call()}catch(Y){G=Y}e.call(tt.prototype)}}else{try{throw Error()}catch(Y){G=Y}(tt=e())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),y=d[0],A=d[1];if(y&&A){var O=y.split(`
`),P=A.split(`
`);for(h=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(o===O.length||h===P.length)for(o=O.length-1,h=P.length-1;1<=o&&0<=h&&O[o]!==P[h];)h--;for(;1<=o&&0<=h;o--,h--)if(O[o]!==P[h]){if(o!==1||h!==1)do if(o--,h--,0>h||O[o]!==P[h]){var Z=`
`+O[o].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=o&&0<=h);break}}}finally{el=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?ri(r):""}function nl(e,i){switch(e.tag){case 26:case 27:case 5:return ri(e.type);case 16:return ri("Lazy");case 13:return e.child!==i&&i!==null?ri("Suspense Fallback"):ri("Suspense");case 19:return ri("SuspenseList");case 0:case 15:return rr(e.type,!1);case 11:return rr(e.type.render,!1);case 1:return rr(e.type,!0);case 31:return ri("Activity");default:return""}}function il(e){try{var i="",r=null;do i+=nl(e,r),r=e,e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var be=Object.prototype.hasOwnProperty,Oe=a.unstable_scheduleCallback,rs=a.unstable_cancelCallback,ch=a.unstable_shouldYield,Uo=a.unstable_requestPaint,sn=a.unstable_now,ar=a.unstable_getCurrentPriorityLevel,sl=a.unstable_ImmediatePriority,rl=a.unstable_UserBlockingPriority,as=a.unstable_NormalPriority,hh=a.unstable_LowPriority,ko=a.unstable_IdlePriority,Bo=a.log,jo=a.unstable_setDisableYieldValue,Qn=null,qe=null;function Dn(e){if(typeof Bo=="function"&&jo(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Qn,e)}catch{}}var me=Math.clz32?Math.clz32:qo,Ho=Math.log,Yr=Math.LN2;function qo(e){return e>>>=0,e===0?32:31-(Ho(e)/Yr|0)|0}var ai=256,lr=262144,Ee=4194304;function li(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function oi(e,i,r){var o=e.pendingLanes;if(o===0)return 0;var h=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var A=o&134217727;return A!==0?(o=A&~d,o!==0?h=li(o):(y&=A,y!==0?h=li(y):r||(r=A&~e,r!==0&&(h=li(r))))):(A=o&~d,A!==0?h=li(A):y!==0?h=li(y):r||(r=o&~e,r!==0&&(h=li(r)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,r=i&-i,d>=r||d===32&&(r&4194048)!==0)?i:h}function Yn(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function fh(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(){var e=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),e}function ui(e){for(var i=[],r=0;31>r;r++)i.push(e);return i}function or(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function dh(e,i,r,o,h,d){var y=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var A=e.entanglements,O=e.expirationTimes,P=e.hiddenUpdates;for(r=y&~r;0<r;){var Z=31-me(r),tt=1<<Z;A[Z]=0,O[Z]=-1;var G=P[Z];if(G!==null)for(P[Z]=null,Z=0;Z<G.length;Z++){var Y=G[Z];Y!==null&&(Y.lane&=-536870913)}r&=~tt}o!==0&&ur(e,o,0),d!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~i))}function ur(e,i,r){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-me(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function al(e,i){var r=e.entangledLanes|=i;for(e=e.entanglements;r;){var o=31-me(r),h=1<<o;h&i|e[o]&i&&(e[o]|=i),r&=~h}}function ll(e,i){var r=i&-i;return r=(r&42)!==0?1:cr(r),(r&(e.suspendedLanes|i))!==0?0:r}function cr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function zi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Go(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:X_(e.type))}function Xn(e,i){var r=J.p;try{return J.p=e,i()}finally{J.p=r}}var Kn=Math.random().toString(36).slice(2),Te="__reactFiber$"+Kn,Ue="__reactProps$"+Kn,ci="__reactContainer$"+Kn,Xr="__reactEvents$"+Kn,gh="__reactListeners$"+Kn,Fo="__reactHandles$"+Kn,Qo="__reactResources$"+Kn,hi="__reactMarker$"+Kn;function Kr(e){delete e[Te],delete e[Ue],delete e[Xr],delete e[gh],delete e[Fo]}function fi(e){var i=e[Te];if(i)return i;for(var r=e.parentNode;r;){if(i=r[ci]||r[Te]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(e=M_(e);e!==null;){if(r=e[Te])return r;e=M_(e)}return i}e=r,r=e.parentNode}return null}function Vn(e){if(e=e[Te]||e[ci]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function vn(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function di(e){var i=e[Qo];return i||(i=e[Qo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ae(e){e[hi]=!0}var ol=new Set,ul={};function gi(e,i){mi(e,i),mi(e+"Capture",i)}function mi(e,i){for(ul[e]=i,e=0;e<i.length;e++)ol.add(i[e])}var cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hl={},fl={};function Yo(e){return be.call(fl,e)?!0:be.call(hl,e)?!1:cl.test(e)?fl[e]=!0:(hl[e]=!0,!1)}function $r(e,i,r){if(Yo(i))if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+r)}}function bn(e,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+r)}}function Se(e,i,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(i,r,""+o)}}function ke(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ls(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function dl(e,i,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,d=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(y){r=""+y,d.call(this,y)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function $t(e){if(!e._valueTracker){var i=ls(e)?"checked":"value";e._valueTracker=dl(e,i,""+e[i])}}function hr(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var r=i.getValue(),o="";return e&&(o=ls(e)?e.checked?"true":"false":e.value),e=o,e!==r?(i.setValue(e),!0):!1}function pi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var fr=/[\n"\\]/g;function cn(e){return e.replace(fr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Zr(e,i,r,o,h,d,y,A){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),i!=null?y==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+ke(i)):e.value!==""+ke(i)&&(e.value=""+ke(i)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),i!=null?gl(e,y,ke(i)):r!=null?gl(e,y,ke(r)):o!=null&&e.removeAttribute("value"),h==null&&d!=null&&(e.defaultChecked=!!d),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+ke(A):e.removeAttribute("name")}function Xo(e,i,r,o,h,d,y,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||r!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){$t(e);return}r=r!=null?""+ke(r):"",i=i!=null?""+ke(i):r,A||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=A?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),$t(e)}function gl(e,i,r){i==="number"&&pi(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function os(e,i,r,o){if(e=e.options,i){i={};for(var h=0;h<r.length;h++)i["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=i.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&o&&(e[r].defaultSelected=!0)}else{for(r=""+ke(r),i=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Ko(e,i,r){if(i!=null&&(i=""+ke(i),i!==e.value&&(e.value=i),r==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=r!=null?""+ke(r):""}function us(e,i,r,o){if(i==null){if(o!=null){if(r!=null)throw Error(s(92));if(Pt(o)){if(1<o.length)throw Error(s(93));o=o[0]}r=o}r==null&&(r=""),i=r}r=ke(i),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),$t(e)}function hn(e,i){if(i){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=i;return}}e.textContent=i}var $o=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ml(e,i,r){var o=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,r):typeof r!="number"||r===0||$o.has(i)?i==="float"?e.cssFloat=r:e[i]=(""+r).trim():e[i]=r+"px"}function pl(e,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&r[h]!==o&&ml(e,h,o)}else for(var d in i)i.hasOwnProperty(d)&&ml(e,d,i[d])}function Jr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(e){return cs.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function $n(){}var _l=null;function Nn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hs=null,_i=null;function dr(e){var i=Vn(e);if(i&&(e=i.stateNode)){var r=e[Ue]||null;t:switch(e=i.stateNode,i.type){case"input":if(Zr(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+cn(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var o=r[i];if(o!==e&&o.form===e.form){var h=o[Ue]||null;if(!h)throw Error(s(90));Zr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<r.length;i++)o=r[i],o.form===e.form&&hr(o)}break t;case"textarea":Ko(e,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&os(e,!!r.multiple,i,!1)}}}var ta=!1;function fs(e,i,r){if(ta)return e(i,r);ta=!0;try{var o=e(i);return o}finally{if(ta=!1,(hs!==null||_i!==null)&&(Gu(),hs&&(i=hs,e=_i,_i=hs=null,dr(i),e)))for(i=0;i<e.length;i++)dr(e[i])}}function Zn(e,i){var r=e.stateNode;if(r===null)return null;var o=r[Ue]||null;if(o===null)return null;r=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gr=!1;if(Mn)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){gr=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{gr=!1}var yi=null,yl=null,mr=null;function vl(){if(mr)return mr;var e,i=yl,r=i.length,o,h="value"in yi?yi.value:yi.textContent,d=h.length;for(e=0;e<r&&i[e]===h[e];e++);var y=r-e;for(o=1;o<=y&&i[r-o]===h[d-o];o++);return mr=h.slice(e,1<o?1-o:void 0)}function pr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Ui(){return!0}function Jn(){return!1}function Pe(e){function i(r,o,h,d,y){this._reactName=r,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(r=e[A],this[A]=r?r(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ui:Jn,this.isPropagationStopped=Jn,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),i}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vi=Pe(ki),ds=E({},ki,{view:0,detail:0}),bl=Pe(ds),gs,ea,bi,na=E({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bi&&(bi&&e.type==="mousemove"?(gs=e.screenX-bi.screenX,ea=e.screenY-bi.screenY):ea=gs=0,bi=e),gs)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),El=Pe(na),_r=E({},na,{dataTransfer:0}),Jo=Pe(_r),Wo=E({},ds,{relatedTarget:0}),yr=Pe(Wo),Tl=E({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),tu=Pe(Tl),ia=E({},ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eu=Pe(ia),nu=E({},ki,{data:0}),Ei=Pe(nu),iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},su={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function au(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ru[e])?!!i[e]:!1}function ms(){return au}var rn=E({},ds,{key:function(e){if(e.key){var i=iu[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=pr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?su[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(e){return e.type==="keypress"?pr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lu=Pe(rn),ou=E({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=Pe(ou),c=E({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),_=Pe(c),v=E({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Pe(v),H=E({},na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Pe(H),lt=E({},ki,{newState:0,oldState:0}),Ct=Pe(lt),pe=[9,13,27,32],Qt=Mn&&"CompositionEvent"in window,ue=null;Mn&&"documentMode"in document&&(ue=document.documentMode);var On=Mn&&"TextEvent"in window&&!ue,Ti=Mn&&(!Qt||ue&&8<ue&&11>=ue),Wn=" ",ti=!1;function vr(e,i){switch(e){case"keyup":return pe.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sa(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ra=!1;function Sb(e,i){switch(e){case"compositionend":return sa(i);case"keypress":return i.which!==32?null:(ti=!0,Wn);case"textInput":return e=i.data,e===Wn&&ti?null:e;default:return null}}function wb(e,i){if(ra)return e==="compositionend"||!Qt&&vr(e,i)?(e=vl(),mr=yl=yi=null,ra=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ti&&i.locale!=="ko"?null:i.data;default:return null}}var Rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Rb[e.type]:i==="textarea"}function zg(e,i,r,o){hs?_i?_i.push(o):_i=[o]:hs=o,i=Zu(i,"onChange"),0<i.length&&(r=new vi("onChange","change",null,r,o),e.push({event:r,listeners:i}))}var Al=null,Sl=null;function xb(e){y_(e,0)}function uu(e){var i=vn(e);if(hr(i))return e}function Ug(e,i){if(e==="change")return i}var kg=!1;if(Mn){var mh;if(Mn){var ph="oninput"in document;if(!ph){var Bg=document.createElement("div");Bg.setAttribute("oninput","return;"),ph=typeof Bg.oninput=="function"}mh=ph}else mh=!1;kg=mh&&(!document.documentMode||9<document.documentMode)}function jg(){Al&&(Al.detachEvent("onpropertychange",Hg),Sl=Al=null)}function Hg(e){if(e.propertyName==="value"&&uu(Sl)){var i=[];zg(i,Sl,e,Nn(e)),fs(xb,i)}}function Cb(e,i,r){e==="focusin"?(jg(),Al=i,Sl=r,Al.attachEvent("onpropertychange",Hg)):e==="focusout"&&jg()}function Db(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uu(Sl)}function Vb(e,i){if(e==="click")return uu(i)}function Nb(e,i){if(e==="input"||e==="change")return uu(i)}function Mb(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var En=typeof Object.is=="function"?Object.is:Mb;function wl(e,i){if(En(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var r=Object.keys(e),o=Object.keys(i);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var h=r[o];if(!be.call(i,h)||!En(e[h],i[h]))return!1}return!0}function qg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pg(e,i){var r=qg(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=i&&o>=i)return{node:r,offset:i-e};e=o}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=qg(r)}}function Gg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Gg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Fg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=pi(e.document);i instanceof e.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)e=i.contentWindow;else break;i=pi(e.document)}return i}function _h(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var Ob=Mn&&"documentMode"in document&&11>=document.documentMode,aa=null,yh=null,Rl=null,vh=!1;function Qg(e,i,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vh||aa==null||aa!==pi(o)||(o=aa,"selectionStart"in o&&_h(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Rl&&wl(Rl,o)||(Rl=o,o=Zu(yh,"onSelect"),0<o.length&&(i=new vi("onSelect","select",null,i,r),e.push({event:i,listeners:o}),i.target=aa)))}function br(e,i){var r={};return r[e.toLowerCase()]=i.toLowerCase(),r["Webkit"+e]="webkit"+i,r["Moz"+e]="moz"+i,r}var la={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionrun:br("Transition","TransitionRun"),transitionstart:br("Transition","TransitionStart"),transitioncancel:br("Transition","TransitionCancel"),transitionend:br("Transition","TransitionEnd")},bh={},Yg={};Mn&&(Yg=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function Er(e){if(bh[e])return bh[e];if(!la[e])return e;var i=la[e],r;for(r in i)if(i.hasOwnProperty(r)&&r in Yg)return bh[e]=i[r];return e}var Xg=Er("animationend"),Kg=Er("animationiteration"),$g=Er("animationstart"),Ib=Er("transitionrun"),Lb=Er("transitionstart"),zb=Er("transitioncancel"),Zg=Er("transitionend"),Jg=new Map,Eh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eh.push("scrollEnd");function ei(e,i){Jg.set(e,i),gi(i,[e])}var cu=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},In=[],oa=0,Th=0;function hu(){for(var e=oa,i=Th=oa=0;i<e;){var r=In[i];In[i++]=null;var o=In[i];In[i++]=null;var h=In[i];In[i++]=null;var d=In[i];if(In[i++]=null,o!==null&&h!==null){var y=o.pending;y===null?h.next=h:(h.next=y.next,y.next=h),o.pending=h}d!==0&&Wg(r,h,d)}}function fu(e,i,r,o){In[oa++]=e,In[oa++]=i,In[oa++]=r,In[oa++]=o,Th|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ah(e,i,r,o){return fu(e,i,r,o),du(e)}function Tr(e,i){return fu(e,null,null,i),du(e)}function Wg(e,i,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var h=!1,d=e.return;d!==null;)d.childLanes|=r,o=d.alternate,o!==null&&(o.childLanes|=r),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(h=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,h&&i!==null&&(h=31-me(r),e=d.hiddenUpdates,o=e[h],o===null?e[h]=[i]:o.push(i),i.lane=r|536870912),d):null}function du(e){if(50<Xl)throw Xl=0,Of=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var ua={};function Ub(e,i,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(e,i,r,o){return new Ub(e,i,r,o)}function Sh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ji(e,i){var r=e.alternate;return r===null?(r=Tn(e.tag,i,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=i,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,i=e.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function tm(e,i){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,i=r.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function gu(e,i,r,o,h,d){var y=0;if(o=e,typeof e=="function")Sh(e)&&(y=1);else if(typeof e=="string")y=qE(e,r,ht.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=Tn(31,r,i,h),e.elementType=C,e.lanes=d,e;case I:return Ar(r.children,h,d,i);case U:y=8,h|=24;break;case rt:return e=Tn(12,r,i,h|2),e.elementType=rt,e.lanes=d,e;case it:return e=Tn(13,r,i,h),e.elementType=it,e.lanes=d,e;case et:return e=Tn(19,r,i,h),e.elementType=et,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:y=10;break t;case X:y=9;break t;case at:y=11;break t;case w:y=14;break t;case R:y=16,o=null;break t}y=29,r=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=Tn(y,r,i,h),i.elementType=e,i.type=o,i.lanes=d,i}function Ar(e,i,r,o){return e=Tn(7,e,o,i),e.lanes=r,e}function wh(e,i,r){return e=Tn(6,e,null,i),e.lanes=r,e}function em(e){var i=Tn(18,null,null,0);return i.stateNode=e,i}function Rh(e,i,r){return i=Tn(4,e.children!==null?e.children:[],e.key,i),i.lanes=r,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var nm=new WeakMap;function Ln(e,i){if(typeof e=="object"&&e!==null){var r=nm.get(e);return r!==void 0?r:(i={value:e,source:i,stack:il(i)},nm.set(e,i),i)}return{value:e,source:i,stack:il(i)}}var ca=[],ha=0,mu=null,xl=0,zn=[],Un=0,ps=null,Ai=1,Si="";function Hi(e,i){ca[ha++]=xl,ca[ha++]=mu,mu=e,xl=i}function im(e,i,r){zn[Un++]=Ai,zn[Un++]=Si,zn[Un++]=ps,ps=e;var o=Ai;e=Si;var h=32-me(o)-1;o&=~(1<<h),r+=1;var d=32-me(i)+h;if(30<d){var y=h-h%5;d=(o&(1<<y)-1).toString(32),o>>=y,h-=y,Ai=1<<32-me(i)+h|r<<h|o,Si=d+e}else Ai=1<<d|r<<h|o,Si=e}function xh(e){e.return!==null&&(Hi(e,1),im(e,1,0))}function Ch(e){for(;e===mu;)mu=ca[--ha],ca[ha]=null,xl=ca[--ha],ca[ha]=null;for(;e===ps;)ps=zn[--Un],zn[Un]=null,Si=zn[--Un],zn[Un]=null,Ai=zn[--Un],zn[Un]=null}function sm(e,i){zn[Un++]=Ai,zn[Un++]=Si,zn[Un++]=ps,Ai=i.id,Si=i.overflow,ps=e}var Ge=null,se=null,Bt=!1,_s=null,kn=!1,Dh=Error(s(519));function ys(e){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cl(Ln(i,e)),Dh}function rm(e){var i=e.stateNode,r=e.type,o=e.memoizedProps;switch(i[Te]=e,i[Ue]=o,r){case"dialog":It("cancel",i),It("close",i);break;case"iframe":case"object":case"embed":It("load",i);break;case"video":case"audio":for(r=0;r<$l.length;r++)It($l[r],i);break;case"source":It("error",i);break;case"img":case"image":case"link":It("error",i),It("load",i);break;case"details":It("toggle",i);break;case"input":It("invalid",i),Xo(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":It("invalid",i);break;case"textarea":It("invalid",i),us(i,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||o.suppressHydrationWarning===!0||T_(i.textContent,r)?(o.popover!=null&&(It("beforetoggle",i),It("toggle",i)),o.onScroll!=null&&It("scroll",i),o.onScrollEnd!=null&&It("scrollend",i),o.onClick!=null&&(i.onclick=$n),i=!0):i=!1,i||ys(e,!0)}function am(e){for(Ge=e.return;Ge;)switch(Ge.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Ge=Ge.return}}function fa(e){if(e!==Ge)return!1;if(!Bt)return am(e),Bt=!0,!1;var i=e.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Xf(e.type,e.memoizedProps)),r=!r),r&&se&&ys(e),am(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));se=N_(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));se=N_(e)}else i===27?(i=se,Ms(e.type)?(e=Wf,Wf=null,se=e):se=i):se=Ge?jn(e.stateNode.nextSibling):null;return!0}function Sr(){se=Ge=null,Bt=!1}function Vh(){var e=_s;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),_s=null),e}function Cl(e){_s===null?_s=[e]:_s.push(e)}var Nh=L(null),wr=null,qi=null;function vs(e,i,r){ut(Nh,i._currentValue),i._currentValue=r}function Pi(e){e._currentValue=Nh.current,$(Nh)}function Mh(e,i,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===r)break;e=e.return}}function Oh(e,i,r,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var d=h.dependencies;if(d!==null){var y=h.child;d=d.firstContext;t:for(;d!==null;){var A=d;d=h;for(var O=0;O<i.length;O++)if(A.context===i[O]){d.lanes|=r,A=d.alternate,A!==null&&(A.lanes|=r),Mh(d.return,r,e),o||(y=null);break t}d=A.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(s(341));y.lanes|=r,d=y.alternate,d!==null&&(d.lanes|=r),Mh(y,r,e),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===e){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function da(e,i,r,o){e=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var A=h.type;En(h.pendingProps.value,y.value)||(e!==null?e.push(A):e=[A])}}else if(h===jt.current){if(y=h.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(eo):e=[eo])}h=h.return}e!==null&&Oh(i,e,r,o),i.flags|=262144}function pu(e){for(e=e.firstContext;e!==null;){if(!En(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rr(e){wr=e,qi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Fe(e){return lm(wr,e)}function _u(e,i){return wr===null&&Rr(e),lm(e,i)}function lm(e,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},qi===null){if(e===null)throw Error(s(308));qi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else qi=qi.next=i;return r}var kb=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(r){return r()})}},Bb=a.unstable_scheduleCallback,jb=a.unstable_NormalPriority,we={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ih(){return{controller:new kb,data:new Map,refCount:0}}function Dl(e){e.refCount--,e.refCount===0&&Bb(jb,function(){e.controller.abort()})}var Vl=null,Lh=0,ga=0,ma=null;function Hb(e,i){if(Vl===null){var r=Vl=[];Lh=0,ga=Bf(),ma={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Lh++,i.then(om,om),i}function om(){if(--Lh===0&&Vl!==null){ma!==null&&(ma.status="fulfilled");var e=Vl;Vl=null,ga=0,ma=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function qb(e,i){var r=[],o={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<r.length;h++)(0,r[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),o}var um=B.S;B.S=function(e,i){Qp=sn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Hb(e,i),um!==null&&um(e,i)};var xr=L(null);function zh(){var e=xr.current;return e!==null?e:ie.pooledCache}function yu(e,i){i===null?ut(xr,xr.current):ut(xr,i.pool)}function cm(){var e=zh();return e===null?null:{parent:we._currentValue,pool:e}}var pa=Error(s(460)),Uh=Error(s(474)),vu=Error(s(542)),bu={then:function(){}};function hm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fm(e,i,r){switch(r=e[r],r===void 0?e.push(i):r!==i&&(i.then($n,$n),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,gm(e),e;default:if(typeof i.status=="string")i.then($n,$n);else{if(e=ie,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,gm(e),e}throw Dr=i,pa}}function Cr(e){try{var i=e._init;return i(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Dr=r,pa):r}}var Dr=null;function dm(){if(Dr===null)throw Error(s(459));var e=Dr;return Dr=null,e}function gm(e){if(e===pa||e===vu)throw Error(s(483))}var _a=null,Nl=0;function Eu(e){var i=Nl;return Nl+=1,_a===null&&(_a=[]),fm(_a,e,i)}function Ml(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Tu(e,i){throw i.$$typeof===T?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function mm(e){function i(j,k){if(e){var q=j.deletions;q===null?(j.deletions=[k],j.flags|=16):q.push(k)}}function r(j,k){if(!e)return null;for(;k!==null;)i(j,k),k=k.sibling;return null}function o(j){for(var k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function h(j,k){return j=ji(j,k),j.index=0,j.sibling=null,j}function d(j,k,q){return j.index=q,e?(q=j.alternate,q!==null?(q=q.index,q<k?(j.flags|=67108866,k):q):(j.flags|=67108866,k)):(j.flags|=1048576,k)}function y(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function A(j,k,q,W){return k===null||k.tag!==6?(k=wh(q,j.mode,W),k.return=j,k):(k=h(k,q),k.return=j,k)}function O(j,k,q,W){var _t=q.type;return _t===I?Z(j,k,q.props.children,W,q.key):k!==null&&(k.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===R&&Cr(_t)===k.type)?(k=h(k,q.props),Ml(k,q),k.return=j,k):(k=gu(q.type,q.key,q.props,null,j.mode,W),Ml(k,q),k.return=j,k)}function P(j,k,q,W){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=Rh(q,j.mode,W),k.return=j,k):(k=h(k,q.children||[]),k.return=j,k)}function Z(j,k,q,W,_t){return k===null||k.tag!==7?(k=Ar(q,j.mode,W,_t),k.return=j,k):(k=h(k,q),k.return=j,k)}function tt(j,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=wh(""+k,j.mode,q),k.return=j,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case M:return q=gu(k.type,k.key,k.props,null,j.mode,q),Ml(q,k),q.return=j,q;case x:return k=Rh(k,j.mode,q),k.return=j,k;case R:return k=Cr(k),tt(j,k,q)}if(Pt(k)||z(k))return k=Ar(k,j.mode,q,null),k.return=j,k;if(typeof k.then=="function")return tt(j,Eu(k),q);if(k.$$typeof===K)return tt(j,_u(j,k),q);Tu(j,k)}return null}function G(j,k,q,W){var _t=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _t!==null?null:A(j,k,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case M:return q.key===_t?O(j,k,q,W):null;case x:return q.key===_t?P(j,k,q,W):null;case R:return q=Cr(q),G(j,k,q,W)}if(Pt(q)||z(q))return _t!==null?null:Z(j,k,q,W,null);if(typeof q.then=="function")return G(j,k,Eu(q),W);if(q.$$typeof===K)return G(j,k,_u(j,q),W);Tu(j,q)}return null}function Y(j,k,q,W,_t){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return j=j.get(q)||null,A(k,j,""+W,_t);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case M:return j=j.get(W.key===null?q:W.key)||null,O(k,j,W,_t);case x:return j=j.get(W.key===null?q:W.key)||null,P(k,j,W,_t);case R:return W=Cr(W),Y(j,k,q,W,_t)}if(Pt(W)||z(W))return j=j.get(q)||null,Z(k,j,W,_t,null);if(typeof W.then=="function")return Y(j,k,q,Eu(W),_t);if(W.$$typeof===K)return Y(j,k,q,_u(k,W),_t);Tu(k,W)}return null}function gt(j,k,q,W){for(var _t=null,Gt=null,mt=k,Mt=k=0,zt=null;mt!==null&&Mt<q.length;Mt++){mt.index>Mt?(zt=mt,mt=null):zt=mt.sibling;var Ft=G(j,mt,q[Mt],W);if(Ft===null){mt===null&&(mt=zt);break}e&&mt&&Ft.alternate===null&&i(j,mt),k=d(Ft,k,Mt),Gt===null?_t=Ft:Gt.sibling=Ft,Gt=Ft,mt=zt}if(Mt===q.length)return r(j,mt),Bt&&Hi(j,Mt),_t;if(mt===null){for(;Mt<q.length;Mt++)mt=tt(j,q[Mt],W),mt!==null&&(k=d(mt,k,Mt),Gt===null?_t=mt:Gt.sibling=mt,Gt=mt);return Bt&&Hi(j,Mt),_t}for(mt=o(mt);Mt<q.length;Mt++)zt=Y(mt,j,Mt,q[Mt],W),zt!==null&&(e&&zt.alternate!==null&&mt.delete(zt.key===null?Mt:zt.key),k=d(zt,k,Mt),Gt===null?_t=zt:Gt.sibling=zt,Gt=zt);return e&&mt.forEach(function(Us){return i(j,Us)}),Bt&&Hi(j,Mt),_t}function vt(j,k,q,W){if(q==null)throw Error(s(151));for(var _t=null,Gt=null,mt=k,Mt=k=0,zt=null,Ft=q.next();mt!==null&&!Ft.done;Mt++,Ft=q.next()){mt.index>Mt?(zt=mt,mt=null):zt=mt.sibling;var Us=G(j,mt,Ft.value,W);if(Us===null){mt===null&&(mt=zt);break}e&&mt&&Us.alternate===null&&i(j,mt),k=d(Us,k,Mt),Gt===null?_t=Us:Gt.sibling=Us,Gt=Us,mt=zt}if(Ft.done)return r(j,mt),Bt&&Hi(j,Mt),_t;if(mt===null){for(;!Ft.done;Mt++,Ft=q.next())Ft=tt(j,Ft.value,W),Ft!==null&&(k=d(Ft,k,Mt),Gt===null?_t=Ft:Gt.sibling=Ft,Gt=Ft);return Bt&&Hi(j,Mt),_t}for(mt=o(mt);!Ft.done;Mt++,Ft=q.next())Ft=Y(mt,j,Mt,Ft.value,W),Ft!==null&&(e&&Ft.alternate!==null&&mt.delete(Ft.key===null?Mt:Ft.key),k=d(Ft,k,Mt),Gt===null?_t=Ft:Gt.sibling=Ft,Gt=Ft);return e&&mt.forEach(function(WE){return i(j,WE)}),Bt&&Hi(j,Mt),_t}function ne(j,k,q,W){if(typeof q=="object"&&q!==null&&q.type===I&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case M:t:{for(var _t=q.key;k!==null;){if(k.key===_t){if(_t=q.type,_t===I){if(k.tag===7){r(j,k.sibling),W=h(k,q.props.children),W.return=j,j=W;break t}}else if(k.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===R&&Cr(_t)===k.type){r(j,k.sibling),W=h(k,q.props),Ml(W,q),W.return=j,j=W;break t}r(j,k);break}else i(j,k);k=k.sibling}q.type===I?(W=Ar(q.props.children,j.mode,W,q.key),W.return=j,j=W):(W=gu(q.type,q.key,q.props,null,j.mode,W),Ml(W,q),W.return=j,j=W)}return y(j);case x:t:{for(_t=q.key;k!==null;){if(k.key===_t)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){r(j,k.sibling),W=h(k,q.children||[]),W.return=j,j=W;break t}else{r(j,k);break}else i(j,k);k=k.sibling}W=Rh(q,j.mode,W),W.return=j,j=W}return y(j);case R:return q=Cr(q),ne(j,k,q,W)}if(Pt(q))return gt(j,k,q,W);if(z(q)){if(_t=z(q),typeof _t!="function")throw Error(s(150));return q=_t.call(q),vt(j,k,q,W)}if(typeof q.then=="function")return ne(j,k,Eu(q),W);if(q.$$typeof===K)return ne(j,k,_u(j,q),W);Tu(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(r(j,k.sibling),W=h(k,q),W.return=j,j=W):(r(j,k),W=wh(q,j.mode,W),W.return=j,j=W),y(j)):r(j,k)}return function(j,k,q,W){try{Nl=0;var _t=ne(j,k,q,W);return _a=null,_t}catch(mt){if(mt===pa||mt===vu)throw mt;var Gt=Tn(29,mt,null,j.mode);return Gt.lanes=W,Gt.return=j,Gt}finally{}}}var Vr=mm(!0),pm=mm(!1),bs=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bh(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Es(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ts(e,i,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Yt&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=du(e),Wg(e,null,r),i}return fu(e,o,i,r),du(e)}function Ol(e,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,r|=o,i.lanes=r,al(e,r)}}function jh(e,i){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var h=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};d===null?h=d=y:d=d.next=y,r=r.next}while(r!==null);d===null?h=d=i:d=d.next=i}else h=d=i;r={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=i:e.next=i,r.lastBaseUpdate=i}var Hh=!1;function Il(){if(Hh){var e=ma;if(e!==null)throw e}}function Ll(e,i,r,o){Hh=!1;var h=e.updateQueue;bs=!1;var d=h.firstBaseUpdate,y=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var O=A,P=O.next;O.next=null,y===null?d=P:y.next=P,y=O;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==y&&(A===null?Z.firstBaseUpdate=P:A.next=P,Z.lastBaseUpdate=O))}if(d!==null){var tt=h.baseState;y=0,Z=P=O=null,A=d;do{var G=A.lane&-536870913,Y=G!==A.lane;if(Y?(Lt&G)===G:(o&G)===G){G!==0&&G===ga&&(Hh=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var gt=e,vt=A;G=i;var ne=r;switch(vt.tag){case 1:if(gt=vt.payload,typeof gt=="function"){tt=gt.call(ne,tt,G);break t}tt=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=vt.payload,G=typeof gt=="function"?gt.call(ne,tt,G):gt,G==null)break t;tt=E({},tt,G);break t;case 2:bs=!0}}G=A.callback,G!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=h.callbacks,Y===null?h.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(P=Z=Y,O=tt):Z=Z.next=Y,y|=G;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,h.lastBaseUpdate=Y,h.shared.pending=null}}while(!0);Z===null&&(O=tt),h.baseState=O,h.firstBaseUpdate=P,h.lastBaseUpdate=Z,d===null&&(h.shared.lanes=0),xs|=y,e.lanes=y,e.memoizedState=tt}}function _m(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function ym(e,i){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)_m(r[e],i)}var ya=L(null),Au=L(0);function vm(e,i){e=Ji,ut(Au,e),ut(ya,i),Ji=e|i.baseLanes}function qh(){ut(Au,Ji),ut(ya,ya.current)}function Ph(){Ji=Au.current,$(ya),$(Au)}var An=L(null),Bn=null;function As(e){var i=e.alternate;ut(_e,_e.current&1),ut(An,e),Bn===null&&(i===null||ya.current!==null||i.memoizedState!==null)&&(Bn=e)}function Gh(e){ut(_e,_e.current),ut(An,e),Bn===null&&(Bn=e)}function bm(e){e.tag===22?(ut(_e,_e.current),ut(An,e),Bn===null&&(Bn=e)):Ss()}function Ss(){ut(_e,_e.current),ut(An,An.current)}function Sn(e){$(An),Bn===e&&(Bn=null),$(_e)}var _e=L(0);function Su(e){for(var i=e;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Zf(r)||Jf(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Gi=0,Dt=null,te=null,Re=null,wu=!1,va=!1,Nr=!1,Ru=0,zl=0,ba=null,Pb=0;function fe(){throw Error(s(321))}function Fh(e,i){if(i===null)return!1;for(var r=0;r<i.length&&r<e.length;r++)if(!En(e[r],i[r]))return!1;return!0}function Qh(e,i,r,o,h,d){return Gi=d,Dt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=e===null||e.memoizedState===null?ip:of,Nr=!1,d=r(o,h),Nr=!1,va&&(d=Tm(i,r,o,h)),Em(e),d}function Em(e){B.H=Bl;var i=te!==null&&te.next!==null;if(Gi=0,Re=te=Dt=null,wu=!1,zl=0,ba=null,i)throw Error(s(300));e===null||xe||(e=e.dependencies,e!==null&&pu(e)&&(xe=!0))}function Tm(e,i,r,o){Dt=e;var h=0;do{if(va&&(ba=null),zl=0,va=!1,25<=h)throw Error(s(301));if(h+=1,Re=te=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}B.H=sp,d=i(r,o)}while(va);return d}function Gb(){var e=B.H,i=e.useState()[0];return i=typeof i.then=="function"?Ul(i):i,e=e.useState()[0],(te!==null?te.memoizedState:null)!==e&&(Dt.flags|=1024),i}function Yh(){var e=Ru!==0;return Ru=0,e}function Xh(e,i,r){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r}function Kh(e){if(wu){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}wu=!1}Gi=0,Re=te=Dt=null,va=!1,zl=Ru=0,ba=null}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?Dt.memoizedState=Re=e:Re=Re.next=e,Re}function ye(){if(te===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=te.next;var i=Re===null?Dt.memoizedState:Re.next;if(i!==null)Re=i,te=e;else{if(e===null)throw Dt.alternate===null?Error(s(467)):Error(s(310));te=e,e={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},Re===null?Dt.memoizedState=Re=e:Re=Re.next=e}return Re}function xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(e){var i=zl;return zl+=1,ba===null&&(ba=[]),e=fm(ba,e,i),i=Dt,(Re===null?i.memoizedState:Re.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?ip:of),e}function Cu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ul(e);if(e.$$typeof===K)return Fe(e)}throw Error(s(438,String(e)))}function $h(e){var i=null,r=Dt.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var o=Dt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=xu(),Dt.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(e),o=0;o<e;o++)r[o]=V;return i.index++,r}function Fi(e,i){return typeof i=="function"?i(e):i}function Du(e){var i=ye();return Zh(i,te,e)}function Zh(e,i,r){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var h=e.baseQueue,d=o.pending;if(d!==null){if(h!==null){var y=h.next;h.next=d.next,d.next=y}i.baseQueue=h=d,o.pending=null}if(d=e.baseState,h===null)e.memoizedState=d;else{i=h.next;var A=y=null,O=null,P=i,Z=!1;do{var tt=P.lane&-536870913;if(tt!==P.lane?(Lt&tt)===tt:(Gi&tt)===tt){var G=P.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),tt===ga&&(Z=!0);else if((Gi&G)===G){P=P.next,G===ga&&(Z=!0);continue}else tt={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},O===null?(A=O=tt,y=d):O=O.next=tt,Dt.lanes|=G,xs|=G;tt=P.action,Nr&&r(d,tt),d=P.hasEagerState?P.eagerState:r(d,tt)}else G={lane:tt,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},O===null?(A=O=G,y=d):O=O.next=G,Dt.lanes|=tt,xs|=tt;P=P.next}while(P!==null&&P!==i);if(O===null?y=d:O.next=A,!En(d,e.memoizedState)&&(xe=!0,Z&&(r=ma,r!==null)))throw r;e.memoizedState=d,e.baseState=y,e.baseQueue=O,o.lastRenderedState=d}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Jh(e){var i=ye(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var o=r.dispatch,h=r.pending,d=i.memoizedState;if(h!==null){r.pending=null;var y=h=h.next;do d=e(d,y.action),y=y.next;while(y!==h);En(d,i.memoizedState)||(xe=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),r.lastRenderedState=d}return[d,o]}function Am(e,i,r){var o=Dt,h=ye(),d=Bt;if(d){if(r===void 0)throw Error(s(407));r=r()}else r=i();var y=!En((te||h).memoizedState,r);if(y&&(h.memoizedState=r,xe=!0),h=h.queue,ef(Rm.bind(null,o,h,e),[e]),h.getSnapshot!==i||y||Re!==null&&Re.memoizedState.tag&1){if(o.flags|=2048,Ea(9,{destroy:void 0},wm.bind(null,o,h,r,i),null),ie===null)throw Error(s(349));d||(Gi&127)!==0||Sm(o,i,r)}return r}function Sm(e,i,r){e.flags|=16384,e={getSnapshot:i,value:r},i=Dt.updateQueue,i===null?(i=xu(),Dt.updateQueue=i,i.stores=[e]):(r=i.stores,r===null?i.stores=[e]:r.push(e))}function wm(e,i,r,o){i.value=r,i.getSnapshot=o,xm(i)&&Cm(e)}function Rm(e,i,r){return r(function(){xm(i)&&Cm(e)})}function xm(e){var i=e.getSnapshot;e=e.value;try{var r=i();return!En(e,r)}catch{return!0}}function Cm(e){var i=Tr(e,2);i!==null&&pn(i,e,2)}function Wh(e){var i=an();if(typeof e=="function"){var r=e;if(e=r(),Nr){Dn(!0);try{r()}finally{Dn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:e},i}function Dm(e,i,r,o){return e.baseState=r,Zh(e,te,typeof o=="function"?o:Fi)}function Fb(e,i,r,o,h){if(Mu(e))throw Error(s(485));if(e=i.action,e!==null){var d={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};B.T!==null?r(!0):d.isTransition=!1,o(d),r=i.pending,r===null?(d.next=i.pending=d,Vm(i,d)):(d.next=r.next,i.pending=r.next=d)}}function Vm(e,i){var r=i.action,o=i.payload,h=e.state;if(i.isTransition){var d=B.T,y={};B.T=y;try{var A=r(h,o),O=B.S;O!==null&&O(y,A),Nm(e,i,A)}catch(P){tf(e,i,P)}finally{d!==null&&y.types!==null&&(d.types=y.types),B.T=d}}else try{d=r(h,o),Nm(e,i,d)}catch(P){tf(e,i,P)}}function Nm(e,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Mm(e,i,o)},function(o){return tf(e,i,o)}):Mm(e,i,r)}function Mm(e,i,r){i.status="fulfilled",i.value=r,Om(i),e.state=r,i=e.pending,i!==null&&(r=i.next,r===i?e.pending=null:(r=r.next,i.next=r,Vm(e,r)))}function tf(e,i,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=r,Om(i),i=i.next;while(i!==o)}e.action=null}function Om(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Im(e,i){return i}function Lm(e,i){if(Bt){var r=ie.formState;if(r!==null){t:{var o=Dt;if(Bt){if(se){e:{for(var h=se,d=kn;h.nodeType!==8;){if(!d){h=null;break e}if(h=jn(h.nextSibling),h===null){h=null;break e}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){se=jn(h.nextSibling),o=h.data==="F!";break t}}ys(o)}o=!1}o&&(i=r[0])}}return r=an(),r.memoizedState=r.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Im,lastRenderedState:i},r.queue=o,r=tp.bind(null,Dt,o),o.dispatch=r,o=Wh(!1),d=lf.bind(null,Dt,!1,o.queue),o=an(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,r=Fb.bind(null,Dt,h,d,r),h.dispatch=r,o.memoizedState=e,[i,r,!1]}function zm(e){var i=ye();return Um(i,te,e)}function Um(e,i,r){if(i=Zh(e,i,Im)[0],e=Du(Fi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Ul(i)}catch(y){throw y===pa?vu:y}else o=i;i=ye();var h=i.queue,d=h.dispatch;return r!==i.memoizedState&&(Dt.flags|=2048,Ea(9,{destroy:void 0},Qb.bind(null,h,r),null)),[o,d,e]}function Qb(e,i){e.action=i}function km(e){var i=ye(),r=te;if(r!==null)return Um(i,r,e);ye(),i=i.memoizedState,r=ye();var o=r.queue.dispatch;return r.memoizedState=e,[i,o,!1]}function Ea(e,i,r,o){return e={tag:e,create:r,deps:o,inst:i,next:null},i=Dt.updateQueue,i===null&&(i=xu(),Dt.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,i.lastEffect=e),e}function Bm(){return ye().memoizedState}function Vu(e,i,r,o){var h=an();Dt.flags|=e,h.memoizedState=Ea(1|i,{destroy:void 0},r,o===void 0?null:o)}function Nu(e,i,r,o){var h=ye();o=o===void 0?null:o;var d=h.memoizedState.inst;te!==null&&o!==null&&Fh(o,te.memoizedState.deps)?h.memoizedState=Ea(i,d,r,o):(Dt.flags|=e,h.memoizedState=Ea(1|i,d,r,o))}function jm(e,i){Vu(8390656,8,e,i)}function ef(e,i){Nu(2048,8,e,i)}function Yb(e){Dt.flags|=4;var i=Dt.updateQueue;if(i===null)i=xu(),Dt.updateQueue=i,i.events=[e];else{var r=i.events;r===null?i.events=[e]:r.push(e)}}function Hm(e){var i=ye().memoizedState;return Yb({ref:i,nextImpl:e}),function(){if((Yt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function qm(e,i){return Nu(4,2,e,i)}function Pm(e,i){return Nu(4,4,e,i)}function Gm(e,i){if(typeof i=="function"){e=e();var r=i(e);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Fm(e,i,r){r=r!=null?r.concat([e]):null,Nu(4,4,Gm.bind(null,i,e),r)}function nf(){}function Qm(e,i){var r=ye();i=i===void 0?null:i;var o=r.memoizedState;return i!==null&&Fh(i,o[1])?o[0]:(r.memoizedState=[e,i],e)}function Ym(e,i){var r=ye();i=i===void 0?null:i;var o=r.memoizedState;if(i!==null&&Fh(i,o[1]))return o[0];if(o=e(),Nr){Dn(!0);try{e()}finally{Dn(!1)}}return r.memoizedState=[o,i],o}function sf(e,i,r){return r===void 0||(Gi&1073741824)!==0&&(Lt&261930)===0?e.memoizedState=i:(e.memoizedState=r,e=Xp(),Dt.lanes|=e,xs|=e,r)}function Xm(e,i,r,o){return En(r,i)?r:ya.current!==null?(e=sf(e,r,o),En(e,i)||(xe=!0),e):(Gi&42)===0||(Gi&1073741824)!==0&&(Lt&261930)===0?(xe=!0,e.memoizedState=r):(e=Xp(),Dt.lanes|=e,xs|=e,i)}function Km(e,i,r,o,h){var d=J.p;J.p=d!==0&&8>d?d:8;var y=B.T,A={};B.T=A,lf(e,!1,i,r);try{var O=h(),P=B.S;if(P!==null&&P(A,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=qb(O,o);kl(e,i,Z,xn(e))}else kl(e,i,o,xn(e))}catch(tt){kl(e,i,{then:function(){},status:"rejected",reason:tt},xn())}finally{J.p=d,y!==null&&A.types!==null&&(y.types=A.types),B.T=y}}function Xb(){}function rf(e,i,r,o){if(e.tag!==5)throw Error(s(476));var h=$m(e).queue;Km(e,h,i,ot,r===null?Xb:function(){return Zm(e),r(o)})}function $m(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:ot},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:r},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Zm(e){var i=$m(e);i.next===null&&(i=e.alternate.memoizedState),kl(e,i.next.queue,{},xn())}function af(){return Fe(eo)}function Jm(){return ye().memoizedState}function Wm(){return ye().memoizedState}function Kb(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var r=xn();e=Es(r);var o=Ts(i,e,r);o!==null&&(pn(o,i,r),Ol(o,i,r)),i={cache:Ih()},e.payload=i;return}i=i.return}}function $b(e,i,r){var o=xn();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Mu(e)?ep(i,r):(r=Ah(e,i,r,o),r!==null&&(pn(r,e,o),np(r,i,o)))}function tp(e,i,r){var o=xn();kl(e,i,r,o)}function kl(e,i,r,o){var h={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Mu(e))ep(i,h);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var y=i.lastRenderedState,A=d(y,r);if(h.hasEagerState=!0,h.eagerState=A,En(A,y))return fu(e,i,h,0),ie===null&&hu(),!1}catch{}finally{}if(r=Ah(e,i,h,o),r!==null)return pn(r,e,o),np(r,i,o),!0}return!1}function lf(e,i,r,o){if(o={lane:2,revertLane:Bf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Mu(e)){if(i)throw Error(s(479))}else i=Ah(e,r,o,2),i!==null&&pn(i,e,2)}function Mu(e){var i=e.alternate;return e===Dt||i!==null&&i===Dt}function ep(e,i){va=wu=!0;var r=e.pending;r===null?i.next=i:(i.next=r.next,r.next=i),e.pending=i}function np(e,i,r){if((r&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,r|=o,i.lanes=r,al(e,r)}}var Bl={readContext:Fe,use:Cu,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useLayoutEffect:fe,useInsertionEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useSyncExternalStore:fe,useId:fe,useHostTransitionStatus:fe,useFormState:fe,useActionState:fe,useOptimistic:fe,useMemoCache:fe,useCacheRefresh:fe};Bl.useEffectEvent=fe;var ip={readContext:Fe,use:Cu,useCallback:function(e,i){return an().memoizedState=[e,i===void 0?null:i],e},useContext:Fe,useEffect:jm,useImperativeHandle:function(e,i,r){r=r!=null?r.concat([e]):null,Vu(4194308,4,Gm.bind(null,i,e),r)},useLayoutEffect:function(e,i){return Vu(4194308,4,e,i)},useInsertionEffect:function(e,i){Vu(4,2,e,i)},useMemo:function(e,i){var r=an();i=i===void 0?null:i;var o=e();if(Nr){Dn(!0);try{e()}finally{Dn(!1)}}return r.memoizedState=[o,i],o},useReducer:function(e,i,r){var o=an();if(r!==void 0){var h=r(i);if(Nr){Dn(!0);try{r(i)}finally{Dn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=$b.bind(null,Dt,e),[o.memoizedState,e]},useRef:function(e){var i=an();return e={current:e},i.memoizedState=e},useState:function(e){e=Wh(e);var i=e.queue,r=tp.bind(null,Dt,i);return i.dispatch=r,[e.memoizedState,r]},useDebugValue:nf,useDeferredValue:function(e,i){var r=an();return sf(r,e,i)},useTransition:function(){var e=Wh(!1);return e=Km.bind(null,Dt,e.queue,!0,!1),an().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,r){var o=Dt,h=an();if(Bt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),ie===null)throw Error(s(349));(Lt&127)!==0||Sm(o,i,r)}h.memoizedState=r;var d={value:r,getSnapshot:i};return h.queue=d,jm(Rm.bind(null,o,d,e),[e]),o.flags|=2048,Ea(9,{destroy:void 0},wm.bind(null,o,d,r,i),null),r},useId:function(){var e=an(),i=ie.identifierPrefix;if(Bt){var r=Si,o=Ai;r=(o&~(1<<32-me(o)-1)).toString(32)+r,i="_"+i+"R_"+r,r=Ru++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=Pb++,i="_"+i+"r_"+r.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:af,useFormState:Lm,useActionState:Lm,useOptimistic:function(e){var i=an();i.memoizedState=i.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=lf.bind(null,Dt,!0,r),r.dispatch=i,[e,i]},useMemoCache:$h,useCacheRefresh:function(){return an().memoizedState=Kb.bind(null,Dt)},useEffectEvent:function(e){var i=an(),r={impl:e};return i.memoizedState=r,function(){if((Yt&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},of={readContext:Fe,use:Cu,useCallback:Qm,useContext:Fe,useEffect:ef,useImperativeHandle:Fm,useInsertionEffect:qm,useLayoutEffect:Pm,useMemo:Ym,useReducer:Du,useRef:Bm,useState:function(){return Du(Fi)},useDebugValue:nf,useDeferredValue:function(e,i){var r=ye();return Xm(r,te.memoizedState,e,i)},useTransition:function(){var e=Du(Fi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:Ul(e),i]},useSyncExternalStore:Am,useId:Jm,useHostTransitionStatus:af,useFormState:zm,useActionState:zm,useOptimistic:function(e,i){var r=ye();return Dm(r,te,e,i)},useMemoCache:$h,useCacheRefresh:Wm};of.useEffectEvent=Hm;var sp={readContext:Fe,use:Cu,useCallback:Qm,useContext:Fe,useEffect:ef,useImperativeHandle:Fm,useInsertionEffect:qm,useLayoutEffect:Pm,useMemo:Ym,useReducer:Jh,useRef:Bm,useState:function(){return Jh(Fi)},useDebugValue:nf,useDeferredValue:function(e,i){var r=ye();return te===null?sf(r,e,i):Xm(r,te.memoizedState,e,i)},useTransition:function(){var e=Jh(Fi)[0],i=ye().memoizedState;return[typeof e=="boolean"?e:Ul(e),i]},useSyncExternalStore:Am,useId:Jm,useHostTransitionStatus:af,useFormState:km,useActionState:km,useOptimistic:function(e,i){var r=ye();return te!==null?Dm(r,te,e,i):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:$h,useCacheRefresh:Wm};sp.useEffectEvent=Hm;function uf(e,i,r,o){i=e.memoizedState,r=r(o,i),r=r==null?i:E({},i,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var cf={enqueueSetState:function(e,i,r){e=e._reactInternals;var o=xn(),h=Es(o);h.payload=i,r!=null&&(h.callback=r),i=Ts(e,h,o),i!==null&&(pn(i,e,o),Ol(i,e,o))},enqueueReplaceState:function(e,i,r){e=e._reactInternals;var o=xn(),h=Es(o);h.tag=1,h.payload=i,r!=null&&(h.callback=r),i=Ts(e,h,o),i!==null&&(pn(i,e,o),Ol(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var r=xn(),o=Es(r);o.tag=2,i!=null&&(o.callback=i),i=Ts(e,o,r),i!==null&&(pn(i,e,r),Ol(i,e,r))}};function rp(e,i,r,o,h,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,y):i.prototype&&i.prototype.isPureReactComponent?!wl(r,o)||!wl(h,d):!0}function ap(e,i,r,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,o),i.state!==e&&cf.enqueueReplaceState(i,i.state,null)}function Mr(e,i){var r=i;if("ref"in i){r={};for(var o in i)o!=="ref"&&(r[o]=i[o])}if(e=e.defaultProps){r===i&&(r=E({},r));for(var h in e)r[h]===void 0&&(r[h]=e[h])}return r}function lp(e){cu(e)}function op(e){console.error(e)}function up(e){cu(e)}function Ou(e,i){try{var r=e.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function cp(e,i,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hf(e,i,r){return r=Es(r),r.tag=3,r.payload={element:null},r.callback=function(){Ou(e,i)},r}function hp(e){return e=Es(e),e.tag=3,e}function fp(e,i,r,o){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;e.payload=function(){return h(d)},e.callback=function(){cp(i,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){cp(i,r,o),typeof h!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var A=o.stack;this.componentDidCatch(o.value,{componentStack:A!==null?A:""})})}function Zb(e,i,r,o,h){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=r.alternate,i!==null&&da(i,r,h,!0),r=An.current,r!==null){switch(r.tag){case 31:case 13:return Bn===null?Fu():r.alternate===null&&de===0&&(de=3),r.flags&=-257,r.flags|=65536,r.lanes=h,o===bu?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([o]):i.add(o),zf(e,o,h)),!1;case 22:return r.flags|=65536,o===bu?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([o]):r.add(o)),zf(e,o,h)),!1}throw Error(s(435,r.tag))}return zf(e,o,h),Fu(),!1}if(Bt)return i=An.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==Dh&&(e=Error(s(422),{cause:o}),Cl(Ln(e,r)))):(o!==Dh&&(i=Error(s(423),{cause:o}),Cl(Ln(i,r))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Ln(o,r),h=hf(e.stateNode,o,h),jh(e,h),de!==4&&(de=2)),!1;var d=Error(s(520),{cause:o});if(d=Ln(d,r),Yl===null?Yl=[d]:Yl.push(d),de!==4&&(de=2),i===null)return!0;o=Ln(o,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,e=h&-h,r.lanes|=e,e=hf(r.stateNode,o,e),jh(r,e),!1;case 1:if(i=r.type,d=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Cs===null||!Cs.has(d))))return r.flags|=65536,h&=-h,r.lanes|=h,h=hp(h),fp(h,e,r,o),jh(r,h),!1}r=r.return}while(r!==null);return!1}var ff=Error(s(461)),xe=!1;function Qe(e,i,r,o){i.child=e===null?pm(i,null,r,o):Vr(i,e.child,r,o)}function dp(e,i,r,o,h){r=r.render;var d=i.ref;if("ref"in o){var y={};for(var A in o)A!=="ref"&&(y[A]=o[A])}else y=o;return Rr(i),o=Qh(e,i,r,y,d,h),A=Yh(),e!==null&&!xe?(Xh(e,i,h),Qi(e,i,h)):(Bt&&A&&xh(i),i.flags|=1,Qe(e,i,o,h),i.child)}function gp(e,i,r,o,h){if(e===null){var d=r.type;return typeof d=="function"&&!Sh(d)&&d.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=d,mp(e,i,d,o,h)):(e=gu(r.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!bf(e,h)){var y=d.memoizedProps;if(r=r.compare,r=r!==null?r:wl,r(y,o)&&e.ref===i.ref)return Qi(e,i,h)}return i.flags|=1,e=ji(d,o),e.ref=i.ref,e.return=i,i.child=e}function mp(e,i,r,o,h){if(e!==null){var d=e.memoizedProps;if(wl(d,o)&&e.ref===i.ref)if(xe=!1,i.pendingProps=o=d,bf(e,h))(e.flags&131072)!==0&&(xe=!0);else return i.lanes=e.lanes,Qi(e,i,h)}return df(e,i,r,o,h)}function pp(e,i,r,o){var h=o.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|r:r,e!==null){for(o=i.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~d}else o=0,i.child=null;return _p(e,i,d,r,o)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&yu(i,d!==null?d.cachePool:null),d!==null?vm(i,d):qh(),bm(i);else return o=i.lanes=536870912,_p(e,i,d!==null?d.baseLanes|r:r,r,o)}else d!==null?(yu(i,d.cachePool),vm(i,d),Ss(),i.memoizedState=null):(e!==null&&yu(i,null),qh(),Ss());return Qe(e,i,h,r),i.child}function jl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function _p(e,i,r,o,h){var d=zh();return d=d===null?null:{parent:we._currentValue,pool:d},i.memoizedState={baseLanes:r,cachePool:d},e!==null&&yu(i,null),qh(),bm(i),e!==null&&da(e,i,o,!0),i.childLanes=h,null}function Iu(e,i){return i=zu({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function yp(e,i,r){return Vr(i,e.child,null,r),e=Iu(i,i.pendingProps),e.flags|=2,Sn(i),i.memoizedState=null,e}function Jb(e,i,r){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Bt){if(o.mode==="hidden")return e=Iu(i,o),i.lanes=536870912,jl(null,e);if(Gh(i),(e=se)?(e=V_(e,kn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ps!==null?{id:Ai,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},r=em(e),r.return=i,i.child=r,Ge=i,se=null)):e=null,e===null)throw ys(i);return i.lanes=536870912,null}return Iu(i,o)}var d=e.memoizedState;if(d!==null){var y=d.dehydrated;if(Gh(i),h)if(i.flags&256)i.flags&=-257,i=yp(e,i,r);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(s(558));else if(xe||da(e,i,r,!1),h=(r&e.childLanes)!==0,xe||h){if(o=ie,o!==null&&(y=ll(o,r),y!==0&&y!==d.retryLane))throw d.retryLane=y,Tr(e,y),pn(o,e,y),ff;Fu(),i=yp(e,i,r)}else e=d.treeContext,se=jn(y.nextSibling),Ge=i,Bt=!0,_s=null,kn=!1,e!==null&&sm(i,e),i=Iu(i,o),i.flags|=4096;return i}return e=ji(e.child,{mode:o.mode,children:o.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Lu(e,i){var r=i.ref;if(r===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(e===null||e.ref!==r)&&(i.flags|=4194816)}}function df(e,i,r,o,h){return Rr(i),r=Qh(e,i,r,o,void 0,h),o=Yh(),e!==null&&!xe?(Xh(e,i,h),Qi(e,i,h)):(Bt&&o&&xh(i),i.flags|=1,Qe(e,i,r,h),i.child)}function vp(e,i,r,o,h,d){return Rr(i),i.updateQueue=null,r=Tm(i,o,r,h),Em(e),o=Yh(),e!==null&&!xe?(Xh(e,i,d),Qi(e,i,d)):(Bt&&o&&xh(i),i.flags|=1,Qe(e,i,r,d),i.child)}function bp(e,i,r,o,h){if(Rr(i),i.stateNode===null){var d=ua,y=r.contextType;typeof y=="object"&&y!==null&&(d=Fe(y)),d=new r(o,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=cf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=o,d.state=i.memoizedState,d.refs={},kh(i),y=r.contextType,d.context=typeof y=="object"&&y!==null?Fe(y):ua,d.state=i.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(uf(i,r,y,o),d.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&cf.enqueueReplaceState(d,d.state,null),Ll(i,o,d,h),Il(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){d=i.stateNode;var A=i.memoizedProps,O=Mr(r,A);d.props=O;var P=d.context,Z=r.contextType;y=ua,typeof Z=="object"&&Z!==null&&(y=Fe(Z));var tt=r.getDerivedStateFromProps;Z=typeof tt=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||P!==y)&&ap(i,d,o,y),bs=!1;var G=i.memoizedState;d.state=G,Ll(i,o,d,h),Il(),P=i.memoizedState,A||G!==P||bs?(typeof tt=="function"&&(uf(i,r,tt,o),P=i.memoizedState),(O=bs||rp(i,r,O,o,G,P,y))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=P),d.props=o,d.state=P,d.context=y,o=O):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{d=i.stateNode,Bh(e,i),y=i.memoizedProps,Z=Mr(r,y),d.props=Z,tt=i.pendingProps,G=d.context,P=r.contextType,O=ua,typeof P=="object"&&P!==null&&(O=Fe(P)),A=r.getDerivedStateFromProps,(P=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==tt||G!==O)&&ap(i,d,o,O),bs=!1,G=i.memoizedState,d.state=G,Ll(i,o,d,h),Il();var Y=i.memoizedState;y!==tt||G!==Y||bs||e!==null&&e.dependencies!==null&&pu(e.dependencies)?(typeof A=="function"&&(uf(i,r,A,o),Y=i.memoizedState),(Z=bs||rp(i,r,Z,o,G,Y,O)||e!==null&&e.dependencies!==null&&pu(e.dependencies))?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,Y,O),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,Y,O)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=Y),d.props=o,d.state=Y,d.context=O,o=Z):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),o=!1)}return d=o,Lu(e,i),o=(i.flags&128)!==0,d||o?(d=i.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&o?(i.child=Vr(i,e.child,null,h),i.child=Vr(i,null,r,h)):Qe(e,i,r,h),i.memoizedState=d.state,e=i.child):e=Qi(e,i,h),e}function Ep(e,i,r,o){return Sr(),i.flags|=256,Qe(e,i,r,o),i.child}var gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(e){return{baseLanes:e,cachePool:cm()}}function pf(e,i,r){return e=e!==null?e.childLanes&~r:0,i&&(e|=Rn),e}function Tp(e,i,r){var o=i.pendingProps,h=!1,d=(i.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(_e.current&2)!==0),y&&(h=!0,i.flags&=-129),y=(i.flags&32)!==0,i.flags&=-33,e===null){if(Bt){if(h?As(i):Ss(),(e=se)?(e=V_(e,kn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:ps!==null?{id:Ai,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},r=em(e),r.return=i,i.child=r,Ge=i,se=null)):e=null,e===null)throw ys(i);return Jf(e)?i.lanes=32:i.lanes=536870912,null}var A=o.children;return o=o.fallback,h?(Ss(),h=i.mode,A=zu({mode:"hidden",children:A},h),o=Ar(o,h,r,null),A.return=i,o.return=i,A.sibling=o,i.child=A,o=i.child,o.memoizedState=mf(r),o.childLanes=pf(e,y,r),i.memoizedState=gf,jl(null,o)):(As(i),_f(i,A))}var O=e.memoizedState;if(O!==null&&(A=O.dehydrated,A!==null)){if(d)i.flags&256?(As(i),i.flags&=-257,i=yf(e,i,r)):i.memoizedState!==null?(Ss(),i.child=e.child,i.flags|=128,i=null):(Ss(),A=o.fallback,h=i.mode,o=zu({mode:"visible",children:o.children},h),A=Ar(A,h,r,null),A.flags|=2,o.return=i,A.return=i,o.sibling=A,i.child=o,Vr(i,e.child,null,r),o=i.child,o.memoizedState=mf(r),o.childLanes=pf(e,y,r),i.memoizedState=gf,i=jl(null,o));else if(As(i),Jf(A)){if(y=A.nextSibling&&A.nextSibling.dataset,y)var P=y.dgst;y=P,o=Error(s(419)),o.stack="",o.digest=y,Cl({value:o,source:null,stack:null}),i=yf(e,i,r)}else if(xe||da(e,i,r,!1),y=(r&e.childLanes)!==0,xe||y){if(y=ie,y!==null&&(o=ll(y,r),o!==0&&o!==O.retryLane))throw O.retryLane=o,Tr(e,o),pn(y,e,o),ff;Zf(A)||Fu(),i=yf(e,i,r)}else Zf(A)?(i.flags|=192,i.child=e.child,i=null):(e=O.treeContext,se=jn(A.nextSibling),Ge=i,Bt=!0,_s=null,kn=!1,e!==null&&sm(i,e),i=_f(i,o.children),i.flags|=4096);return i}return h?(Ss(),A=o.fallback,h=i.mode,O=e.child,P=O.sibling,o=ji(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,P!==null?A=ji(P,A):(A=Ar(A,h,r,null),A.flags|=2),A.return=i,o.return=i,o.sibling=A,i.child=o,jl(null,o),o=i.child,A=e.child.memoizedState,A===null?A=mf(r):(h=A.cachePool,h!==null?(O=we._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=cm(),A={baseLanes:A.baseLanes|r,cachePool:h}),o.memoizedState=A,o.childLanes=pf(e,y,r),i.memoizedState=gf,jl(e.child,o)):(As(i),r=e.child,e=r.sibling,r=ji(r,{mode:"visible",children:o.children}),r.return=i,r.sibling=null,e!==null&&(y=i.deletions,y===null?(i.deletions=[e],i.flags|=16):y.push(e)),i.child=r,i.memoizedState=null,r)}function _f(e,i){return i=zu({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function zu(e,i){return e=Tn(22,e,null,i),e.lanes=0,e}function yf(e,i,r){return Vr(i,e.child,null,r),e=_f(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ap(e,i,r){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),Mh(e.return,i,r)}function vf(e,i,r,o,h,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:h,treeForkCount:d}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=r,y.tailMode=h,y.treeForkCount=d)}function Sp(e,i,r){var o=i.pendingProps,h=o.revealOrder,d=o.tail;o=o.children;var y=_e.current,A=(y&2)!==0;if(A?(y=y&1|2,i.flags|=128):y&=1,ut(_e,y),Qe(e,i,o,r),o=Bt?xl:0,!A&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ap(e,r,i);else if(e.tag===19)Ap(e,r,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(r=i.child,h=null;r!==null;)e=r.alternate,e!==null&&Su(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=i.child,i.child=null):(h=r.sibling,r.sibling=null),vf(i,!1,h,r,d,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&Su(e)===null){i.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}vf(i,!0,r,null,d,o);break;case"together":vf(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function Qi(e,i,r){if(e!==null&&(i.dependencies=e.dependencies),xs|=i.lanes,(r&i.childLanes)===0)if(e!==null){if(da(e,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,r=ji(e,e.pendingProps),i.child=r,r.return=i;e.sibling!==null;)e=e.sibling,r=r.sibling=ji(e,e.pendingProps),r.return=i;r.sibling=null}return i.child}function bf(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&pu(e)))}function Wb(e,i,r){switch(i.tag){case 3:Me(i,i.stateNode.containerInfo),vs(i,we,e.memoizedState.cache),Sr();break;case 27:case 5:sr(i);break;case 4:Me(i,i.stateNode.containerInfo);break;case 10:vs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gh(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(As(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Tp(e,i,r):(As(i),e=Qi(e,i,r),e!==null?e.sibling:null);As(i);break;case 19:var h=(e.flags&128)!==0;if(o=(r&i.childLanes)!==0,o||(da(e,i,r,!1),o=(r&i.childLanes)!==0),h){if(o)return Sp(e,i,r);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ut(_e,_e.current),o)break;return null;case 22:return i.lanes=0,pp(e,i,r,i.pendingProps);case 24:vs(i,we,e.memoizedState.cache)}return Qi(e,i,r)}function wp(e,i,r){if(e!==null)if(e.memoizedProps!==i.pendingProps)xe=!0;else{if(!bf(e,r)&&(i.flags&128)===0)return xe=!1,Wb(e,i,r);xe=(e.flags&131072)!==0}else xe=!1,Bt&&(i.flags&1048576)!==0&&im(i,xl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var o=i.pendingProps;if(e=Cr(i.elementType),i.type=e,typeof e=="function")Sh(e)?(o=Mr(e,o),i.tag=1,i=bp(null,i,e,o,r)):(i.tag=0,i=df(null,i,e,o,r));else{if(e!=null){var h=e.$$typeof;if(h===at){i.tag=11,i=dp(null,i,e,o,r);break t}else if(h===w){i.tag=14,i=gp(null,i,e,o,r);break t}}throw i=Rt(e)||e,Error(s(306,i,""))}}return i;case 0:return df(e,i,i.type,i.pendingProps,r);case 1:return o=i.type,h=Mr(o,i.pendingProps),bp(e,i,o,h,r);case 3:t:{if(Me(i,i.stateNode.containerInfo),e===null)throw Error(s(387));o=i.pendingProps;var d=i.memoizedState;h=d.element,Bh(e,i),Ll(i,o,null,r);var y=i.memoizedState;if(o=y.cache,vs(i,we,o),o!==d.cache&&Oh(i,[we],r,!0),Il(),o=y.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:y.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Ep(e,i,o,r);break t}else if(o!==h){h=Ln(Error(s(424)),i),Cl(h),i=Ep(e,i,o,r);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(se=jn(e.firstChild),Ge=i,Bt=!0,_s=null,kn=!0,r=pm(i,null,o,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Sr(),o===h){i=Qi(e,i,r);break t}Qe(e,i,o,r)}i=i.child}return i;case 26:return Lu(e,i),e===null?(r=z_(i.type,null,i.pendingProps,null))?i.memoizedState=r:Bt||(r=i.type,e=i.pendingProps,o=Ju(Nt.current).createElement(r),o[Te]=i,o[Ue]=e,Ye(o,r,e),Ae(o),i.stateNode=o):i.memoizedState=z_(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return sr(i),e===null&&Bt&&(o=i.stateNode=O_(i.type,i.pendingProps,Nt.current),Ge=i,kn=!0,h=se,Ms(i.type)?(Wf=h,se=jn(o.firstChild)):se=h),Qe(e,i,i.pendingProps.children,r),Lu(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Bt&&((h=o=se)&&(o=DE(o,i.type,i.pendingProps,kn),o!==null?(i.stateNode=o,Ge=i,se=jn(o.firstChild),kn=!1,h=!0):h=!1),h||ys(i)),sr(i),h=i.type,d=i.pendingProps,y=e!==null?e.memoizedProps:null,o=d.children,Xf(h,d)?o=null:y!==null&&Xf(h,y)&&(i.flags|=32),i.memoizedState!==null&&(h=Qh(e,i,Gb,null,null,r),eo._currentValue=h),Lu(e,i),Qe(e,i,o,r),i.child;case 6:return e===null&&Bt&&((e=r=se)&&(r=VE(r,i.pendingProps,kn),r!==null?(i.stateNode=r,Ge=i,se=null,e=!0):e=!1),e||ys(i)),null;case 13:return Tp(e,i,r);case 4:return Me(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=Vr(i,null,o,r):Qe(e,i,o,r),i.child;case 11:return dp(e,i,i.type,i.pendingProps,r);case 7:return Qe(e,i,i.pendingProps,r),i.child;case 8:return Qe(e,i,i.pendingProps.children,r),i.child;case 12:return Qe(e,i,i.pendingProps.children,r),i.child;case 10:return o=i.pendingProps,vs(i,i.type,o.value),Qe(e,i,o.children,r),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Rr(i),h=Fe(h),o=o(h),i.flags|=1,Qe(e,i,o,r),i.child;case 14:return gp(e,i,i.type,i.pendingProps,r);case 15:return mp(e,i,i.type,i.pendingProps,r);case 19:return Sp(e,i,r);case 31:return Jb(e,i,r);case 22:return pp(e,i,r,i.pendingProps);case 24:return Rr(i),o=Fe(we),e===null?(h=zh(),h===null&&(h=ie,d=Ih(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=r),h=d),i.memoizedState={parent:o,cache:h},kh(i),vs(i,we,h)):((e.lanes&r)!==0&&(Bh(e,i),Ll(i,null,null,r),Il()),h=e.memoizedState,d=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),vs(i,we,o)):(o=d.cache,vs(i,we,o),o!==h.cache&&Oh(i,[we],r,!0))),Qe(e,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Yi(e){e.flags|=4}function Ef(e,i,r,o,h){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(Jp())e.flags|=8192;else throw Dr=bu,Uh}else e.flags&=-16777217}function Rp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!H_(i))if(Jp())e.flags|=8192;else throw Dr=bu,Uh}function Uu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Po():536870912,e.lanes|=i,wa|=i)}function Hl(e,i){if(!Bt)switch(e.tailMode){case"hidden":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var i=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(i)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=r,i}function tE(e,i,r){var o=i.pendingProps;switch(Ch(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(i),null;case 1:return re(i),null;case 3:return r=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Pi(we),oe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fa(i)?Yi(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vh())),re(i),null;case 26:var h=i.type,d=i.memoizedState;return e===null?(Yi(i),d!==null?(re(i),Rp(i,d)):(re(i),Ef(i,h,null,o,r))):d?d!==e.memoizedState?(Yi(i),re(i),Rp(i,d)):(re(i),i.flags&=-16777217):(e=e.memoizedProps,e!==o&&Yi(i),re(i),Ef(i,h,e,o,r)),null;case 27:if(Gr(i),r=Nt.current,h=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Yi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}e=ht.current,fa(i)?rm(i):(e=O_(h,o,r),i.stateNode=e,Yi(i))}return re(i),null;case 5:if(Gr(i),h=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&Yi(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return re(i),null}if(d=ht.current,fa(i))rm(i);else{var y=Ju(Nt.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?d.multiple=!0:o.size&&(d.size=o.size);break;default:d=typeof o.is=="string"?y.createElement(h,{is:o.is}):y.createElement(h)}}d[Te]=i,d[Ue]=o;t:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break t;for(;y.sibling===null;){if(y.return===null||y.return===i)break t;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=d;t:switch(Ye(d,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Yi(i)}}return re(i),Ef(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,r),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&Yi(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=Nt.current,fa(i)){if(e=i.stateNode,r=i.memoizedProps,o=null,h=Ge,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Te]=i,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||T_(e.nodeValue,r)),e||ys(i,!0)}else e=Ju(e).createTextNode(o),e[Te]=i,i.stateNode=e}return re(i),null;case 31:if(r=i.memoizedState,e===null||e.memoizedState!==null){if(o=fa(i),r!==null){if(e===null){if(!o)throw Error(s(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Te]=i}else Sr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),e=!1}else r=Vh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return i.flags&256?(Sn(i),i):(Sn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return re(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=fa(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Te]=i}else Sr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;re(i),h=!1}else h=Vh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Sn(i),i):(Sn(i),null)}return Sn(i),(i.flags&128)!==0?(i.lanes=r,i):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)),r!==e&&r&&(i.child.flags|=8192),Uu(i,i.updateQueue),re(i),null);case 4:return oe(),e===null&&Pf(i.stateNode.containerInfo),re(i),null;case 10:return Pi(i.type),re(i),null;case 19:if($(_e),o=i.memoizedState,o===null)return re(i),null;if(h=(i.flags&128)!==0,d=o.rendering,d===null)if(h)Hl(o,!1);else{if(de!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=Su(e),d!==null){for(i.flags|=128,Hl(o,!1),e=d.updateQueue,i.updateQueue=e,Uu(i,e),i.subtreeFlags=0,e=r,r=i.child;r!==null;)tm(r,e),r=r.sibling;return ut(_e,_e.current&1|2),Bt&&Hi(i,o.treeForkCount),i.child}e=e.sibling}o.tail!==null&&sn()>qu&&(i.flags|=128,h=!0,Hl(o,!1),i.lanes=4194304)}else{if(!h)if(e=Su(d),e!==null){if(i.flags|=128,h=!0,e=e.updateQueue,i.updateQueue=e,Uu(i,e),Hl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!Bt)return re(i),null}else 2*sn()-o.renderingStartTime>qu&&r!==536870912&&(i.flags|=128,h=!0,Hl(o,!1),i.lanes=4194304);o.isBackwards?(d.sibling=i.child,i.child=d):(e=o.last,e!==null?e.sibling=d:i.child=d,o.last=d)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=sn(),e.sibling=null,r=_e.current,ut(_e,h?r&1|2:r&1),Bt&&Hi(i,o.treeForkCount),e):(re(i),null);case 22:case 23:return Sn(i),Ph(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(r&536870912)!==0&&(i.flags&128)===0&&(re(i),i.subtreeFlags&6&&(i.flags|=8192)):re(i),r=i.updateQueue,r!==null&&Uu(i,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==r&&(i.flags|=2048),e!==null&&$(xr),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Pi(we),re(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function eE(e,i){switch(Ch(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Pi(we),oe(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Gr(i),null;case 31:if(i.memoizedState!==null){if(Sn(i),i.alternate===null)throw Error(s(340));Sr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Sn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Sr()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return $(_e),null;case 4:return oe(),null;case 10:return Pi(i.type),null;case 22:case 23:return Sn(i),Ph(),e!==null&&$(xr),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Pi(we),null;case 25:return null;default:return null}}function xp(e,i){switch(Ch(i),i.tag){case 3:Pi(we),oe();break;case 26:case 27:case 5:Gr(i);break;case 4:oe();break;case 31:i.memoizedState!==null&&Sn(i);break;case 13:Sn(i);break;case 19:$(_e);break;case 10:Pi(i.type);break;case 22:case 23:Sn(i),Ph(),e!==null&&$(xr);break;case 24:Pi(we)}}function ql(e,i){try{var r=i.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var h=o.next;r=h;do{if((r.tag&e)===e){o=void 0;var d=r.create,y=r.inst;o=d(),y.destroy=o}r=r.next}while(r!==h)}}catch(A){Jt(i,i.return,A)}}function ws(e,i,r){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&e)===e){var y=o.inst,A=y.destroy;if(A!==void 0){y.destroy=void 0,h=i;var O=r,P=A;try{P()}catch(Z){Jt(h,O,Z)}}}o=o.next}while(o!==d)}}catch(Z){Jt(i,i.return,Z)}}function Cp(e){var i=e.updateQueue;if(i!==null){var r=e.stateNode;try{ym(i,r)}catch(o){Jt(e,e.return,o)}}}function Dp(e,i,r){r.props=Mr(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){Jt(e,i,o)}}function Pl(e,i){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(h){Jt(e,i,h)}}function wi(e,i){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(h){Jt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){Jt(e,i,h)}else r.current=null}function Vp(e){var i=e.type,r=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break t;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(h){Jt(e,e.return,h)}}function Tf(e,i,r){try{var o=e.stateNode;AE(o,e.type,r,i),o[Ue]=i}catch(h){Jt(e,e.return,h)}}function Np(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ms(e.type)||e.tag===4}function Af(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ms(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sf(e,i,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(e),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=$n));else if(o!==4&&(o===27&&Ms(e.type)&&(r=e.stateNode,i=null),e=e.child,e!==null))for(Sf(e,i,r),e=e.sibling;e!==null;)Sf(e,i,r),e=e.sibling}function ku(e,i,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?r.insertBefore(e,i):r.appendChild(e);else if(o!==4&&(o===27&&Ms(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(ku(e,i,r),e=e.sibling;e!==null;)ku(e,i,r),e=e.sibling}function Mp(e){var i=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ye(i,o,r),i[Te]=e,i[Ue]=r}catch(d){Jt(e,e.return,d)}}var Xi=!1,Ce=!1,wf=!1,Op=typeof WeakSet=="function"?WeakSet:Set,Be=null;function nE(e,i){if(e=e.containerInfo,Qf=rc,e=Fg(e),_h(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else t:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break t}var y=0,A=-1,O=-1,P=0,Z=0,tt=e,G=null;e:for(;;){for(var Y;tt!==r||h!==0&&tt.nodeType!==3||(A=y+h),tt!==d||o!==0&&tt.nodeType!==3||(O=y+o),tt.nodeType===3&&(y+=tt.nodeValue.length),(Y=tt.firstChild)!==null;)G=tt,tt=Y;for(;;){if(tt===e)break e;if(G===r&&++P===h&&(A=y),G===d&&++Z===o&&(O=y),(Y=tt.nextSibling)!==null)break;tt=G,G=tt.parentNode}tt=Y}r=A===-1||O===-1?null:{start:A,end:O}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yf={focusedElem:e,selectionRange:r},rc=!1,Be=i;Be!==null;)if(i=Be,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Be=e;else for(;Be!==null;){switch(i=Be,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)h=e[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,r=i,h=d.memoizedProps,d=d.memoizedState,o=r.stateNode;try{var gt=Mr(r.type,h);e=o.getSnapshotBeforeUpdate(gt,d),o.__reactInternalSnapshotBeforeUpdate=e}catch(vt){Jt(r,r.return,vt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,r=e.nodeType,r===9)$f(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$f(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Be=e;break}Be=i.return}}function Ip(e,i,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:$i(e,r),o&4&&ql(5,r);break;case 1:if($i(e,r),o&4)if(e=r.stateNode,i===null)try{e.componentDidMount()}catch(y){Jt(r,r.return,y)}else{var h=Mr(r.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Jt(r,r.return,y)}}o&64&&Cp(r),o&512&&Pl(r,r.return);break;case 3:if($i(e,r),o&64&&(e=r.updateQueue,e!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{ym(e,i)}catch(y){Jt(r,r.return,y)}}break;case 27:i===null&&o&4&&Mp(r);case 26:case 5:$i(e,r),i===null&&o&4&&Vp(r),o&512&&Pl(r,r.return);break;case 12:$i(e,r);break;case 31:$i(e,r),o&4&&Up(e,r);break;case 13:$i(e,r),o&4&&kp(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=hE.bind(null,r),NE(e,r))));break;case 22:if(o=r.memoizedState!==null||Xi,!o){i=i!==null&&i.memoizedState!==null||Ce,h=Xi;var d=Ce;Xi=o,(Ce=i)&&!d?Zi(e,r,(r.subtreeFlags&8772)!==0):$i(e,r),Xi=h,Ce=d}break;case 30:break;default:$i(e,r)}}function Lp(e){var i=e.alternate;i!==null&&(e.alternate=null,Lp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Kr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ce=null,fn=!1;function Ki(e,i,r){for(r=r.child;r!==null;)zp(e,i,r),r=r.sibling}function zp(e,i,r){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Qn,r)}catch{}switch(r.tag){case 26:Ce||wi(r,i),Ki(e,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ce||wi(r,i);var o=ce,h=fn;Ms(r.type)&&(ce=r.stateNode,fn=!1),Ki(e,i,r),Jl(r.stateNode),ce=o,fn=h;break;case 5:Ce||wi(r,i);case 6:if(o=ce,h=fn,ce=null,Ki(e,i,r),ce=o,fn=h,ce!==null)if(fn)try{(ce.nodeType===9?ce.body:ce.nodeName==="HTML"?ce.ownerDocument.body:ce).removeChild(r.stateNode)}catch(d){Jt(r,i,d)}else try{ce.removeChild(r.stateNode)}catch(d){Jt(r,i,d)}break;case 18:ce!==null&&(fn?(e=ce,C_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Oa(e)):C_(ce,r.stateNode));break;case 4:o=ce,h=fn,ce=r.stateNode.containerInfo,fn=!0,Ki(e,i,r),ce=o,fn=h;break;case 0:case 11:case 14:case 15:ws(2,r,i),Ce||ws(4,r,i),Ki(e,i,r);break;case 1:Ce||(wi(r,i),o=r.stateNode,typeof o.componentWillUnmount=="function"&&Dp(r,i,o)),Ki(e,i,r);break;case 21:Ki(e,i,r);break;case 22:Ce=(o=Ce)||r.memoizedState!==null,Ki(e,i,r),Ce=o;break;default:Ki(e,i,r)}}function Up(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Oa(e)}catch(r){Jt(i,i.return,r)}}}function kp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Oa(e)}catch(r){Jt(i,i.return,r)}}function iE(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Op),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Op),i;default:throw Error(s(435,e.tag))}}function Bu(e,i){var r=iE(e);i.forEach(function(o){if(!r.has(o)){r.add(o);var h=fE.bind(null,e,o);o.then(h,h)}})}function dn(e,i){var r=i.deletions;if(r!==null)for(var o=0;o<r.length;o++){var h=r[o],d=e,y=i,A=y;t:for(;A!==null;){switch(A.tag){case 27:if(Ms(A.type)){ce=A.stateNode,fn=!1;break t}break;case 5:ce=A.stateNode,fn=!1;break t;case 3:case 4:ce=A.stateNode.containerInfo,fn=!0;break t}A=A.return}if(ce===null)throw Error(s(160));zp(d,y,h),ce=null,fn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Bp(i,e),i=i.sibling}var ni=null;function Bp(e,i){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(i,e),gn(e),o&4&&(ws(3,e,e.return),ql(3,e),ws(5,e,e.return));break;case 1:dn(i,e),gn(e),o&512&&(Ce||r===null||wi(r,r.return)),o&64&&Xi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var h=ni;if(dn(i,e),gn(e),o&512&&(Ce||r===null||wi(r,r.return)),o&4){var d=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){t:{o=e.type,r=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[hi]||d[Te]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),Ye(d,o,r),d[Te]=e,Ae(d),o=d;break t;case"link":var y=B_("link","href",h).get(o+(r.href||""));if(y){for(var A=0;A<y.length;A++)if(d=y[A],d.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&d.getAttribute("rel")===(r.rel==null?null:r.rel)&&d.getAttribute("title")===(r.title==null?null:r.title)&&d.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(A,1);break e}}d=h.createElement(o),Ye(d,o,r),h.head.appendChild(d);break;case"meta":if(y=B_("meta","content",h).get(o+(r.content||""))){for(A=0;A<y.length;A++)if(d=y[A],d.getAttribute("content")===(r.content==null?null:""+r.content)&&d.getAttribute("name")===(r.name==null?null:r.name)&&d.getAttribute("property")===(r.property==null?null:r.property)&&d.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&d.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(A,1);break e}}d=h.createElement(o),Ye(d,o,r),h.head.appendChild(d);break;default:throw Error(s(468,o))}d[Te]=e,Ae(d),o=d}e.stateNode=o}else j_(h,e.type,e.stateNode);else e.stateNode=k_(h,o,e.memoizedProps);else d!==o?(d===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):d.count--,o===null?j_(h,e.type,e.stateNode):k_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Tf(e,e.memoizedProps,r.memoizedProps)}break;case 27:dn(i,e),gn(e),o&512&&(Ce||r===null||wi(r,r.return)),r!==null&&o&4&&Tf(e,e.memoizedProps,r.memoizedProps);break;case 5:if(dn(i,e),gn(e),o&512&&(Ce||r===null||wi(r,r.return)),e.flags&32){h=e.stateNode;try{hn(h,"")}catch(gt){Jt(e,e.return,gt)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Tf(e,h,r!==null?r.memoizedProps:h)),o&1024&&(wf=!0);break;case 6:if(dn(i,e),gn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(gt){Jt(e,e.return,gt)}}break;case 3:if(ec=null,h=ni,ni=Wu(i.containerInfo),dn(i,e),ni=h,gn(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Oa(i.containerInfo)}catch(gt){Jt(e,e.return,gt)}wf&&(wf=!1,jp(e));break;case 4:o=ni,ni=Wu(e.stateNode.containerInfo),dn(i,e),gn(e),ni=o;break;case 12:dn(i,e),gn(e);break;case 31:dn(i,e),gn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Bu(e,o)));break;case 13:dn(i,e),gn(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Hu=sn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Bu(e,o)));break;case 22:h=e.memoizedState!==null;var O=r!==null&&r.memoizedState!==null,P=Xi,Z=Ce;if(Xi=P||h,Ce=Z||O,dn(i,e),Ce=Z,Xi=P,gn(e),o&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(r===null||O||Xi||Ce||Or(e)),r=null,i=e;;){if(i.tag===5||i.tag===26){if(r===null){O=r=i;try{if(d=O.stateNode,h)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{A=O.stateNode;var tt=O.memoizedProps.style,G=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(gt){Jt(O,O.return,gt)}}}else if(i.tag===6){if(r===null){O=i;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(gt){Jt(O,O.return,gt)}}}else if(i.tag===18){if(r===null){O=i;try{var Y=O.stateNode;h?D_(Y,!0):D_(O.stateNode,!1)}catch(gt){Jt(O,O.return,gt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Bu(e,r))));break;case 19:dn(i,e),gn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Bu(e,o)));break;case 30:break;case 21:break;default:dn(i,e),gn(e)}}function gn(e){var i=e.flags;if(i&2){try{for(var r,o=e.return;o!==null;){if(Np(o)){r=o;break}o=o.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var h=r.stateNode,d=Af(e);ku(e,d,h);break;case 5:var y=r.stateNode;r.flags&32&&(hn(y,""),r.flags&=-33);var A=Af(e);ku(e,A,y);break;case 3:case 4:var O=r.stateNode.containerInfo,P=Af(e);Sf(e,P,O);break;default:throw Error(s(161))}}catch(Z){Jt(e,e.return,Z)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function jp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;jp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function $i(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ip(e,i.alternate,i),i=i.sibling}function Or(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:ws(4,i,i.return),Or(i);break;case 1:wi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Dp(i,i.return,r),Or(i);break;case 27:Jl(i.stateNode);case 26:case 5:wi(i,i.return),Or(i);break;case 22:i.memoizedState===null&&Or(i);break;case 30:Or(i);break;default:Or(i)}e=e.sibling}}function Zi(e,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,d=i,y=d.flags;switch(d.tag){case 0:case 11:case 15:Zi(h,d,r),ql(4,d);break;case 1:if(Zi(h,d,r),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){Jt(o,o.return,P)}if(o=d,h=o.updateQueue,h!==null){var A=o.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)_m(O[h],A)}catch(P){Jt(o,o.return,P)}}r&&y&64&&Cp(d),Pl(d,d.return);break;case 27:Mp(d);case 26:case 5:Zi(h,d,r),r&&o===null&&y&4&&Vp(d),Pl(d,d.return);break;case 12:Zi(h,d,r);break;case 31:Zi(h,d,r),r&&y&4&&Up(h,d);break;case 13:Zi(h,d,r),r&&y&4&&kp(h,d);break;case 22:d.memoizedState===null&&Zi(h,d,r),Pl(d,d.return);break;case 30:break;default:Zi(h,d,r)}i=i.sibling}}function Rf(e,i){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Dl(r))}function xf(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Dl(e))}function ii(e,i,r,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Hp(e,i,r,o),i=i.sibling}function Hp(e,i,r,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ii(e,i,r,o),h&2048&&ql(9,i);break;case 1:ii(e,i,r,o);break;case 3:ii(e,i,r,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Dl(e)));break;case 12:if(h&2048){ii(e,i,r,o),e=i.stateNode;try{var d=i.memoizedProps,y=d.id,A=d.onPostCommit;typeof A=="function"&&A(y,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Jt(i,i.return,O)}}else ii(e,i,r,o);break;case 31:ii(e,i,r,o);break;case 13:ii(e,i,r,o);break;case 23:break;case 22:d=i.stateNode,y=i.alternate,i.memoizedState!==null?d._visibility&2?ii(e,i,r,o):Gl(e,i):d._visibility&2?ii(e,i,r,o):(d._visibility|=2,Ta(e,i,r,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Rf(y,i);break;case 24:ii(e,i,r,o),h&2048&&xf(i.alternate,i);break;default:ii(e,i,r,o)}}function Ta(e,i,r,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,y=i,A=r,O=o,P=y.flags;switch(y.tag){case 0:case 11:case 15:Ta(d,y,A,O,h),ql(8,y);break;case 23:break;case 22:var Z=y.stateNode;y.memoizedState!==null?Z._visibility&2?Ta(d,y,A,O,h):Gl(d,y):(Z._visibility|=2,Ta(d,y,A,O,h)),h&&P&2048&&Rf(y.alternate,y);break;case 24:Ta(d,y,A,O,h),h&&P&2048&&xf(y.alternate,y);break;default:Ta(d,y,A,O,h)}i=i.sibling}}function Gl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=e,o=i,h=o.flags;switch(o.tag){case 22:Gl(r,o),h&2048&&Rf(o.alternate,o);break;case 24:Gl(r,o),h&2048&&xf(o.alternate,o);break;default:Gl(r,o)}i=i.sibling}}var Fl=8192;function Aa(e,i,r){if(e.subtreeFlags&Fl)for(e=e.child;e!==null;)qp(e,i,r),e=e.sibling}function qp(e,i,r){switch(e.tag){case 26:Aa(e,i,r),e.flags&Fl&&e.memoizedState!==null&&PE(r,ni,e.memoizedState,e.memoizedProps);break;case 5:Aa(e,i,r);break;case 3:case 4:var o=ni;ni=Wu(e.stateNode.containerInfo),Aa(e,i,r),ni=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Fl,Fl=16777216,Aa(e,i,r),Fl=o):Aa(e,i,r));break;default:Aa(e,i,r)}}function Pp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ql(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var o=i[r];Be=o,Fp(o,e)}Pp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Gp(e),e=e.sibling}function Gp(e){switch(e.tag){case 0:case 11:case 15:Ql(e),e.flags&2048&&ws(9,e,e.return);break;case 3:Ql(e);break;case 12:Ql(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,ju(e)):Ql(e);break;default:Ql(e)}}function ju(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var o=i[r];Be=o,Fp(o,e)}Pp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:ws(8,i,i.return),ju(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,ju(i));break;default:ju(i)}e=e.sibling}}function Fp(e,i){for(;Be!==null;){var r=Be;switch(r.tag){case 0:case 11:case 15:ws(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Dl(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Be=o;else t:for(r=e;Be!==null;){o=Be;var h=o.sibling,d=o.return;if(Lp(o),o===r){Be=null;break t}if(h!==null){h.return=d,Be=h;break t}Be=d}}}var sE={getCacheForType:function(e){var i=Fe(we),r=i.data.get(e);return r===void 0&&(r=e(),i.data.set(e,r)),r},cacheSignal:function(){return Fe(we).controller.signal}},rE=typeof WeakMap=="function"?WeakMap:Map,Yt=0,ie=null,Ot=null,Lt=0,Zt=0,wn=null,Rs=!1,Sa=!1,Cf=!1,Ji=0,de=0,xs=0,Ir=0,Df=0,Rn=0,wa=0,Yl=null,mn=null,Vf=!1,Hu=0,Qp=0,qu=1/0,Pu=null,Cs=null,Ie=0,Ds=null,Ra=null,Wi=0,Nf=0,Mf=null,Yp=null,Xl=0,Of=null;function xn(){return(Yt&2)!==0&&Lt!==0?Lt&-Lt:B.T!==null?Bf():Go()}function Xp(){if(Rn===0)if((Lt&536870912)===0||Bt){var e=lr;lr<<=1,(lr&3932160)===0&&(lr=262144),Rn=e}else Rn=536870912;return e=An.current,e!==null&&(e.flags|=32),Rn}function pn(e,i,r){(e===ie&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)&&(xa(e,0),Vs(e,Lt,Rn,!1)),or(e,r),((Yt&2)===0||e!==ie)&&(e===ie&&((Yt&2)===0&&(Ir|=r),de===4&&Vs(e,Lt,Rn,!1)),Ri(e))}function Kp(e,i,r){if((Yt&6)!==0)throw Error(s(327));var o=!r&&(i&127)===0&&(i&e.expiredLanes)===0||Yn(e,i),h=o?oE(e,i):Lf(e,i,!0),d=o;do{if(h===0){Sa&&!o&&Vs(e,i,0,!1);break}else{if(r=e.current.alternate,d&&!aE(r)){h=Lf(e,i,!1),d=!1;continue}if(h===2){if(d=i,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){i=y;t:{var A=e;h=Yl;var O=A.current.memoizedState.isDehydrated;if(O&&(xa(A,y).flags|=256),y=Lf(A,y,!1),y!==2){if(Cf&&!O){A.errorRecoveryDisabledLanes|=d,Ir|=d,h=4;break t}d=mn,mn=h,d!==null&&(mn===null?mn=d:mn.push.apply(mn,d))}h=y}if(d=!1,h!==2)continue}}if(h===1){xa(e,0),Vs(e,i,0,!0);break}t:{switch(o=e,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Vs(o,i,Rn,!Rs);break t;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Hu+300-sn(),10<h)){if(Vs(o,i,Rn,!Rs),oi(o,0,!0)!==0)break t;Wi=i,o.timeoutHandle=R_($p.bind(null,o,r,mn,Pu,Vf,i,Rn,Ir,wa,Rs,d,"Throttled",-0,0),h);break t}$p(o,r,mn,Pu,Vf,i,Rn,Ir,wa,Rs,d,null,-0,0)}}break}while(!0);Ri(e)}function $p(e,i,r,o,h,d,y,A,O,P,Z,tt,G,Y){if(e.timeoutHandle=-1,tt=i.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$n},qp(i,d,tt);var gt=(d&62914560)===d?Hu-sn():(d&4194048)===d?Qp-sn():0;if(gt=GE(tt,gt),gt!==null){Wi=d,e.cancelPendingCommit=gt(s_.bind(null,e,i,d,r,o,h,y,A,O,Z,tt,null,G,Y)),Vs(e,d,y,!P);return}}s_(e,i,d,r,o,h,y,A,O)}function aE(e){for(var i=e;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var h=r[o],d=h.getSnapshot;h=h.value;try{if(!En(d(),h))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vs(e,i,r,o){i&=~Df,i&=~Ir,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var d=31-me(h),y=1<<d;o[d]=-1,h&=~y}r!==0&&ur(e,r,i)}function Gu(){return(Yt&6)===0?(Kl(0),!1):!0}function If(){if(Ot!==null){if(Zt===0)var e=Ot.return;else e=Ot,qi=wr=null,Kh(e),_a=null,Nl=0,e=Ot;for(;e!==null;)xp(e.alternate,e),e=e.return;Ot=null}}function xa(e,i){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,RE(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),Wi=0,If(),ie=e,Ot=r=ji(e.current,null),Lt=i,Zt=0,wn=null,Rs=!1,Sa=Yn(e,i),Cf=!1,wa=Rn=Df=Ir=xs=de=0,mn=Yl=null,Vf=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-me(o),d=1<<h;i|=e[h],o&=~d}return Ji=i,hu(),r}function Zp(e,i){Dt=null,B.H=Bl,i===pa||i===vu?(i=dm(),Zt=3):i===Uh?(i=dm(),Zt=4):Zt=i===ff?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wn=i,Ot===null&&(de=1,Ou(e,Ln(i,e.current)))}function Jp(){var e=An.current;return e===null?!0:(Lt&4194048)===Lt?Bn===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?e===Bn:!1}function Wp(){var e=B.H;return B.H=Bl,e===null?Bl:e}function t_(){var e=B.A;return B.A=sE,e}function Fu(){de=4,Rs||(Lt&4194048)!==Lt&&An.current!==null||(Sa=!0),(xs&134217727)===0&&(Ir&134217727)===0||ie===null||Vs(ie,Lt,Rn,!1)}function Lf(e,i,r){var o=Yt;Yt|=2;var h=Wp(),d=t_();(ie!==e||Lt!==i)&&(Pu=null,xa(e,i)),i=!1;var y=de;t:do try{if(Zt!==0&&Ot!==null){var A=Ot,O=wn;switch(Zt){case 8:If(),y=6;break t;case 3:case 2:case 9:case 6:An.current===null&&(i=!0);var P=Zt;if(Zt=0,wn=null,Ca(e,A,O,P),r&&Sa){y=0;break t}break;default:P=Zt,Zt=0,wn=null,Ca(e,A,O,P)}}lE(),y=de;break}catch(Z){Zp(e,Z)}while(!0);return i&&e.shellSuspendCounter++,qi=wr=null,Yt=o,B.H=h,B.A=d,Ot===null&&(ie=null,Lt=0,hu()),y}function lE(){for(;Ot!==null;)e_(Ot)}function oE(e,i){var r=Yt;Yt|=2;var o=Wp(),h=t_();ie!==e||Lt!==i?(Pu=null,qu=sn()+500,xa(e,i)):Sa=Yn(e,i);t:do try{if(Zt!==0&&Ot!==null){i=Ot;var d=wn;e:switch(Zt){case 1:Zt=0,wn=null,Ca(e,i,d,1);break;case 2:case 9:if(hm(d)){Zt=0,wn=null,n_(i);break}i=function(){Zt!==2&&Zt!==9||ie!==e||(Zt=7),Ri(e)},d.then(i,i);break t;case 3:Zt=7;break t;case 4:Zt=5;break t;case 7:hm(d)?(Zt=0,wn=null,n_(i)):(Zt=0,wn=null,Ca(e,i,d,7));break;case 5:var y=null;switch(Ot.tag){case 26:y=Ot.memoizedState;case 5:case 27:var A=Ot;if(y?H_(y):A.stateNode.complete){Zt=0,wn=null;var O=A.sibling;if(O!==null)Ot=O;else{var P=A.return;P!==null?(Ot=P,Qu(P)):Ot=null}break e}}Zt=0,wn=null,Ca(e,i,d,5);break;case 6:Zt=0,wn=null,Ca(e,i,d,6);break;case 8:If(),de=6;break t;default:throw Error(s(462))}}uE();break}catch(Z){Zp(e,Z)}while(!0);return qi=wr=null,B.H=o,B.A=h,Yt=r,Ot!==null?0:(ie=null,Lt=0,hu(),de)}function uE(){for(;Ot!==null&&!ch();)e_(Ot)}function e_(e){var i=wp(e.alternate,e,Ji);e.memoizedProps=e.pendingProps,i===null?Qu(e):Ot=i}function n_(e){var i=e,r=i.alternate;switch(i.tag){case 15:case 0:i=vp(r,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=vp(r,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:Kh(i);default:xp(r,i),i=Ot=tm(i,Ji),i=wp(r,i,Ji)}e.memoizedProps=e.pendingProps,i===null?Qu(e):Ot=i}function Ca(e,i,r,o){qi=wr=null,Kh(i),_a=null,Nl=0;var h=i.return;try{if(Zb(e,h,i,r,Lt)){de=1,Ou(e,Ln(r,e.current)),Ot=null;return}}catch(d){if(h!==null)throw Ot=h,d;de=1,Ou(e,Ln(r,e.current)),Ot=null;return}i.flags&32768?(Bt||o===1?e=!0:Sa||(Lt&536870912)!==0?e=!1:(Rs=e=!0,(o===2||o===9||o===3||o===6)&&(o=An.current,o!==null&&o.tag===13&&(o.flags|=16384))),i_(i,e)):Qu(i)}function Qu(e){var i=e;do{if((i.flags&32768)!==0){i_(i,Rs);return}e=i.return;var r=tE(i.alternate,i,Ji);if(r!==null){Ot=r;return}if(i=i.sibling,i!==null){Ot=i;return}Ot=i=e}while(i!==null);de===0&&(de=5)}function i_(e,i){do{var r=eE(e.alternate,e);if(r!==null){r.flags&=32767,Ot=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(e=e.sibling,e!==null)){Ot=e;return}Ot=e=r}while(e!==null);de=6,Ot=null}function s_(e,i,r,o,h,d,y,A,O){e.cancelPendingCommit=null;do Yu();while(Ie!==0);if((Yt&6)!==0)throw Error(s(327));if(i!==null){if(i===e.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Th,dh(e,r,d,y,A,O),e===ie&&(Ot=ie=null,Lt=0),Ra=i,Ds=e,Wi=r,Nf=d,Mf=h,Yp=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dE(as,function(){return u_(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=B.T,B.T=null,h=J.p,J.p=2,y=Yt,Yt|=4;try{nE(e,i,r)}finally{Yt=y,J.p=h,B.T=o}}Ie=1,r_(),a_(),l_()}}function r_(){if(Ie===1){Ie=0;var e=Ds,i=Ra,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=B.T,B.T=null;var o=J.p;J.p=2;var h=Yt;Yt|=4;try{Bp(i,e);var d=Yf,y=Fg(e.containerInfo),A=d.focusedElem,O=d.selectionRange;if(y!==A&&A&&A.ownerDocument&&Gg(A.ownerDocument.documentElement,A)){if(O!==null&&_h(A)){var P=O.start,Z=O.end;if(Z===void 0&&(Z=P),"selectionStart"in A)A.selectionStart=P,A.selectionEnd=Math.min(Z,A.value.length);else{var tt=A.ownerDocument||document,G=tt&&tt.defaultView||window;if(G.getSelection){var Y=G.getSelection(),gt=A.textContent.length,vt=Math.min(O.start,gt),ne=O.end===void 0?vt:Math.min(O.end,gt);!Y.extend&&vt>ne&&(y=ne,ne=vt,vt=y);var j=Pg(A,vt),k=Pg(A,ne);if(j&&k&&(Y.rangeCount!==1||Y.anchorNode!==j.node||Y.anchorOffset!==j.offset||Y.focusNode!==k.node||Y.focusOffset!==k.offset)){var q=tt.createRange();q.setStart(j.node,j.offset),Y.removeAllRanges(),vt>ne?(Y.addRange(q),Y.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),Y.addRange(q))}}}}for(tt=[],Y=A;Y=Y.parentNode;)Y.nodeType===1&&tt.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<tt.length;A++){var W=tt[A];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}rc=!!Qf,Yf=Qf=null}finally{Yt=h,J.p=o,B.T=r}}e.current=i,Ie=2}}function a_(){if(Ie===2){Ie=0;var e=Ds,i=Ra,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=B.T,B.T=null;var o=J.p;J.p=2;var h=Yt;Yt|=4;try{Ip(e,i.alternate,i)}finally{Yt=h,J.p=o,B.T=r}}Ie=3}}function l_(){if(Ie===4||Ie===3){Ie=0,Uo();var e=Ds,i=Ra,r=Wi,o=Yp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ie=5:(Ie=0,Ra=Ds=null,o_(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Cs=null),zi(r),i=i.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Qn,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=B.T,h=J.p,J.p=2,B.T=null;try{for(var d=e.onRecoverableError,y=0;y<o.length;y++){var A=o[y];d(A.value,{componentStack:A.stack})}}finally{B.T=i,J.p=h}}(Wi&3)!==0&&Yu(),Ri(e),h=e.pendingLanes,(r&261930)!==0&&(h&42)!==0?e===Of?Xl++:(Xl=0,Of=e):Xl=0,Kl(0)}}function o_(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Dl(i)))}function Yu(){return r_(),a_(),l_(),u_()}function u_(){if(Ie!==5)return!1;var e=Ds,i=Nf;Nf=0;var r=zi(Wi),o=B.T,h=J.p;try{J.p=32>r?32:r,B.T=null,r=Mf,Mf=null;var d=Ds,y=Wi;if(Ie=0,Ra=Ds=null,Wi=0,(Yt&6)!==0)throw Error(s(331));var A=Yt;if(Yt|=4,Gp(d.current),Hp(d,d.current,y,r),Yt=A,Kl(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Qn,d)}catch{}return!0}finally{J.p=h,B.T=o,o_(e,i)}}function c_(e,i,r){i=Ln(r,i),i=hf(e.stateNode,i,2),e=Ts(e,i,2),e!==null&&(or(e,2),Ri(e))}function Jt(e,i,r){if(e.tag===3)c_(e,e,r);else for(;i!==null;){if(i.tag===3){c_(i,e,r);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Cs===null||!Cs.has(o))){e=Ln(r,e),r=hp(2),o=Ts(i,r,2),o!==null&&(fp(r,o,i,e),or(o,2),Ri(o));break}}i=i.return}}function zf(e,i,r){var o=e.pingCache;if(o===null){o=e.pingCache=new rE;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(r)||(Cf=!0,h.add(r),e=cE.bind(null,e,i,r),i.then(e,e))}function cE(e,i,r){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,ie===e&&(Lt&r)===r&&(de===4||de===3&&(Lt&62914560)===Lt&&300>sn()-Hu?(Yt&2)===0&&xa(e,0):Df|=r,wa===Lt&&(wa=0)),Ri(e)}function h_(e,i){i===0&&(i=Po()),e=Tr(e,i),e!==null&&(or(e,i),Ri(e))}function hE(e){var i=e.memoizedState,r=0;i!==null&&(r=i.retryLane),h_(e,r)}function fE(e,i){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),h_(e,r)}function dE(e,i){return Oe(e,i)}var Xu=null,Da=null,Uf=!1,Ku=!1,kf=!1,Ns=0;function Ri(e){e!==Da&&e.next===null&&(Da===null?Xu=Da=e:Da=Da.next=e),Ku=!0,Uf||(Uf=!0,mE())}function Kl(e,i){if(!kf&&Ku){kf=!0;do for(var r=!1,o=Xu;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var y=o.suspendedLanes,A=o.pingedLanes;d=(1<<31-me(42|e)+1)-1,d&=h&~(y&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(r=!0,m_(o,d))}else d=Lt,d=oi(o,o===ie?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||Yn(o,d)||(r=!0,m_(o,d));o=o.next}while(r);kf=!1}}function gE(){f_()}function f_(){Ku=Uf=!1;var e=0;Ns!==0&&wE()&&(e=Ns);for(var i=sn(),r=null,o=Xu;o!==null;){var h=o.next,d=d_(o,i);d===0?(o.next=null,r===null?Xu=h:r.next=h,h===null&&(Da=r)):(r=o,(e!==0||(d&3)!==0)&&(Ku=!0)),o=h}Ie!==0&&Ie!==5||Kl(e),Ns!==0&&(Ns=0)}function d_(e,i){for(var r=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-me(d),A=1<<y,O=h[y];O===-1?((A&r)===0||(A&o)!==0)&&(h[y]=fh(A,i)):O<=i&&(e.expiredLanes|=A),d&=~A}if(i=ie,r=Lt,r=oi(e,e===i?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===i&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&rs(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Yn(e,r)){if(i=r&-r,i===e.callbackPriority)return i;switch(o!==null&&rs(o),zi(r)){case 2:case 8:r=rl;break;case 32:r=as;break;case 268435456:r=ko;break;default:r=as}return o=g_.bind(null,e),r=Oe(r,o),e.callbackPriority=i,e.callbackNode=r,i}return o!==null&&o!==null&&rs(o),e.callbackPriority=2,e.callbackNode=null,2}function g_(e,i){if(Ie!==0&&Ie!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Yu()&&e.callbackNode!==r)return null;var o=Lt;return o=oi(e,e===ie?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Kp(e,o,i),d_(e,sn()),e.callbackNode!=null&&e.callbackNode===r?g_.bind(null,e):null)}function m_(e,i){if(Yu())return null;Kp(e,i,!0)}function mE(){xE(function(){(Yt&6)!==0?Oe(sl,gE):f_()})}function Bf(){if(Ns===0){var e=ga;e===0&&(e=ai,ai<<=1,(ai&261888)===0&&(ai=256)),Ns=e}return Ns}function p_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wr(""+e)}function __(e,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,e.id&&r.setAttribute("form",e.id),i.parentNode.insertBefore(r,i),e=new FormData(e),r.parentNode.removeChild(r),e}function pE(e,i,r,o,h){if(i==="submit"&&r&&r.stateNode===h){var d=p_((h[Ue]||null).action),y=o.submitter;y&&(i=(i=y[Ue]||null)?p_(i.formAction):y.getAttribute("formAction"),i!==null&&(d=i,y=null));var A=new vi("action","action",null,o,h);e.push({event:A,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ns!==0){var O=y?__(h,y):new FormData(h);rf(r,{pending:!0,data:O,method:h.method,action:d},null,O)}}else typeof d=="function"&&(A.preventDefault(),O=y?__(h,y):new FormData(h),rf(r,{pending:!0,data:O,method:h.method,action:d},d,O))},currentTarget:h}]})}}for(var jf=0;jf<Eh.length;jf++){var Hf=Eh[jf],_E=Hf.toLowerCase(),yE=Hf[0].toUpperCase()+Hf.slice(1);ei(_E,"on"+yE)}ei(Xg,"onAnimationEnd"),ei(Kg,"onAnimationIteration"),ei($g,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(Ib,"onTransitionRun"),ei(Lb,"onTransitionStart"),ei(zb,"onTransitionCancel"),ei(Zg,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function y_(e,i){i=(i&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],h=o.event;o=o.listeners;t:{var d=void 0;if(i)for(var y=o.length-1;0<=y;y--){var A=o[y],O=A.instance,P=A.currentTarget;if(A=A.listener,O!==d&&h.isPropagationStopped())break t;d=A,h.currentTarget=P;try{d(h)}catch(Z){cu(Z)}h.currentTarget=null,d=O}else for(y=0;y<o.length;y++){if(A=o[y],O=A.instance,P=A.currentTarget,A=A.listener,O!==d&&h.isPropagationStopped())break t;d=A,h.currentTarget=P;try{d(h)}catch(Z){cu(Z)}h.currentTarget=null,d=O}}}}function It(e,i){var r=i[Xr];r===void 0&&(r=i[Xr]=new Set);var o=e+"__bubble";r.has(o)||(v_(i,e,2,!1),r.add(o))}function qf(e,i,r){var o=0;i&&(o|=4),v_(r,e,o,i)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Pf(e){if(!e[$u]){e[$u]=!0,ol.forEach(function(r){r!=="selectionchange"&&(vE.has(r)||qf(r,!1,e),qf(r,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[$u]||(i[$u]=!0,qf("selectionchange",!1,i))}}function v_(e,i,r,o){switch(X_(i)){case 2:var h=YE;break;case 8:h=XE;break;default:h=sd}r=h.bind(null,i,r,e),h=void 0,!gr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,r,{capture:!0,passive:h}):e.addEventListener(i,r,!0):h!==void 0?e.addEventListener(i,r,{passive:h}):e.addEventListener(i,r,!1)}function Gf(e,i,r,o,h){var d=o;if((i&1)===0&&(i&2)===0&&o!==null)t:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var A=o.stateNode.containerInfo;if(A===h)break;if(y===4)for(y=o.return;y!==null;){var O=y.tag;if((O===3||O===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;A!==null;){if(y=fi(A),y===null)return;if(O=y.tag,O===5||O===6||O===26||O===27){o=d=y;continue t}A=A.parentNode}}o=o.return}fs(function(){var P=d,Z=Nn(r),tt=[];t:{var G=Jg.get(e);if(G!==void 0){var Y=vi,gt=e;switch(e){case"keypress":if(pr(r)===0)break t;case"keydown":case"keyup":Y=lu;break;case"focusin":gt="focus",Y=yr;break;case"focusout":gt="blur",Y=yr;break;case"beforeblur":case"afterblur":Y=yr;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=El;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Jo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=_;break;case Xg:case Kg:case $g:Y=tu;break;case Zg:Y=S;break;case"scroll":case"scrollend":Y=bl;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=eu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Bi;break;case"toggle":case"beforetoggle":Y=Ct}var vt=(i&4)!==0,ne=!vt&&(e==="scroll"||e==="scrollend"),j=vt?G!==null?G+"Capture":null:G;vt=[];for(var k=P,q;k!==null;){var W=k;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||j===null||(W=Zn(k,j),W!=null&&vt.push(Zl(k,W,q))),ne)break;k=k.return}0<vt.length&&(G=new Y(G,gt,null,r,Z),tt.push({event:G,listeners:vt}))}}if((i&7)===0){t:{if(G=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",G&&r!==_l&&(gt=r.relatedTarget||r.fromElement)&&(fi(gt)||gt[ci]))break t;if((Y||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(gt=r.relatedTarget||r.toElement,Y=P,gt=gt?fi(gt):null,gt!==null&&(ne=u(gt),vt=gt.tag,gt!==ne||vt!==5&&vt!==27&&vt!==6)&&(gt=null)):(Y=null,gt=P),Y!==gt)){if(vt=El,W="onMouseLeave",j="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(vt=Bi,W="onPointerLeave",j="onPointerEnter",k="pointer"),ne=Y==null?G:vn(Y),q=gt==null?G:vn(gt),G=new vt(W,k+"leave",Y,r,Z),G.target=ne,G.relatedTarget=q,W=null,fi(Z)===P&&(vt=new vt(j,k+"enter",gt,r,Z),vt.target=q,vt.relatedTarget=ne,W=vt),ne=W,Y&&gt)e:{for(vt=bE,j=Y,k=gt,q=0,W=j;W;W=vt(W))q++;W=0;for(var _t=k;_t;_t=vt(_t))W++;for(;0<q-W;)j=vt(j),q--;for(;0<W-q;)k=vt(k),W--;for(;q--;){if(j===k||k!==null&&j===k.alternate){vt=j;break e}j=vt(j),k=vt(k)}vt=null}else vt=null;Y!==null&&b_(tt,G,Y,vt,!1),gt!==null&&ne!==null&&b_(tt,ne,gt,vt,!0)}}t:{if(G=P?vn(P):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var Gt=Ug;else if(Lg(G))if(kg)Gt=Nb;else{Gt=Db;var mt=Cb}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?P&&Jr(P.elementType)&&(Gt=Ug):Gt=Vb;if(Gt&&(Gt=Gt(e,P))){zg(tt,Gt,r,Z);break t}mt&&mt(e,G,P),e==="focusout"&&P&&G.type==="number"&&P.memoizedProps.value!=null&&gl(G,"number",G.value)}switch(mt=P?vn(P):window,e){case"focusin":(Lg(mt)||mt.contentEditable==="true")&&(aa=mt,yh=P,Rl=null);break;case"focusout":Rl=yh=aa=null;break;case"mousedown":vh=!0;break;case"contextmenu":case"mouseup":case"dragend":vh=!1,Qg(tt,r,Z);break;case"selectionchange":if(Ob)break;case"keydown":case"keyup":Qg(tt,r,Z)}var Mt;if(Qt)t:{switch(e){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else ra?vr(e,r)&&(zt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(zt="onCompositionStart");zt&&(Ti&&r.locale!=="ko"&&(ra||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&ra&&(Mt=vl()):(yi=Z,yl="value"in yi?yi.value:yi.textContent,ra=!0)),mt=Zu(P,zt),0<mt.length&&(zt=new Ei(zt,e,null,r,Z),tt.push({event:zt,listeners:mt}),Mt?zt.data=Mt:(Mt=sa(r),Mt!==null&&(zt.data=Mt)))),(Mt=On?Sb(e,r):wb(e,r))&&(zt=Zu(P,"onBeforeInput"),0<zt.length&&(mt=new Ei("onBeforeInput","beforeinput",null,r,Z),tt.push({event:mt,listeners:zt}),mt.data=Mt)),pE(tt,e,P,r,Z)}y_(tt,i)})}function Zl(e,i,r){return{instance:e,listener:i,currentTarget:r}}function Zu(e,i){for(var r=i+"Capture",o=[];e!==null;){var h=e,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Zn(e,r),h!=null&&o.unshift(Zl(e,h,d)),h=Zn(e,i),h!=null&&o.push(Zl(e,h,d))),e.tag===3)return o;e=e.return}return[]}function bE(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function b_(e,i,r,o,h){for(var d=i._reactName,y=[];r!==null&&r!==o;){var A=r,O=A.alternate,P=A.stateNode;if(A=A.tag,O!==null&&O===o)break;A!==5&&A!==26&&A!==27||P===null||(O=P,h?(P=Zn(r,d),P!=null&&y.unshift(Zl(r,P,O))):h||(P=Zn(r,d),P!=null&&y.push(Zl(r,P,O)))),r=r.return}y.length!==0&&e.push({event:i,listeners:y})}var EE=/\r\n?/g,TE=/\u0000|\uFFFD/g;function E_(e){return(typeof e=="string"?e:""+e).replace(EE,`
`).replace(TE,"")}function T_(e,i){return i=E_(i),E_(e)===i}function ee(e,i,r,o,h,d){switch(r){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||hn(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&hn(e,""+o);break;case"className":bn(e,"class",o);break;case"tabIndex":bn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(e,r,o);break;case"style":pl(e,o,d);break;case"data":if(i!=="object"){bn(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Wr(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(r==="formAction"?(i!=="input"&&ee(e,i,"name",h.name,h,null),ee(e,i,"formEncType",h.formEncType,h,null),ee(e,i,"formMethod",h.formMethod,h,null),ee(e,i,"formTarget",h.formTarget,h,null)):(ee(e,i,"encType",h.encType,h,null),ee(e,i,"method",h.method,h,null),ee(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Wr(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=$n);break;case"onScroll":o!=null&&It("scroll",e);break;case"onScrollEnd":o!=null&&It("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Wr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":It("beforetoggle",e),It("toggle",e),$r(e,"popover",o);break;case"xlinkActuate":Se(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Se(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Se(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Se(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Se(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Se(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Se(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Se(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Se(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":$r(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Zo.get(r)||r,$r(e,r,o))}}function Ff(e,i,r,o,h,d){switch(r){case"style":pl(e,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(r=o.__html,r!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=r}}break;case"children":typeof o=="string"?hn(e,o):(typeof o=="number"||typeof o=="bigint")&&hn(e,""+o);break;case"onScroll":o!=null&&It("scroll",e);break;case"onScrollEnd":o!=null&&It("scrollend",e);break;case"onClick":o!=null&&(e.onclick=$n);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ul.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),i=r.slice(2,h?r.length-7:void 0),d=e[Ue]||null,d=d!=null?d[r]:null,typeof d=="function"&&e.removeEventListener(i,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(i,o,h);break t}r in e?e[r]=o:o===!0?e.setAttribute(r,""):$r(e,r,o)}}}function Ye(e,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",e),It("load",e);var o=!1,h=!1,d;for(d in r)if(r.hasOwnProperty(d)){var y=r[d];if(y!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ee(e,i,d,y,r,null)}}h&&ee(e,i,"srcSet",r.srcSet,r,null),o&&ee(e,i,"src",r.src,r,null);return;case"input":It("invalid",e);var A=d=y=h=null,O=null,P=null;for(o in r)if(r.hasOwnProperty(o)){var Z=r[o];if(Z!=null)switch(o){case"name":h=Z;break;case"type":y=Z;break;case"checked":O=Z;break;case"defaultChecked":P=Z;break;case"value":d=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:ee(e,i,o,Z,r,null)}}Xo(e,d,A,O,P,y,h,!1);return;case"select":It("invalid",e),o=y=d=null;for(h in r)if(r.hasOwnProperty(h)&&(A=r[h],A!=null))switch(h){case"value":d=A;break;case"defaultValue":y=A;break;case"multiple":o=A;default:ee(e,i,h,A,r,null)}i=d,r=y,e.multiple=!!o,i!=null?os(e,!!o,i,!1):r!=null&&os(e,!!o,r,!0);return;case"textarea":It("invalid",e),d=h=o=null;for(y in r)if(r.hasOwnProperty(y)&&(A=r[y],A!=null))switch(y){case"value":o=A;break;case"defaultValue":h=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:ee(e,i,y,A,r,null)}us(e,o,h,d);return;case"option":for(O in r)if(r.hasOwnProperty(O)&&(o=r[O],o!=null))switch(O){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ee(e,i,O,o,r,null)}return;case"dialog":It("beforetoggle",e),It("toggle",e),It("cancel",e),It("close",e);break;case"iframe":case"object":It("load",e);break;case"video":case"audio":for(o=0;o<$l.length;o++)It($l[o],e);break;case"image":It("error",e),It("load",e);break;case"details":It("toggle",e);break;case"embed":case"source":case"link":It("error",e),It("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in r)if(r.hasOwnProperty(P)&&(o=r[P],o!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ee(e,i,P,o,r,null)}return;default:if(Jr(i)){for(Z in r)r.hasOwnProperty(Z)&&(o=r[Z],o!==void 0&&Ff(e,i,Z,o,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(o=r[A],o!=null&&ee(e,i,A,o,r,null))}function AE(e,i,r,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,y=null,A=null,O=null,P=null,Z=null;for(Y in r){var tt=r[Y];if(r.hasOwnProperty(Y)&&tt!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":O=tt;default:o.hasOwnProperty(Y)||ee(e,i,Y,null,o,tt)}}for(var G in o){var Y=o[G];if(tt=r[G],o.hasOwnProperty(G)&&(Y!=null||tt!=null))switch(G){case"type":d=Y;break;case"name":h=Y;break;case"checked":P=Y;break;case"defaultChecked":Z=Y;break;case"value":y=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==tt&&ee(e,i,G,Y,o,tt)}}Zr(e,y,A,O,P,Z,d,h);return;case"select":Y=y=A=G=null;for(d in r)if(O=r[d],r.hasOwnProperty(d)&&O!=null)switch(d){case"value":break;case"multiple":Y=O;default:o.hasOwnProperty(d)||ee(e,i,d,null,o,O)}for(h in o)if(d=o[h],O=r[h],o.hasOwnProperty(h)&&(d!=null||O!=null))switch(h){case"value":G=d;break;case"defaultValue":A=d;break;case"multiple":y=d;default:d!==O&&ee(e,i,h,d,o,O)}i=A,r=y,o=Y,G!=null?os(e,!!r,G,!1):!!o!=!!r&&(i!=null?os(e,!!r,i,!0):os(e,!!r,r?[]:"",!1));return;case"textarea":Y=G=null;for(A in r)if(h=r[A],r.hasOwnProperty(A)&&h!=null&&!o.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ee(e,i,A,null,o,h)}for(y in o)if(h=o[y],d=r[y],o.hasOwnProperty(y)&&(h!=null||d!=null))switch(y){case"value":G=h;break;case"defaultValue":Y=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&ee(e,i,y,h,o,d)}Ko(e,G,Y);return;case"option":for(var gt in r)if(G=r[gt],r.hasOwnProperty(gt)&&G!=null&&!o.hasOwnProperty(gt))switch(gt){case"selected":e.selected=!1;break;default:ee(e,i,gt,null,o,G)}for(O in o)if(G=o[O],Y=r[O],o.hasOwnProperty(O)&&G!==Y&&(G!=null||Y!=null))switch(O){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ee(e,i,O,G,o,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in r)G=r[vt],r.hasOwnProperty(vt)&&G!=null&&!o.hasOwnProperty(vt)&&ee(e,i,vt,null,o,G);for(P in o)if(G=o[P],Y=r[P],o.hasOwnProperty(P)&&G!==Y&&(G!=null||Y!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:ee(e,i,P,G,o,Y)}return;default:if(Jr(i)){for(var ne in r)G=r[ne],r.hasOwnProperty(ne)&&G!==void 0&&!o.hasOwnProperty(ne)&&Ff(e,i,ne,void 0,o,G);for(Z in o)G=o[Z],Y=r[Z],!o.hasOwnProperty(Z)||G===Y||G===void 0&&Y===void 0||Ff(e,i,Z,G,o,Y);return}}for(var j in r)G=r[j],r.hasOwnProperty(j)&&G!=null&&!o.hasOwnProperty(j)&&ee(e,i,j,null,o,G);for(tt in o)G=o[tt],Y=r[tt],!o.hasOwnProperty(tt)||G===Y||G==null&&Y==null||ee(e,i,tt,G,o,Y)}function A_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function SE(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var h=r[o],d=h.transferSize,y=h.initiatorType,A=h.duration;if(d&&A&&A_(y)){for(y=0,A=h.responseEnd,o+=1;o<r.length;o++){var O=r[o],P=O.startTime;if(P>A)break;var Z=O.transferSize,tt=O.initiatorType;Z&&A_(tt)&&(O=O.responseEnd,y+=Z*(O<A?1:(A-P)/(O-P)))}if(--o,i+=8*(d+y)/(h.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Qf=null,Yf=null;function Ju(e){return e.nodeType===9?e:e.ownerDocument}function S_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Xf(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Kf=null;function wE(){var e=window.event;return e&&e.type==="popstate"?e===Kf?!1:(Kf=e,!0):(Kf=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,RE=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,xE=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(e){return x_.resolve(null).then(e).catch(CE)}:R_;function CE(e){setTimeout(function(){throw e})}function Ms(e){return e==="head"}function C_(e,i){var r=i,o=0;do{var h=r.nextSibling;if(e.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(h),Oa(i);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Jl(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Jl(r);for(var d=r.firstChild;d;){var y=d.nextSibling,A=d.nodeName;d[hi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&d.rel.toLowerCase()==="stylesheet"||r.removeChild(d),d=y}}else r==="body"&&Jl(e.ownerDocument.body);r=h}while(r);Oa(i)}function D_(e,i){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function $f(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":$f(r),Kr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function DE(e,i,r,o){for(;e.nodeType===1;){var h=r;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[hi])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function VE(e,i,r){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=jn(e.nextSibling),e===null))return null;return e}function V_(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=jn(e.nextSibling),e===null))return null;return e}function Zf(e){return e.data==="$?"||e.data==="$~"}function Jf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function NE(e,i){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||r.readyState!=="loading")i();else{var o=function(){i(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function jn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var Wf=null;function N_(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(i===0)return jn(e.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}e=e.nextSibling}return null}function M_(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return e;i--}else r!=="/$"&&r!=="/&"||i++}e=e.previousSibling}return null}function O_(e,i,r){switch(i=Ju(r),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Jl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Kr(e)}var Hn=new Map,I_=new Set;function Wu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ts=J.d;J.d={f:ME,r:OE,D:IE,C:LE,L:zE,m:UE,X:BE,S:kE,M:jE};function ME(){var e=ts.f(),i=Gu();return e||i}function OE(e){var i=Vn(e);i!==null&&i.tag===5&&i.type==="form"?Zm(i):ts.r(e)}var Va=typeof document>"u"?null:document;function L_(e,i,r){var o=Va;if(o&&typeof i=="string"&&i){var h=cn(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),I_.has(h)||(I_.add(h),e={rel:e,crossOrigin:r,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Ye(i,"link",e),Ae(i),o.head.appendChild(i)))}}function IE(e){ts.D(e),L_("dns-prefetch",e,null)}function LE(e,i){ts.C(e,i),L_("preconnect",e,i)}function zE(e,i,r){ts.L(e,i,r);var o=Va;if(o&&e&&i){var h='link[rel="preload"][as="'+cn(i)+'"]';i==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+cn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+cn(r.imageSizes)+'"]')):h+='[href="'+cn(e)+'"]';var d=h;switch(i){case"style":d=Na(e);break;case"script":d=Ma(e)}Hn.has(d)||(e=E({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:e,as:i},r),Hn.set(d,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(Wl(d))||i==="script"&&o.querySelector(to(d))||(i=o.createElement("link"),Ye(i,"link",e),Ae(i),o.head.appendChild(i)))}}function UE(e,i){ts.m(e,i);var r=Va;if(r&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+cn(o)+'"][href="'+cn(e)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ma(e)}if(!Hn.has(d)&&(e=E({rel:"modulepreload",href:e},i),Hn.set(d,e),r.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(to(d)))return}o=r.createElement("link"),Ye(o,"link",e),Ae(o),r.head.appendChild(o)}}}function kE(e,i,r){ts.S(e,i,r);var o=Va;if(o&&e){var h=di(o).hoistableStyles,d=Na(e);i=i||"default";var y=h.get(d);if(!y){var A={loading:0,preload:null};if(y=o.querySelector(Wl(d)))A.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":i},r),(r=Hn.get(d))&&td(e,r);var O=y=o.createElement("link");Ae(O),Ye(O,"link",e),O._p=new Promise(function(P,Z){O.onload=P,O.onerror=Z}),O.addEventListener("load",function(){A.loading|=1}),O.addEventListener("error",function(){A.loading|=2}),A.loading|=4,tc(y,i,o)}y={type:"stylesheet",instance:y,count:1,state:A},h.set(d,y)}}}function BE(e,i){ts.X(e,i);var r=Va;if(r&&e){var o=di(r).hoistableScripts,h=Ma(e),d=o.get(h);d||(d=r.querySelector(to(h)),d||(e=E({src:e,async:!0},i),(i=Hn.get(h))&&ed(e,i),d=r.createElement("script"),Ae(d),Ye(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function jE(e,i){ts.M(e,i);var r=Va;if(r&&e){var o=di(r).hoistableScripts,h=Ma(e),d=o.get(h);d||(d=r.querySelector(to(h)),d||(e=E({src:e,async:!0,type:"module"},i),(i=Hn.get(h))&&ed(e,i),d=r.createElement("script"),Ae(d),Ye(d,"link",e),r.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function z_(e,i,r,o){var h=(h=Nt.current)?Wu(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Na(r.href),r=di(h).hoistableStyles,o=r.get(i),o||(o={type:"style",instance:null,count:0,state:null},r.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Na(r.href);var d=di(h).hoistableStyles,y=d.get(e);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=h.querySelector(Wl(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Hn.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Hn.set(e,r),d||HE(h,e,r,y.state))),i&&o===null)throw Error(s(528,""));return y}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ma(r),r=di(h).hoistableScripts,o=r.get(i),o||(o={type:"script",instance:null,count:0,state:null},r.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Na(e){return'href="'+cn(e)+'"'}function Wl(e){return'link[rel="stylesheet"]['+e+"]"}function U_(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function HE(e,i,r,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Ye(i,"link",r),Ae(i),e.head.appendChild(i))}function Ma(e){return'[src="'+cn(e)+'"]'}function to(e){return"script[async]"+e}function k_(e,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+cn(r.href)+'"]');if(o)return i.instance=o,Ae(o),o;var h=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ae(o),Ye(o,"style",h),tc(o,r.precedence,e),i.instance=o;case"stylesheet":h=Na(r.href);var d=e.querySelector(Wl(h));if(d)return i.state.loading|=4,i.instance=d,Ae(d),d;o=U_(r),(h=Hn.get(h))&&td(o,h),d=(e.ownerDocument||e).createElement("link"),Ae(d);var y=d;return y._p=new Promise(function(A,O){y.onload=A,y.onerror=O}),Ye(d,"link",o),i.state.loading|=4,tc(d,r.precedence,e),i.instance=d;case"script":return d=Ma(r.src),(h=e.querySelector(to(d)))?(i.instance=h,Ae(h),h):(o=r,(h=Hn.get(d))&&(o=E({},r),ed(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Ae(h),Ye(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,tc(o,r.precedence,e));return i.instance}function tc(e,i,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,y=0;y<o.length;y++){var A=o[y];if(A.dataset.precedence===i)d=A;else if(d!==h)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(e,i.firstChild))}function td(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function ed(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ec=null;function B_(e,i,r){if(ec===null){var o=new Map,h=ec=new Map;h.set(r,o)}else h=ec,o=h.get(r),o||(o=new Map,h.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),h=0;h<r.length;h++){var d=r[h];if(!(d[hi]||d[Te]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(i)||"";y=e+y;var A=o.get(y);A?A.push(d):o.set(y,[d])}}return o}function j_(e,i,r){e=e.ownerDocument||e,e.head.insertBefore(r,i==="title"?e.querySelector("head > title"):null)}function qE(e,i,r){if(r===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function H_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function PE(e,i,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=Na(o.href),d=i.querySelector(Wl(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=nc.bind(e),i.then(e,e)),r.state.loading|=4,r.instance=d,Ae(d);return}d=i.ownerDocument||i,o=U_(o),(h=Hn.get(h))&&td(o,h),d=d.createElement("link"),Ae(d);var y=d;y._p=new Promise(function(A,O){y.onload=A,y.onerror=O}),Ye(d,"link",o),r.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=nc.bind(e),i.addEventListener("load",r),i.addEventListener("error",r))}}var nd=0;function GE(e,i){return e.stylesheets&&e.count===0&&sc(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&sc(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&nd===0&&(nd=62500*SE());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sc(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>nd?50:800)+i);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ic=null;function sc(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ic=new Map,i.forEach(FE,e),ic=null,nc.call(e))}function FE(e,i){if(!(i.state.loading&4)){var r=ic.get(e);if(r)var o=r.get(null);else{r=new Map,ic.set(e,r);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var y=h[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}h=i.instance,y=h.getAttribute("data-precedence"),d=r.get(y)||o,d===o&&r.set(null,h),r.set(y,h),this.count++,o=nc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var eo={$$typeof:K,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function QE(e,i,r,o,h,d,y,A,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.hiddenUpdates=ui(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function q_(e,i,r,o,h,d,y,A,O,P,Z,tt){return e=new QE(e,i,r,y,O,P,Z,tt,A),i=1,d===!0&&(i|=24),d=Tn(3,null,null,i),e.current=d,d.stateNode=e,i=Ih(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:o,isDehydrated:r,cache:i},kh(d),e}function P_(e){return e?(e=ua,e):ua}function G_(e,i,r,o,h,d){h=P_(h),o.context===null?o.context=h:o.pendingContext=h,o=Es(i),o.payload={element:r},d=d===void 0?null:d,d!==null&&(o.callback=d),r=Ts(e,o,i),r!==null&&(pn(r,e,i),Ol(r,e,i))}function F_(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<i?r:i}}function id(e,i){F_(e,i),(e=e.alternate)&&F_(e,i)}function Q_(e){if(e.tag===13||e.tag===31){var i=Tr(e,67108864);i!==null&&pn(i,e,67108864),id(e,67108864)}}function Y_(e){if(e.tag===13||e.tag===31){var i=xn();i=cr(i);var r=Tr(e,i);r!==null&&pn(r,e,i),id(e,i)}}var rc=!0;function YE(e,i,r,o){var h=B.T;B.T=null;var d=J.p;try{J.p=2,sd(e,i,r,o)}finally{J.p=d,B.T=h}}function XE(e,i,r,o){var h=B.T;B.T=null;var d=J.p;try{J.p=8,sd(e,i,r,o)}finally{J.p=d,B.T=h}}function sd(e,i,r,o){if(rc){var h=rd(o);if(h===null)Gf(e,i,o,ac,r),K_(e,o);else if($E(h,e,i,r,o))o.stopPropagation();else if(K_(e,o),i&4&&-1<KE.indexOf(e)){for(;h!==null;){var d=Vn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=li(d.pendingLanes);if(y!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;y;){var O=1<<31-me(y);A.entanglements[1]|=O,y&=~O}Ri(d),(Yt&6)===0&&(qu=sn()+500,Kl(0))}}break;case 31:case 13:A=Tr(d,2),A!==null&&pn(A,d,2),Gu(),id(d,2)}if(d=rd(o),d===null&&Gf(e,i,o,ac,r),d===h)break;h=d}h!==null&&o.stopPropagation()}else Gf(e,i,o,null,r)}}function rd(e){return e=Nn(e),ad(e)}var ac=null;function ad(e){if(ac=null,e=fi(e),e!==null){var i=u(e);if(i===null)e=null;else{var r=i.tag;if(r===13){if(e=f(i),e!==null)return e;e=null}else if(r===31){if(e=g(i),e!==null)return e;e=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return ac=e,null}function X_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ar()){case sl:return 2;case rl:return 8;case as:case hh:return 32;case ko:return 268435456;default:return 32}default:return 32}}var ld=!1,Os=null,Is=null,Ls=null,no=new Map,io=new Map,zs=[],KE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K_(e,i){switch(e){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":no.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":io.delete(i.pointerId)}}function so(e,i,r,o,h,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},i!==null&&(i=Vn(i),i!==null&&Q_(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function $E(e,i,r,o,h){switch(i){case"focusin":return Os=so(Os,e,i,r,o,h),!0;case"dragenter":return Is=so(Is,e,i,r,o,h),!0;case"mouseover":return Ls=so(Ls,e,i,r,o,h),!0;case"pointerover":var d=h.pointerId;return no.set(d,so(no.get(d)||null,e,i,r,o,h)),!0;case"gotpointercapture":return d=h.pointerId,io.set(d,so(io.get(d)||null,e,i,r,o,h)),!0}return!1}function $_(e){var i=fi(e.target);if(i!==null){var r=u(i);if(r!==null){if(i=r.tag,i===13){if(i=f(r),i!==null){e.blockedOn=i,Xn(e.priority,function(){Y_(r)});return}}else if(i===31){if(i=g(r),i!==null){e.blockedOn=i,Xn(e.priority,function(){Y_(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lc(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var r=rd(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);_l=o,r.target.dispatchEvent(o),_l=null}else return i=Vn(r),i!==null&&Q_(i),e.blockedOn=r,!1;i.shift()}return!0}function Z_(e,i,r){lc(e)&&r.delete(i)}function ZE(){ld=!1,Os!==null&&lc(Os)&&(Os=null),Is!==null&&lc(Is)&&(Is=null),Ls!==null&&lc(Ls)&&(Ls=null),no.forEach(Z_),io.forEach(Z_)}function oc(e,i){e.blockedOn===i&&(e.blockedOn=null,ld||(ld=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,ZE)))}var uc=null;function J_(e){uc!==e&&(uc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){uc===e&&(uc=null);for(var i=0;i<e.length;i+=3){var r=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(ad(o||r)===null)continue;break}var d=Vn(r);d!==null&&(e.splice(i,3),i-=3,rf(d,{pending:!0,data:h,method:r.method,action:o},o,h))}}))}function Oa(e){function i(O){return oc(O,e)}Os!==null&&oc(Os,e),Is!==null&&oc(Is,e),Ls!==null&&oc(Ls,e),no.forEach(i),io.forEach(i);for(var r=0;r<zs.length;r++){var o=zs[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<zs.length&&(r=zs[0],r.blockedOn===null);)$_(r),r.blockedOn===null&&zs.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var h=r[o],d=r[o+1],y=h[Ue]||null;if(typeof d=="function")y||J_(r);else if(y){var A=null;if(d&&d.hasAttribute("formAction")){if(h=d,y=d[Ue]||null)A=y.formAction;else if(ad(h)!==null)continue}else A=y.action;typeof A=="function"?r[o+1]=A:(r.splice(o,3),o-=3),J_(r)}}}function W_(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function od(e){this._internalRoot=e}cc.prototype.render=od.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,o=xn();G_(r,o,e,i,null,null)},cc.prototype.unmount=od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;G_(e.current,2,null,e,null,null),Gu(),i[ci]=null}};function cc(e){this._internalRoot=e}cc.prototype.unstable_scheduleHydration=function(e){if(e){var i=Go();e={blockedOn:null,target:e,priority:i};for(var r=0;r<zs.length&&i!==0&&i<zs[r].priority;r++);zs.splice(r,0,e),r===0&&$_(e)}};var ty=t.version;if(ty!=="19.2.0")throw Error(s(527,ty,"19.2.0"));J.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(i),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var JE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Qn=hc.inject(JE),qe=hc}catch{}}return ao.createRoot=function(e,i){if(!l(e))throw Error(s(299));var r=!1,o="",h=lp,d=op,y=up;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=q_(e,1,!1,null,null,r,o,null,h,d,y,W_),e[ci]=i.current,Pf(e),new od(i)},ao.hydrateRoot=function(e,i,r){if(!l(e))throw Error(s(299));var o=!1,h="",d=lp,y=op,A=up,O=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(O=r.formState)),i=q_(e,1,!0,i,r??null,o,h,O,d,y,A,W_),i.context=P_(null),r=i.current,o=xn(),o=cr(o),h=Es(o),h.callback=null,Ts(r,h,o),r=o,i.current.lanes=r,or(i,r),Ri(i),e[ci]=i.current,Pf(e),new cc(i)},ao.version="19.2.0",ao}var cy;function o1(){if(cy)return hd.exports;cy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),hd.exports=l1(),hd.exports}var u1=o1();const c1="_preview_1fp51_1",h1={preview:c1};function hy(a){if(typeof a!="string")return console.error("Input must be a string."),[];const t=[];let n=0,s=0;for(;s<a.length;){const l=a.indexOf("{",s);if(l===-1){n<a.length&&t.push(a.substring(n));break}let u=1,f=-1;for(let g=l+1;g<a.length;g++){const p=a[g];if(p==="{"?u++:p==="}"&&u--,u===0){f=g;break}}if(f!==-1){const g=a.substring(l,f+1);let p=!1;try{const m=JSON.parse(g);m&&typeof m=="object"&&m.name&&m.parameters&&typeof m.parameters=="object"&&(p=!0)}catch{p=!1}p?(l>n&&t.push(a.substring(n,l)),t.push(JSON.parse(g)),n=f+1,s=f+1):s=l+1}else{n<a.length&&t.push(a.substring(n));break}}for(let l=0;l<t.length;l++)typeof t[l]=="string"?t[l]={type:"text",text:t[l]}:typeof t[l]=="object"&&(t[l]={type:"jsonObj",jsonObj:t[l]});return t}const f1="_diagram_1amgz_7",d1={diagram:f1};class Vt{constructor(t,n){this.x=t,this.y=n}add(t){return new Vt(this.x+t.x,this.y+t.y)}sub(t){return new Vt(this.x-t.x,this.y-t.y)}scale(t){return new Vt(this.x*t,this.y*t)}mul(t){return new Vt(this.x*t.x,this.y*t.y)}rotate(t){let n=this.x*Math.cos(t)-this.y*Math.sin(t),s=this.x*Math.sin(t)+this.y*Math.cos(t);return new Vt(n,s)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}equals(t){return this.x==t.x&&this.y==t.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}length_sq(){return this.x*this.x+this.y*this.y}angle(){return Math.atan2(this.y,this.x)}normalize(){let t=this.length();return new Vt(this.x/t,this.y/t)}copy(){return new Vt(this.x,this.y)}apply(t){return t(this.copy())}}function F(a,t){return new Vt(a,t)}class ks{static translate(t){return n=>n.add(t)}static rotate(t,n){return s=>s.sub(n).rotate(t).add(n)}static scale(t,n){return s=>s.sub(n).mul(t).add(n)}static reflect_over_point(t){return n=>n.sub(t).rotate(Math.PI).add(t)}static reflect_over_line(t,n){let l=n.sub(t).rotate(Math.PI/2).normalize();return u=>{let f=l.dot(u.sub(t));return u.sub(l.scale(2*f))}}static skewX(t,n){return s=>{let l=s.x+(n-s.y)*Math.tan(t);return new Vt(l,s.y)}}static skewY(t,n){return s=>{let l=s.y+(n-s.x)*Math.tan(t);return new Vt(s.x,l)}}}var fy;(function(a){a.TEXT="TEXT",a.OPEN_TAG="OPEN_TAG",a.CLOSE_TAG="CLOSE_TAG",a.EOF="EOF"})(fy||(fy={}));var Ne;(function(a){a.EMPTY="empty",a.LINE="line",a.CIRCLE="circle",a.TEXTVAR="textvar",a.ROW_="row_",a.COL_="col_",a.ARROW_LINE="arrow_line",a.ARROW_HEAD="arrow_head",a.TABLE="table",a.CONTAIN_TABLE="contain_table",a.TABLE_CELL="table_cell",a.TABLE_CONTENT="table_content",a.EMPTY_CELL="empty_cell",a.GRAPH_AXIS="graph_axis_line",a.GRAPH_TICK="graph_tick",a.GRAPH_TICK_LABEL="graph_tick_label",a.GRAPH_GRID="graph_grid"})(Ne||(Ne={}));function g1(a,t){if(!a)throw new Error(t)}var ct;(function(a){a.Polygon="polygon",a.Curve="curve",a.Text="text",a.Image="image",a.Diagram="diagram",a.MultilineText="multilinetext",a.ForeignObject="foreignObject"})(ct||(ct={}));const $d="16";function m1(a){switch(a){case"top-left":return{"text-anchor":"start",dy:"0.75em"};case"top-center":return{"text-anchor":"middle",dy:"0.75em"};case"top-right":return{"text-anchor":"end",dy:"0.75em"};case"center-left":return{"text-anchor":"start",dy:"0.25em"};case"center-center":return{"text-anchor":"middle",dy:"0.25em"};case"center-right":return{"text-anchor":"end",dy:"0.25em"};case"bottom-left":return{"text-anchor":"start",dy:"-0.25em"};case"bottom-center":return{"text-anchor":"middle",dy:"-0.25em"};case"bottom-right":return{"text-anchor":"end",dy:"-0.25em"};default:throw new Error("Unknown anchor "+a)}}let Pc=class vc{constructor(t,n={}){this.children=[],this.path=void 0,this.origin=new Vt(0,0),this.style={},this.textdata={},this.multilinedata={},this.imgdata={},this.foreignobjdata={},this.mutable=!1,this.tags=[],this._bbox_cache=void 0,this.type=t,this.path=n.path,n.children&&(this.children=n.children),n.textdata&&(this.textdata=n.textdata),n.imgdata&&(this.imgdata=n.imgdata),n.tags&&(this.tags=n.tags),n.multilinedata&&(this.multilinedata=n.multilinedata),n.foreignobjdata&&(this.foreignobjdata=n.foreignobjdata)}mut(){this.mutable=!0,this.path!=null&&(this.path.mutable=!0);for(let t=0;t<this.children.length;t++)this.children[t].mut();return this}mut_parent_only(){return this.mutable=!0,this.path!=null&&(this.path.mutable=!0),this}immut(){let t=this.copy();t.mutable=!1,this.path!=null&&(this.path.mutable=!1);for(let n=0;n<t.children.length;n++)t.children[n].immut();return t}static deep_setPrototypeOf(t){Object.setPrototypeOf(t,vc.prototype);let n=t;n.origin=Object.setPrototypeOf(n.origin,Vt.prototype);for(let s=0;s<n.children.length;s++)vc.deep_setPrototypeOf(n.children[s]);n.path!=null&&(Object.setPrototypeOf(n.path,Ka.prototype),n.path=n.path.copy()),n._bbox_cache!=null&&n._bbox_cache.length==2&&(Object.setPrototypeOf(n._bbox_cache[0],Vt.prototype),Object.setPrototypeOf(n._bbox_cache[1],Vt.prototype))}copy(){let t=JSON.parse(JSON.stringify(this));return vc.deep_setPrototypeOf(t),t}copy_if_not_mutable(){return this.mutable?this:this.copy()}append_tags(t){let n=this.copy_if_not_mutable();Array.isArray(t)||(t=[t]);for(let s of t)n.tags.includes(s)||n.tags.push(s);return n}remove_tags(t){let n=this.copy_if_not_mutable();return n.tags=n.tags.filter(s=>!t.includes(s)),n}reset_tags(){let t=this.copy_if_not_mutable();return t.tags=[],t}contain_tag(t){return this.tags.includes(t)}contain_all_tags(t){for(let n of t)if(!this.tags.includes(n))return!1;return!0}collect_children(){let t=[];if(this.type==ct.Diagram)for(let n of this.children)t=t.concat(n.collect_children());else t.push(this);return t}flatten(){let t=this.copy_if_not_mutable();return t.children=t.collect_children(),t}apply(t){return t(this.copy_if_not_mutable())}apply_recursive(t){let n=this.copy_if_not_mutable();n=t(n);for(let s=0;s<n.children.length;s++)n.children[s]=n.children[s].apply_recursive(t);return n}apply_to_tagged_recursive(t,n){Array.isArray(t)||(t=[t]);let s=this.copy_if_not_mutable();s.contain_all_tags(t)&&(s=n(s));for(let l=0;l<s.children.length;l++)s.children[l]=s.children[l].apply_to_tagged_recursive(t,n);return s}get_tagged_elements(t){Array.isArray(t)||(t=[t]);let n=[];this.contain_all_tags(t)&&n.push(this.copy_if_not_mutable());for(let s=0;s<this.children.length;s++)n=n.concat(this.children[s].get_tagged_elements(t));return n}combine(...t){return Xt(this,...t)}to_curve(){let t=this.copy_if_not_mutable();if(t.type==ct.Polygon)t.type=ct.Curve;else if(t.type==ct.Diagram)for(let n=0;n<t.children.length;n++)t.children[n]=t.children[n].to_curve();return t}to_polygon(){let t=this.copy_if_not_mutable();if(t.type==ct.Curve)t.type=ct.Polygon;else if(t.type==ct.Diagram)for(let n=0;n<t.children.length;n++)t.children[n]=t.children[n].to_polygon();return t}add_points(t){let n=this.copy_if_not_mutable();if(n.type==ct.Polygon||n.type==ct.Curve){if(n.path==null)throw new Error(this.type+" must have a path");n.path=n.path.add_points(t)}else if(n.type==ct.Diagram){let s=n.children[n.children.length-1];n.children[n.children.length-1]=s.add_points(t)}return n}update_style(t,n,s){let l=this.copy_if_not_mutable();if(s?.includes(l.type))return l;if(l.type==ct.Polygon||l.type==ct.Curve||l.type==ct.Text||l.type==ct.Image||l.type==ct.MultilineText||l.type==ct.ForeignObject)l.style[t]=n;else if(l.type==ct.Diagram)for(let u=0;u<l.children.length;u++)l.children[u]=l.children[u].update_style(t,n,s);else throw new Error("Unreachable, unknown diagram type : "+l.type);return l}clone_style_from(t){return this.apply_recursive(n=>(n.style=Object.assign({},t.style),n))}fill(t){return this.update_style("fill",t,[ct.Text])}stroke(t){return this.update_style("stroke",t,[ct.Text])}opacity(t){return this.update_style("opacity",t.toString())}strokewidth(t){return this.update_style("stroke-width",t.toString(),[ct.Text])}strokelinecap(t){return this.update_style("stroke-linecap",t)}strokelinejoin(t){return this.update_style("stroke-linejoin",t)}strokedasharray(t){return this.update_style("stroke-dasharray",t.join(","))}vectoreffect(t){return this.update_style("vector-effect",t)}filter(t){return this.update_style("filter",`url(#${t})`)}textfill(t){return this.update_style("fill",t,[ct.Polygon,ct.Curve])}textstroke(t){return this.update_style("stroke",t,[ct.Polygon,ct.Curve])}textstrokewidth(t){return this.update_style("stroke-width",t.toString(),[ct.Polygon,ct.Curve])}update_textdata(t,n){let s=this.copy_if_not_mutable();if(s.type==ct.Text||s.type==ct.MultilineText)s.textdata[t]=n;else if(s.type==ct.Diagram)for(let l=0;l<s.children.length;l++)s.children[l]=s.children[l].update_textdata(t,n);else if(!(s.type==ct.Polygon||s.type==ct.Curve))throw new Error("Unreachable, unknown diagram type : "+s.type);return s}fontfamily(t){return this.update_textdata("font-family",t)}fontstyle(t){return this.update_textdata("font-style",t)}fontsize(t){return this.update_textdata("font-size",t.toString())}fontweight(t){return this.update_textdata("font-weight",t.toString())}fontscale(t){return this.update_textdata("font-scale",t.toString())}textanchor(t){return this.update_textdata("text-anchor",t)}textdy(t){return this.update_textdata("dy",t)}textangle(t){return this.update_textdata("angle",t.toString())}text_tovar(){let t=this.copy_if_not_mutable();if(t.type==ct.Text)t=t.append_tags(Ne.TEXTVAR);else if(t.type==ct.Diagram)for(let n=0;n<t.children.length;n++)t.children[n]=t.children[n].text_tovar();return t}text_totext(){let t=this.copy_if_not_mutable();if(t.type==ct.Text)t=t.remove_tags("textvar");else if(t.type==ct.Diagram)for(let n=0;n<t.children.length;n++)t.children[n]=t.children[n].text_totext();return t}bounding_box(){if(this._bbox_cache!=null)return this._bbox_cache;let t=1/0,n=1/0,s=-1/0,l=-1/0;if(this.type==ct.Diagram){for(let f=0;f<this.children.length;f++){let g=this.children[f],[p,m]=g.bounding_box();t=Math.min(t,p.x),n=Math.min(n,p.y),s=Math.max(s,m.x),l=Math.max(l,m.y)}const u=[new Vt(t,n),new Vt(s,l)];return this._bbox_cache=u,u}else if(this.type==ct.Curve||this.type==ct.Polygon||this.type==ct.Image||this.type==ct.ForeignObject){if(this.path==null)throw new Error(this.type+" must have a path");for(let f=0;f<this.path.points.length;f++){let g=this.path.points[f];t=Math.min(t,g.x),n=Math.min(n,g.y),s=Math.max(s,g.x),l=Math.max(l,g.y)}const u=[new Vt(t,n),new Vt(s,l)];return this._bbox_cache=u,u}else if(this.type==ct.Text||this.type==ct.MultilineText){const u=[this.origin.copy(),this.origin.copy()];return this._bbox_cache=u,u}else throw new Error("Unreachable, unknown diagram type : "+this.type)}transform(t){let n=this.copy_if_not_mutable();n._bbox_cache=void 0;for(let s=0;s<n.children.length;s++)n.children[s]=n.children[s].transform(t);return n.path!=null&&(n.path=n.path.transform(t)),n.origin=t(n.origin),n}translate(t){const n=this._bbox_cache,s=this.transform(ks.translate(t));return n!=null&&(s._bbox_cache=n.map(l=>ks.translate(t)(l))),s}position(t=new Vt(0,0)){let n=t.sub(this.origin);return this.translate(n)}rotate(t,n=void 0){return n==null&&(n=this.origin),this.transform(ks.rotate(t,n))}scale(t,n){return n==null&&(n=this.origin),typeof t=="number"&&(t=new Vt(t,t)),this.transform(ks.scale(t,n))}scaletext(t){return this.apply_recursive(n=>{switch(n.type){case ct.Text:{let s=parseFloat(n.textdata["font-size"]||$d),l=n.copy_if_not_mutable();return l.textdata["font-size"]=(s*t).toString(),l}case ct.MultilineText:{let s=n.copy_if_not_mutable();return s.multilinedata["scale-factor"]=(s.multilinedata["scale-factor"]||1)*t,s}default:return n}})}skewX(t,n){return n==null&&(n=this.origin),this.transform(ks.skewX(t,n.y))}skewY(t,n){return n==null&&(n=this.origin),this.transform(ks.skewY(t,n.x))}reflect_over_point(t){return this.transform(ks.reflect_over_point(t))}reflect_over_line(t,n){return this.transform(ks.reflect_over_line(t,n))}reflect(t,n){if(t==null&&n==null)return this.reflect_over_point(this.origin);if(t!=null&&n==null)return this.reflect_over_point(t);if(t!=null&&n!=null)return this.reflect_over_line(t,n);throw new Error("Unreachable")}vflip(t){return t==null&&(t=this.origin.y),this.reflect(new Vt(0,t),new Vt(1,t))}hflip(t){return t==null&&(t=this.origin.x),this.reflect(new Vt(t,0),new Vt(t,1))}get_anchor(t){let[n,s]=this.bounding_box(),l=n.x,u=n.y,f=s.x,g=s.y,p=(l+f)/2,m=(u+g)/2;switch(t){case"top-left":return new Vt(l,g);case"top-center":return new Vt(p,g);case"top-right":return new Vt(f,g);case"center-left":return new Vt(l,m);case"center-center":return new Vt(p,m);case"center-right":return new Vt(f,m);case"bottom-left":return new Vt(l,u);case"bottom-center":return new Vt(p,u);case"bottom-right":return new Vt(f,u);default:return console.error("Unknown anchor "+t),new Vt(p,m)}}move_origin(t){let n=this.copy_if_not_mutable();return t instanceof Vt?n.origin=t:n.origin=n.get_anchor(t),n}__move_origin_text(t){let n=this.copy_if_not_mutable(),s=m1(t);return n.textdata["text-anchor"]=s["text-anchor"],n.textdata.dy=s.dy,n}move_origin_text(t){let n=this.copy_if_not_mutable();if(this.type==ct.Text||this.type==ct.MultilineText)n=n.__move_origin_text(t);else if(this.type==ct.Diagram)for(let s=0;s<n.children.length;s++)n.children[s]=n.children[s].move_origin_text(t);return n}path_length(){if(this.type==ct.Diagram){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].path_length();return t}else if(this.type==ct.Curve||this.type==ct.Polygon){if(this.path==null)throw new Error(this.type+" must have a path");return this.path.length()}else throw new Error("Unreachable, unknown diagram type : "+this.type)}reverse_path(){var t;let n=this.copy_if_not_mutable();return n.path&&(n.path=(t=n.path)===null||t===void 0?void 0:t.reverse()),n}parametric_point(t,n){if(this.type==ct.Diagram){let s=[],l=0;for(let g=0;g<this.children.length;g++)l+=this.children[g].path_length(),s.push(l);let u=l,f=s.map(g=>g/u);for(let g=0;g<f.length;g++)if(t<=f[g]){let p=g,m=g==0?0:f[g-1],b=(t-m)/(f[g]-m);return this.children[p].parametric_point(b)}throw Error("Unreachable")}else if(this.type==ct.Curve){if(this.path==null)throw new Error(this.type+" must have a path");return this.path.parametric_point(t,!1,n)}else if(this.type==ct.Polygon){if(this.path==null)throw new Error(this.type+" must have a path");return this.path.parametric_point(t,!0,n)}else throw new Error("Unreachable, unknown diagram type : "+this.type)}debug_bbox(){let t=f=>f.fill("none").stroke("gray").strokedasharray([5,5]),[n,s]=this.bounding_box(),l=Ys([new Vt(n.x,n.y),new Vt(s.x,n.y),new Vt(s.x,s.y),new Vt(n.x,s.y)]).apply(t),u=Xs("+").position(this.origin);return l.combine(u)}debug(t=!0){let n=l=>l.fill("none").stroke("red").strokedasharray([5,5]),s=l=>{let u=l.textfill("white").textstroke("white").textstrokewidth(5),f=l.fill("black");return u.combine(f)};if(this.type==ct.Diagram)return this.debug_bbox();if(this.type==ct.Text)return nr(this.origin);if(this.type==ct.Polygon||this.type==ct.Curve||this.type==ct.Image){let l=this.type==ct.Polygon||ct.Image?Ys:on,u=this.debug_bbox();if(this.path==null)throw new Error(this.type+" must have a path");let f=l(this.path.points).apply(n);if(t==!1)return u.combine(f);let g=this.path.points,p=[],m,[b,E]=this.bounding_box(),T=Math.min(E.x-b.x,E.y-b.y)/10;for(let M=0;M<g.length;M++)(m==null?1/0:g[M].sub(m).length())<T||(p.push(Xs(M.toString()).position(g[M]).apply(s)),m=g[M]);return u.combine(f,...p)}else throw new Error("Unreachable, unknown diagram type : "+this.type)}is_empty(){return this.contain_tag(Ne.EMPTY)}};class Ka{constructor(t){this.points=t,this.mutable=!1}copy(){let t=this.points.map(n=>new Vt(n.x,n.y));return new Ka(t)}copy_if_not_mutable(){return this.mutable?this:this.copy()}reverse(){let t=this.copy_if_not_mutable();return t.points=t.points.reverse(),t}length(){let t=0;for(let n=1;n<this.points.length;n++)t+=this.points[n].sub(this.points[n-1]).length();return t}add_points(t){let n=this.copy_if_not_mutable();return n.points=n.points.concat(t),n}parametric_point(t,n=!1,s){let l=this.points;if(n&&(l=this.points.concat(this.points[0])),s==null){if(t<0||t>1)throw Error("t must be between 0 and 1");let u=[],f=0;for(let m=1;m<l.length;m++)f+=l[m].sub(l[m-1]).length(),u.push(f);let g=f,p=u.map(m=>m/g);for(let m=0;m<p.length;m++)if(t<=p[m]){let b=m,E=m==0?0:p[m-1],T=(t-E)/(p[m]-E);return this.parametric_point(T,n,b)}throw Error("Unreachable")}else{if(s<0||s>l.length-1)throw Error("segment_index must be between 0 and n-1");let u=l[s],g=l[s+1].sub(u);return u.add(g.scale(t))}}transform(t){let n=this.copy_if_not_mutable();for(let s=0;s<n.points.length;s++)n.points[s]=t(n.points[s]);return n}}function Xt(...a){if(a.length==0)return nr();let t=a.map(l=>l.copy_if_not_mutable()),n=!0;for(let l=0;l<t.length;l++)if(!t[l].mutable){n=!1;break}let s=new Pc(ct.Diagram,{children:t});return s.mutable=n,s.move_origin(a[0].origin)}function on(a){let t=new Ka(a);return new Pc(ct.Curve,{path:t})}function qn(a,t){return on([a,t]).append_tags(Ne.LINE)}function Ys(a){g1(a.length>=3,"Polygon must have at least 3 points");let t=new Ka(a);return new Pc(ct.Polygon,{path:t})}function nr(a=F(0,0)){return on([a]).append_tags(Ne.EMPTY)}function Xs(a){return new Pc(ct.Text,{textdata:{text:a,"font-size":$d},path:new Ka([new Vt(0,0)])})}function Xe(a){return a*Math.PI/180}function p1(a){return a*180/Math.PI}function _1(a,t,n=100){let s=[],l=(t-a)/(n-1);for(let u=0;u<n;u++)s.push(a+l*u);return s}function md(a,t,n=1){if(n==0)return[];if(Math.floor((t-a)/n)<=0)return[];let l=[];if(n>0)for(let u=a;u<t;u+=n)l.push(u);else for(let u=a;u>t;u+=n)l.push(u);return l}function bo(a){let t=a;return typeof t=="number"?[t,t,t,t]:Array.isArray(t)?t.length===1?[t[0],t[0],t[0],t[0]]:t.length===2?[t[0],t[1],t[0],t[1]]:t.length===3?[t[0],t[1],t[2],t[1]]:t.length>=4?[t[0],t[1],t[2],t[3]]:[0,0,0,0]:[0,0,0,0]}const Mi={blue:"#1f77b4",lightblue:"#aec7e8",orange:"#ff7f0e",lightorange:"#ffbb78",green:"#2ca02c",lightgreen:"#98df8a",red:"#d62728",lightred:"#ff9896",purple:"#9467bd",lightpurple:"#c5b0d5",brown:"#8c564b",lightbrown:"#c49c94",pink:"#e377c2",lightpink:"#f7b6d2",grey:"#7f7f7f",lightgrey:"#c7c7c7",gray:"#7f7f7f",lightgray:"#c7c7c7",olive:"#bcbd22",lightolive:"#dbdb8d",cyan:"#17becf",lightcyan:"#9edae5"};function Oi(a,t){var n;return(n=t[a])!==null&&n!==void 0?n:a}const Lv={A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:"",J:"",K:"",L:"",M:"",N:"",O:"",P:"",Q:"",R:"",S:"",T:"",U:"",V:"",W:"",X:"",Y:"",Z:"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};Object.fromEntries(Object.entries(Lv).map(([a,t])=>[t,a]));const dy={"\\alpha":"","\\beta":"","\\gamma":"","\\delta":"","\\epsilon":"","\\zeta":"","\\eta":"","\\theta":"","\\iota":"","\\kappa":"","\\lambda":"","\\mu":"","\\nu":"","\\xi":"","\\omicron":"","\\pi":"","\\rho":"","\\sigma":"","\\tau":"","\\upsilon":"","\\phi":"","\\chi":"","\\psi":"","\\omega":"","\\vartheta":"","\\varchi":"","\\varphi":"","\\varepsilon":"","\\varrho":"","\\varsigma":""},gy={textfractionsolidus:"",leftrightsquigarrow:"",textpertenthousand:"",blacktriangleright:"",blacktriangledown:"",blacktriangleleft:"",twoheadrightarrow:"",leftrightharpoons:"",rightleftharpoons:"",textreferencemark:"",circlearrowright:"",rightrightarrows:"",vartriangleright:"",textordmasculine:"",textvisiblespace:"",twoheadleftarrow:"",downharpoonright:"",ntrianglerighteq:"",rightharpoondown:"",textperthousand:"",leftrightarrows:"",textmusicalnote:"",nleftrightarrow:"",rightleftarrows:"",bigtriangledown:"",textordfeminine:"",ntrianglelefteq:"",rightthreetimes:"",trianglerighteq:"",vartriangleleft:"",rightsquigarrow:"",downharpoonleft:"",curvearrowright:"",circlearrowleft:"",leftharpoondown:"",nLeftrightarrow:"",curvearrowleft:"",guilsinglright:"",leftthreetimes:"",leftrightarrow:"",rightharpoonup:"",guillemotright:"",downdownarrows:"",hookrightarrow:"",dashrightarrow:"",leftleftarrows:"",trianglelefteq:"",ntriangleright:"",doublebarwedge:"",upharpoonright:"",rightarrowtail:"",looparrowright:"",Leftrightarrow:"",sphericalangle:"",divideontimes:"",measuredangle:"",blacktriangle:"",ntriangleleft:"",mathchar1356:"",texttrademark:"",mathchar2208:"",triangleright:"",leftarrowtail:"",guilsinglleft:"",upharpoonleft:"","mathbb{gamma}":"",fallingdotseq:"",looparrowleft:"",textbrokenbar:"",hookleftarrow:"",smallsetminus:"",dashleftarrow:"",guillemotleft:"",leftharpoonup:"","mathbb{Gamma}":"",bigtriangleup:"",textcircledP:"",risingdotseq:"",triangleleft:"",mathsterling:"",textcurrency:"",triangledown:"",blacklozenge:"","sfrac{5}{6}":"",preccurlyeq:"",Rrightarrow:"",circledcirc:"",nRightarrow:"","sfrac{3}{8}":"","sfrac{1}{3}":"","sfrac{2}{5}":"",vartriangle:"",Updownarrow:"",nrightarrow:"","sfrac{1}{2}":"","sfrac{3}{5}":"",succcurlyeq:"","sfrac{4}{5}":"",diamondsuit:"","sfrac{1}{6}":"",curlyeqsucc:"",blacksquare:"",curlyeqprec:"","sfrac{1}{8}":"","sfrac{7}{8}":"","sfrac{1}{5}":"","sfrac{2}{3}":"",updownarrow:"",backepsilon:"",circleddash:"",eqslantless:"","sfrac{3}{4}":"","sfrac{5}{8}":"","sfrac{1}{4}":"","mathbb{Pi}":"","mathcal{M}":"","mathcal{o}	":"","mathcal{O}	":"",nsupseteqq:"","mathcal{B}":"",textrecipe:"",nsubseteqq:"",subsetneqq:"","mathcal{I}":"",upuparrows:"","mathcal{e}":"","mathcal{L}":"",nleftarrow:"","mathcal{H}":"","mathcal{E}":"",eqslantgtr:"",curlywedge:"",varepsilon:"",supsetneqq:"",rightarrow:"","mathcal{R}":"",sqsubseteq:"","mathcal{g}":"",sqsupseteq:"",complement:"",Rightarrow:"",gtreqqless:"",lesseqqgtr:"",circledast:"",nLeftarrow:"",Lleftarrow:"",varnothing:"","mathcal{N}":"",Leftarrow:"",gvertneqq:"","mathbb{C}":"",supsetneq:"",leftarrow:"",nleqslant:"","mathbb{Q}":"","mathbb{Z}":"",llbracket:"","mathbb{H}":"",spadesuit:"","mathit{o}":"","mathbb{P}":"",rrbracket:"",supseteqq:"",copyright:"","textsc{k}":"",gtreqless:"","mathbb{j}":"",pitchfork:"",estimated:"",ngeqslant:"","mathbb{e}":"",therefore:"",triangleq:"",varpropto:"",subsetneq:"",heartsuit:"","mathbb{d}":"",lvertneqq:"",checkmark:"",nparallel:"","mathbb{R}":"",lesseqgtr:"",downarrow:"","mathbb{D}":"","mathbb{i}":"",backsimeq:"","mathbb{N}":"",Downarrow:"",subseteqq:"",setminus:"",succnsim:"",doteqdot:"",clubsuit:"",emptyset:"",sqsupset:"","fbox{~~}":"",curlyvee:"",varkappa:"",llcorner:"",varsigma:"",approxeq:"",backcong:"",supseteq:"",circledS:"",circledR:"",textcent:"",urcorner:"",lrcorner:"",boxminus:"",texteuro:"",vartheta:"",barwedge:"","ding{86}":"",sqsubset:"",subseteq:"",intercal:"","ding{73}":"",ulcorner:"",recorder:"",precnsim:"",parallel:"",boxtimes:"","ding{55}":"",multimap:"",maltese:"",nearrow:"",swarrow:"",lozenge:"","sqrt[3]":"",succsim:"",dotplus:"","tilde{}":"~","check{}":"",lessgtr:"",Upsilon:"",Cdprime:"",gtrless:"",backsim:"",nexists:"",searrow:"",lessdot:"",boxplus:"",upsilon:"",epsilon:"",diamond:"",bigstar:"",ddagger:"",cdprime:"",Uparrow:"","sqrt[4]":"",between:"",sqangle:"",digamma:"",uparrow:"",nwarrow:"",precsim:"","breve{}":"",because:"",bigcirc:"","acute{}":"","grave{}":"`",lesssim:"",partial:"",natural:"",supset:"",hstrok:"",Tstrok:"",coprod:"",models:"",otimes:"",degree:"",gtrdot:"",preceq:"",Lambda:"",lambda:"",cprime:"",varrho:"",Bumpeq:"",hybull:"",lmidot:"",nvdash:"",lbrace:"{",bullet:"",varphi:"",bumpeq:"","ddot{}":"",Lmidot:"",Cprime:"",female:"",rtimes:"",gtrsim:"",mapsto:"",daleth:"",square:"",nVDash:"",rangle:"",tstrok:"",oslash:"",ltimes:"",lfloor:"",marker:"",Subset:"",Vvdash:"",propto:"",Hstrok:"",dlcrop:"",forall:"",nVdash:"",Supset:"",langle:"",ominus:"",rfloor:"",circeq:"",eqcirc:"",drcrop:"",veebar:"",ulcrop:"",nvDash:"",urcrop:"",exists:"",approx:"",dagger:"",boxdot:"",succeq:"",bowtie:"",subset:"",notin:"",Sigma:"",Omega:"",nabla:"",colon:":",boxHu:"",boxHd:"",aleph:"",gnsim:"",boxHU:"",boxHD:"",equiv:"",lneqq:"",alpha:"",amalg:"",boxhU:"",boxhD:"",uplus:"",boxhu:"",kappa:"",sigma:"",boxDL:"",Theta:"",Vdash:"",boxDR:"",boxDl:"",sqcap:"",boxDr:"","bar{}":"",dashv:"",vDash:"",boxdl:"",boxVl:"",boxVh:"",boxVr:"",boxdr:"",boxdL:"",boxVL:"",boxVH:"",boxVR:"",boxdR:"",theta:"",lhblk:"",uhblk:"",ldotp:".",ldots:"",boxvL:"",boxvH:"",boxvR:"",boxvl:"",boxvh:"",boxvr:"",Delta:"",boxUR:"",boxUL:"",oplus:"",boxUr:"",boxUl:"",doteq:"",happy:"",varpi:"",smile:"",boxul:"",simeq:"",boxuR:"",boxuL:"",boxhd:"",gimel:"",Gamma:"",lnsim:"",sqcup:"",omega:"",sharp:"",times:"",block:"","hat{}":"^",wedge:"",vdash:"",angle:"",infty:"",gamma:"",asymp:"",rceil:"","dot{}":"",lceil:"",delta:"",gneqq:"",frown:"",phone:"",vdots:"",boxr:"","k{i}":"","`{I}":"",perp:"",'"{o}':"","={I}":"","`{a}":"","v{T}":"",surd:"","H{O}":"",vert:"|","k{I}":"",'"{y}':"",'"{O}':"","u{u}":"","u{G}":"",".{E}":"",".{z}":"","v{t}":"",prec:"","H{o}":"",mldr:"",cong:"",".{e}":"",star:"*",".{Z}":"",geqq:"",cdot:"",cdots:"","`{U}":"","v{L}":"","c{s}":"","~{A}":"",Vert:"","k{e}":"",lnot:"",leqq:"",beta:"",beth:"","~{n}":"","u{i}":"","c{S}":"","c{N}":"","H{u}":"","v{n}":"","={U}":"","~{O}":"","v{E}":"","H{U}":"","v{N}":"",prod:"","v{s}":"",'"{U}':"","c{n}":"","k{U}":"","c{R}":"","~{o}":"","v{e}":"","v{S}":"","u{A}":"",circ:"",'"{u}':"",flat:"","v{z}":"","r{U}":"","`{O}":"","={u}":"",oint:"","c{K}":"","k{u}":"","not<":"","not>":"","`{o}":"",'"{I}':"","v{D}":"",".{G}":"","r{u}":"","not=":"","`{u}":"","v{c}":"","c{k}":"",".{g}":"",odot:"","`{e}":"","c{T}":"","v{d}":"",'"{e}':"","v{R}":"","k{a}":"",nldr:"","`{A}":"","~{N}":"",nmid:"",".{C}":"",zeta:"","~{u}":"","`{E}":"","~{a}":"","c{t}":"","={o}":"","v{r}":"","={A}":"",".{c}":"","~{U}":"","k{A}":"",'"{a}':"","u{U}":"",iota:"","={O}":"","c{C}":"",gneq:"",boxH:"",hbar:"",'"{A}':"",boxv:"",boxh:"",male:"",sqrt:"",succ:"","c{c}":"","v{l}":"","u{a}":"","v{Z}":"","c{G}":"","v{C}":"",lneq:"","{E}":"","={a}":"","c{l}":"","={E}":"",boxV:"","u{g}":"","u{I}":"","c{L}":"","k{E}":"",".{I}":"","~{I}":"","c{r}":"","{Y}":"","={e}":"",leq:"",Cup:"",Psi:"",neq:"","k{}":"","={}":"","H{}":"",cup:"",geq:"",mho:"",Dzh:"",cap:"",bot:"",psi:"",chi:"","c{}":"",Phi:"",ast:"*",ell:"",top:"",lll:"",tau:"",Cap:"",sad:"",iff:"",eta:"",eth:"","d{":"	",rho:"",dzh:"",div:"",phi:"",Rsh:"",vee:"","b{}":"","t{":"	",int:"",sim:"","r{}":"",Lsh:"",yen:"",ggg:"",mid:"",sum:"",neg:"",Dz:"",Re:"",oe:"",DH:"",ll:"",ng:"",wr:"",wp:"","=I":"",":)":"",":(":"",AE:"",AA:"",ss:"",dz:"",ae:"",aa:"",th:"",to:"",Pi:"",mp:"",Im:"",pm:"",pi:"",'"I':"",in:"",ni:"",ne:"",TH:"",Xi:"",nu:"",NG:"",":G":"",xi:"",OE:"",gg:"",DJ:"","=e":"","=E":"",mu:"",dj:"",S:"",P:"",O:"",L:"",o:"",l:"",h:"",i:"","'{Y}":"","'{y}":"","'{L}":"","'{e}":"","'{l}":"","'{s}":"","'{z}":"","'{E}":"","'{S}":"","'{Z}":"","'{R}":"","'{A}":"","'{N}":"","'{I}":"","'{n}":"","'{c}":"","'{u}":"","'{C}":"","'{o}":"","'{a}":"","'{O}":"","'{g}":"","'{r}":"","'{U}":"","'G":"","'C":"","'K":"","'k":"","'c":"","'g":""};function y1(a){a=a;for(let t in dy)a=a.replaceAll(t,dy[t]);for(let t in gy)a=a.replaceAll("\\"+t,gy[t]);return a}function Gc(a){return[...y1(a)].map(t=>Lv[t]||t).join("")}const v1=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Zd={fill:"none",stroke:"black","stroke-width":"1","stroke-linecap":"butt","stroke-dasharray":"none","stroke-linejoin":"round","vector-effect":"non-scaling-stroke",opacity:"1"};Object.assign({},Zd);const Jd={fill:"black",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-dasharray":"none","stroke-linejoin":"round","vector-effect":"non-scaling-stroke",opacity:"1"};Object.assign({},Jd);const Wd={text:"","font-family":"Latin Modern Math, sans-serif","font-size":$d,"font-weight":"normal","text-anchor":"middle",dy:"0.25em",angle:"0","font-style":"normal","font-scale":"auto"};Object.assign({},Wd);function b1(a,t,n,s=1,l){let u=Object.assign(Object.assign({},Zd),n.style);u.fill=Oi(u.fill,Mi),u.stroke=Oi(u.stroke,Mi);let f=document.createElementNS("http://www.w3.org/2000/svg","polygon");for(let p in u)f.style[p]=u[p];if(l!=null&&f.setAttribute("_dg_tag",l),t.appendChild(f),n.path!=null)for(let p=0;p<n.path.points.length;p++){let m=n.path.points[p];var g=a.createSVGPoint();g.x=m.x*s,g.y=-m.y*s,f.points.appendItem(g)}n.tags&&f.setAttribute("_dg_elem_tag",n.tags.join(" "))}function E1(a,t,n,s,l){let u=Object.assign(Object.assign({},Zd),n.style);u.fill="none",u.stroke=Oi(u.stroke,Mi);let f=document.createElementNS("http://www.w3.org/2000/svg","polyline");for(let p in u)f.style[p]=u[p];if(l!=null&&f.setAttribute("_dg_tag",l),t.appendChild(f),n.path!=null)for(let p=0;p<n.path.points.length;p++){let m=n.path.points[p];var g=a.createSVGPoint();g.x=m.x*s,g.y=-m.y*s,f.points.appendItem(g)}n.tags&&f.setAttribute("_dg_elem_tag",n.tags.join(" "))}function T1(a){return/^data:image\/(png|jpeg|jpg|gif|svg\+xml);base64,/.test(a)}const pd=new Map;function A1(a,t){if(T1(t)){a.setAttribute("href",t),a.setAttribute("xlink:href",t);return}if(pd.has(t)){const u=pd.get(t);if(!u)return;a.setAttribute("href",u),a.setAttribute("xlink:href",u);return}let n=document.createElement("canvas"),s=n.getContext("2d"),l=new Image;l.crossOrigin="anonymous",l.onload=()=>{n.height=l.height,n.width=l.width,s?.drawImage(l,0,0);const u=n.toDataURL("image/png");a.setAttribute("href",u),a.setAttribute("xlink:href",u),pd.set(t,u),n.remove()},l.src=t}function S1(a,t,n,s,l){let u=document.createElementNS("http://www.w3.org/2000/svg","image");if(u.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.imgdata.src==null||t.path==null||t.path.points.length!=4)return;let f=t.path.points[1].sub(t.path.points[0]).length()*s,g=t.path.points[2].sub(t.path.points[1]).length()*s,p=t.path.points[1].sub(t.path.points[0]).normalize(),m=t.path.points[3].sub(t.path.points[0]).normalize(),b=p.x,E=-p.y,T=-m.x,M=m.y,x=t.path.points[3].x*s,I=-t.path.points[3].y*s;n?A1(u,t.imgdata.src):u.setAttribute("href",t.imgdata.src),u.setAttribute("width",f.toString()),u.setAttribute("height",g.toString()),u.setAttribute("transform",`matrix(${b} ${E} ${T} ${M} ${x} ${I})`),u.setAttribute("preserveAspectRatio","none"),l!=null&&u.setAttribute("_dg_tag",l),a.appendChild(u),t.tags&&u.setAttribute("_dg_elem_tag",t.tags.join(" "))}function w1(a,t,n,s,l){var u,f,g,p;let m=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),b=document.createElement("div");if(t.foreignobjdata.innerHTML==null||t.path==null||t.path.points.length!=4)return;let E=t.path.points[1].sub(t.path.points[0]).length(),T=t.path.points[2].sub(t.path.points[1]).length(),M=t.foreignobjdata,x=E/((u=M["original-width"])!==null&&u!==void 0?u:1)*((f=M["scale-factor"])!==null&&f!==void 0?f:1),I=T/((g=M["original-height"])!==null&&g!==void 0?g:1)*((p=M["scale-factor"])!==null&&p!==void 0?p:1),U=t.path.points[1].sub(t.path.points[0]).normalize(),rt=t.path.points[3].sub(t.path.points[0]).normalize(),X=U.x,K=-U.y,at=-rt.x,it=rt.y,et=t.path.points[3].x,w=-t.path.points[3].y;const R=s;m.setAttribute("width",E.toString()),m.setAttribute("height",T.toString()),m.setAttribute("transform",`matrix(${X*x} ${K*x} ${at*I} ${it*I} ${et*R} ${w*R})`),m.style.overflow="visible",b.style.textWrap="nowrap",b.style.transformOrigin="top left",b.innerHTML=t.foreignobjdata.innerHTML,l!=null&&m.setAttribute("_dg_tag",l),m.appendChild(b),a.appendChild(m),t.tags&&m.setAttribute("_dg_elem_tag",t.tags.join(" "))}function Rd(a,t){if(a.type==t)return[a];if(a.type==ct.Diagram){let n=[];for(let s of a.children)n=n.concat(Rd(s,t));return n}else return[]}function Pn(a,t){const n=bo(t??0);let s=a.getBBox(),l=a.width.baseVal.value-n[1]-n[3],u=a.height.baseVal.value-n[0]-n[2];return Math.max(s.width/l,s.height/u)}function R1(a,t,n,s,l){for(let u of t){let f=Object.assign(Object.assign({},Jd),u.style);f.fill=Oi(f.fill,Mi),f.stroke=Oi(f.stroke,Mi);let g=Object.assign(Object.assign({},Wd),u.textdata);if(u.path==null)throw new Error("Text must have a path");let p=document.createElementNS("http://www.w3.org/2000/svg","text"),m=u.path.points[0].x,b=-u.path.points[0].y,E=p1(parseFloat(g.angle)),T=g["font-scale"]=="auto"?n:parseFloat(g["font-scale"])*s,M=parseFloat(g["font-size"])*T;p.setAttribute("font-family",g["font-family"]),p.setAttribute("font-style",g["font-style"]),p.setAttribute("font-size",M.toString()),p.setAttribute("font-weight",g["font-weight"]),p.setAttribute("text-anchor",g["text-anchor"]),p.setAttribute("dy",g.dy),p.setAttribute("transform",`translate(${m} ${b}) rotate(${E}) `),l!=null&&p.setAttribute("_dg_tag",l),p.setAttribute("_x",m.toString()),p.setAttribute("_y",b.toString()),p.setAttribute("_angle",E.toString());for(let I in f)p.style[I]=f[I];let x=g.text;u.tags.includes(Ne.TEXTVAR)&&!tg(x)&&(x=Gc(x)),p.innerHTML=x,a.appendChild(p),u.tags&&p.setAttribute("_dg_elem_tag",u.tags.join(" "))}}function x1(a,t,n,s,l){var u,f,g,p,m;for(let b of t){if(b.path==null)throw new Error("Text must have a path");let E=document.createElementNS("http://www.w3.org/2000/svg","text"),T=b.path.points[0].x,M=-b.path.points[0].y,x=0,I=Object.assign(Object.assign(Object.assign({},Wd),{dy:"0","text-anchor":"start"}),b.textdata),U=I["font-size"];if(((u=b.multilinedata)===null||u===void 0?void 0:u.content)==null)throw new Error("MultilineText must have multilinedata");let rt=(f=b.multilinedata["scale-factor"])!==null&&f!==void 0?f:1,X=!0;for(let at of b.multilinedata.content){let it=document.createElementNS("http://www.w3.org/2000/svg","tspan"),et=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Jd),I),{dy:"0",dx:"0"}),{"font-size":U}),at.style);if(X){it.setAttribute("x","0");let D=(g=I.dy)!==null&&g!==void 0?g:"0";et.dy=D,X=!1}let w=et["font-scale"]=="auto"?n:parseFloat(et["font-scale"])*s,R=(p=et["font-size-scale-factor"])!==null&&p!==void 0?p:1,C=parseFloat(et["font-size"])*w*rt*R;et.tag&&it.setAttribute("_dg_tag",et.tag);let V=[];et["text-decoration@underline"]&&V.push("underline"),et["text-decoration@line-through"]&&V.push("line-through"),it.style.whiteSpace="pre",it.setAttribute("dx",et.dx),it.setAttribute("dy",et.dy),it.setAttribute("font-style",et["font-style"]),it.setAttribute("font-family",et["font-family"]),it.setAttribute("font-size",C.toString()),it.setAttribute("font-weight",et["font-weight"]),it.style.fill=Oi(et.fill,Mi),it.style.stroke=Oi(et.stroke,Mi),it.style.opacity=et.opacity;let N="";if(et["baseline-shift"])if(v1){const[D,Rt]=C1(et["baseline-shift"]);N=Rt,it.setAttribute("dy",D)}else it.setAttribute("baseline-shift",et["baseline-shift"]);V.length>0&&(it.style.textDecoration=V.join(" "));let z=at.text;if(z==`
`){it.innerHTML="&#8203;",it.setAttribute("x","0");const D=(m=at.style.dy)!==null&&m!==void 0?m:"1em";it.setAttribute("dy",D)}else et.textvar&&(z=Gc(z)),it.innerHTML=z;if(E.appendChild(it),N){let D=it.cloneNode(!0);D.setAttribute("dy",N),D.innerHTML="&#8203;",E.appendChild(D)}}const K=s;E.setAttribute("dy",I.dy),E.setAttribute("text-anchor",I["text-anchor"]),E.setAttribute("transform",`translate(${T*K} ${M*K}) rotate(${x}) `),l!=null&&E.setAttribute("_dg_tag",l),a.appendChild(E),b.tags&&E.setAttribute("_dg_elem_tag",b.tags.join(" "))}}function C1(a){switch(a){case"super":return["-0.6em","0.6em"];case"-20%":return["0.2em","-0.2em"];default:return["0","0"]}}function Gn(a,t,n,s=!0,l=!1,u,f=1,g){if(n.type==ct.Polygon)b1(a,t,n,f,g);else if(n.type==ct.Curve)E1(a,t,n,f,g);else if(!(n.type==ct.Text||n.type==ct.MultilineText))if(n.type==ct.Image)S1(t,n,l,f,g);else if(n.type==ct.ForeignObject)w1(t,n,l,f,g);else if(n.type==ct.Diagram)for(let p of n.children)Gn(a,t,p,!1,l,void 0,f,g);else console.warn("Unreachable, unknown diagram type : "+n.type);if(s){u==null&&(u=Pn(a));let p=Rd(n,ct.Text),m=Rd(n,ct.MultilineText);R1(t,p,u??1,f,g),x1(t,m,u??1,f,g)}}function Fc(a,t,n=!0,s=!0,l=!0){D1(a,t,{set_html_attribute:n,render_text:s,clear_svg:l})}function D1(a,t,n={}){var s,l,u,f,g,p,m,b;const E=(s=n.set_html_attribute)!==null&&s!==void 0?s:!0,T=(l=n.render_text)!==null&&l!==void 0?l:!0,M=(u=n.clear_svg)!==null&&u!==void 0?u:!0,x=(f=n.embed_image)!==null&&f!==void 0?f:!1,I=(g=n.global_scale_factor)!==null&&g!==void 0?g:1;let U;for(let X in a.children){let K=a.children[X];if(K instanceof SVGSVGElement&&K.getAttribute("meta")=="diagram_svg"){U=K;break}}U==null&&(U=document.createElementNS("http://www.w3.org/2000/svg","svg"),U.setAttribute("meta","diagram_svg"),U.setAttribute("width","100%"),U.setAttribute("height","100%"),a.appendChild(U)),V1(a,n.filter_strings);let rt;if(n.text_scaling_reference_svg&&(n.text_scaling_reference_padding=(m=(p=n.text_scaling_reference_padding)!==null&&p!==void 0?p:n.padding)!==null&&m!==void 0?m:10,n.text_scaling_reference_padding=bo(n.text_scaling_reference_padding),rt=Pn(n.text_scaling_reference_svg,n.text_scaling_reference_padding)),M&&(U.innerHTML=""),Gn(U,U,t,T,x,rt,I),E){const X=bo((b=n.padding)!==null&&b!==void 0?b:10);let K=U.getBBox(),at=U.width.baseVal.value-X[1]-X[3],it=U.height.baseVal.value-X[0]-X[2],et=Math.max(K.width/at,K.height/it),w=X.map(R=>R*et);K.x-=w[3],K.y-=w[0],K.width+=w[1]+w[3],K.height+=w[0]+w[2],U.setAttribute("viewBox",`${K.x} ${K.y} ${K.width} ${K.height}`),U.setAttribute("preserveAspectRatio","xMidYMid meet"),a.style.overflow="visible"}if(n.background_color){let X=U.getBBox();U.viewBox.baseVal.width!==0&&(X=U.viewBox.baseVal);let K=document.createElementNS("http://www.w3.org/2000/svg","rect");K.setAttribute("x",X.x.toString()),K.setAttribute("y",X.y.toString()),K.setAttribute("width",X.width.toString()),K.setAttribute("height",X.height.toString()),K.style.fill=Oi(n.background_color,Mi),K.style.stroke="none",U.insertBefore(K,U.firstChild)}}function V1(a,t){if(t==null||t.length==0)return;let n=a.querySelector("defs");n==null&&(n=document.createElementNS("http://www.w3.org/2000/svg","defs"),a.insertBefore(n,a.firstChild)),n.innerHTML="";for(let s of t)n.innerHTML+=s}function tg(a){return a.startsWith("$")&&a.endsWith("$")}function zv(a){return a.startsWith("$$")&&a.endsWith("$$")}function N1(a){return zv(a)?a.substring(2,a.length-2):tg(a)?a.substring(1,a.length-1):a}function Vo(a,t){for(let n=0;n<a.children.length;n++){let s=a.children[n];if(s instanceof SVGTextElement){let l=s.innerHTML;if(!tg(l))continue;let u=s.getAttribute("font-size");if(u==null)continue;let f=parseFloat(u),g=t(N1(l),{display:zv(l)}),p=s.getAttribute("_x"),m=s.getAttribute("_y");if(p==null||m==null)continue;let b=s.getAttribute("text-anchor"),E=s.getAttribute("dy");if(b==null||E==null)continue;s.outerHTML=g,s=a.children[n];let T=s.getAttribute("width");if(T==null)continue;let M=parseFloat(T.substring(0,T.length-2)),x=s.getAttribute("height");if(x==null)continue;let I=parseFloat(x.substring(0,x.length-2));const U=2;let rt=M*f/U,X=I*f/U,K=parseFloat(p),at=parseFloat(m);switch(b){case"start":break;case"middle":K-=rt/2;break;case"end":K-=rt;break}switch(E){case"0.75em":break;case"0.25em":at-=X/2;break;case"-0.25em":at-=X;break}s.setAttribute("width",rt.toString()),s.setAttribute("height",X.toString()),s.setAttribute("x",K.toString()),s.setAttribute("y",at.toString())}else s instanceof SVGElement&&Vo(s,t)}}function js(a,t){let n=[F(-a/2,-t/2),F(a/2,-t/2),F(a/2,t/2),F(-a/2,t/2)];return Ys(n)}function M1(a,t){let n=[a,F(t.x,a.y),t,F(a.x,t.y)];return Ys(n)}function O1(a=1){return js(a,a)}function I1(a,t=1){let n=[];for(let s=0;s<a;s++)n.push(F(0,t).rotate(s*2*Math.PI/a));return Ys(n)}function eg(a=1){return I1(50,a).append_tags(Ne.CIRCLE)}function L1(a=1,t=Xe(360)){let n=100,s=[];for(let l=0;l<n;l++)s.push(F(a,0).rotate(l*t/(n-1)));return on(s)}function z1(a,t=1){let n=qn(F(0,0),a).append_tags(Ne.ARROW_LINE),l=Ys([F(0,0),F(-t,t/2),F(-t,-t/2)]).rotate(a.angle()).position(a).append_tags(Ne.ARROW_HEAD);return Xt(n,l)}function my(a,t,n=1){let s=qn(a,t).append_tags(Ne.ARROW_LINE),l=t.sub(a),u=Ys([F(0,0),F(-n,n/2),F(-n,-n/2)]),f=u.rotate(l.angle()).position(t).append_tags(Ne.ARROW_HEAD),g=u.rotate(l.angle()+Math.PI).position(a).append_tags(Ne.ARROW_HEAD);return Xt(s,f,g)}function No(a){return Xs(a).append_tags(Ne.TEXTVAR)}function co(a){let t=a.bounding_box();return[t[1].x-t[0].x,t[1].y-t[0].y]}function U1(a,t="center"){if(a.length==0)return nr();let n=[...a];if(t=="top"){let s=n[0].get_anchor("top-left").y;for(let l=0;l<n.length;l++)n[l]=n[l].translate(F(0,s-n[l].get_anchor("top-left").y));return Xt(...n)}else if(t=="center"){let s=n[0].get_anchor("center-left").y;for(let l=0;l<n.length;l++)n[l]=n[l].translate(F(0,s-n[l].get_anchor("center-left").y));return Xt(...n)}else if(t=="bottom"){let s=n[0].get_anchor("bottom-left").y;for(let l=0;l<n.length;l++)n[l]=n[l].translate(F(0,s-n[l].get_anchor("bottom-left").y));return Xt(...n)}else throw new Error("Unknown vertical alignment : "+t)}function k1(a,t="center"){if(a.length==0)return nr();let n=[...a];if(t=="left"){let s=n[0].get_anchor("top-left").x;for(let l=0;l<n.length;l++)n[l]=n[l].translate(F(s-n[l].get_anchor("top-left").x,0));return Xt(...n)}else if(t=="center"){let s=n[0].get_anchor("top-center").x;for(let l=0;l<n.length;l++)n[l]=n[l].translate(F(s-n[l].get_anchor("top-center").x,0));return Xt(...n)}else if(t=="right"){let s=n[0].get_anchor("top-right").x;for(let l=0;l<n.length;l++)n[l]=n[l].translate(F(s-n[l].get_anchor("top-right").x,0));return Xt(...n)}else throw new Error("Unknown horizontal alignment : "+t)}function B1(a,t=0){if(a.length==0)return nr();let n=[...a],s=[n[0]];for(let l=1;l<n.length;l++){let u=s[l-1],f=n[l],g=u.get_anchor("top-right").x,p=f.get_anchor("top-left").x,m=g-p+t;s.push(f.translate(F(m,0)))}return Xt(...s)}function j1(a,t=0){if(a.length==0)return nr();let n=[...a],s=[n[0]];for(let l=1;l<n.length;l++){let u=s[l-1],f=n[l],g=u.get_anchor("bottom-left").y,p=f.get_anchor("top-left").y,m=g-p-t;s.push(f.translate(F(0,m)))}return Xt(...s)}function Uv(a,t=0,n="center"){return B1(U1(a,n).children,t)}function kv(a,t=0,n="center"){return j1(k1(a,n).children,t)}function H1(a,t,n=0,s=0,l="center",u="left",f=1){if(a.length==0)return nr();let g=[],p=[],m=0;const b=t*f/100;function E(x){let I=Uv(x,s,l);g.push(I),p=[],m=0}for(let x=0;x<a.length;x++){let I=a[x],U=co(I)[0];if(U>t+b){p.length>0&&E(p),p.push(I),E(p);continue}m+s+U>t+b&&E(p),p.push(I),m+=U+s}p.length>0&&E(p);let T=kv(g,n,u),M=[];for(let x=0;x<T.children.length;x++)for(let I=0;I<T.children[x].children.length;I++)M.push(T.children[x].children[I]);return Xt(...M)}const Bv="diagramatics-focusrect",q1="diagramatics-focusable-no-outline";function P1(a,t){return a.toFixed(t).replace(/\.?0+$/,"")}const py=(a,t,n)=>{let s=typeof t=="number"&&n!=null?P1(t,n):t.toString();return`${Gc(a)} = ${s}`};var Bs;(function(a){a.locator="control_svg",a.dnd="dnd_svg",a.custom="custom_int_svg",a.button="button_svg"})(Bs||(Bs={}));var Rc;(function(a){a.DOCUMENT="document",a.SVG="svg"})(Rc||(Rc={}));class G1{constructor(t,n,s,l=Rc.SVG){this.control_container_div=t,this.diagram_outer_svg=n,this.event_target=l,this.inp_variables={},this.inp_setter={},this.display_mode="svg",this.diagram_svg=void 0,this.locator_svg=void 0,this.dnd_svg=void 0,this.custom_svg=void 0,this.button_svg=void 0,this.locatorHandler=void 0,this.dragAndDropHandler=void 0,this.buttonHandler=void 0,this.focus_padding=1,this.global_scale_factor=1,this.draw_function=u=>{},this.display_precision=5,this.intervals={},this.registeredEventListenerRemoveFunctions=[],this.single_int_mode=!1,s!=null&&(this.inp_variables=s)}draw(){var t,n;this.draw_function(this.inp_variables,this.inp_setter),(t=this.locatorHandler)===null||t===void 0||t.setViewBox(),(n=this.dragAndDropHandler)===null||n===void 0||n.setViewBox(),_y(this.custom_svg,this.diagram_svg),_y(this.button_svg,this.diagram_svg)}set(t,n){this.inp_setter[t](n)}get(t){return this.inp_variables[t]}label(t,n,s=py){let l=document.createElement("div");l.classList.add("diagramatics-label"),l.innerHTML=s(t,n,this.display_precision),this.inp_variables[t]=n;const u=g=>{this.inp_variables[t]=g,l.innerHTML=s(t,g,this.display_precision)};this.inp_setter[t]=u;let f=document.createElement("div");f.classList.add("diagramatics-label-container"),f.appendChild(l),this.control_container_div.appendChild(f)}locator_draw(){var t;(t=this.locatorHandler)===null||t===void 0||t.setViewBox()}locator_initial_draw(){var t;(t=this.locatorHandler)===null||t===void 0||t.setViewBox()}drag_and_drop_initial_draw(){this.dnd_initial_draw()}dnd_initial_draw(){var t,n;(t=this.dragAndDropHandler)===null||t===void 0||t.setViewBox(),(n=this.dragAndDropHandler)===null||n===void 0||n.drawSvg()}registerEventListener(t,n,s,l){t.addEventListener(n,s,l);const u=()=>t.removeEventListener(n,s);this.registeredEventListenerRemoveFunctions.push(u)}removeRegisteredEventListener(){this.registeredEventListenerRemoveFunctions.forEach(t=>t()),this.registeredEventListenerRemoveFunctions=[]}get_svg_element(t,n=!1){var s;if(this.diagram_outer_svg==null)throw Error("diagram_outer_svg in Interactive class is undefined");let l;for(let u in this.diagram_outer_svg.children){let f=this.diagram_outer_svg.children[u];f instanceof SVGSVGElement&&f.getAttribute("meta")==t&&(l=f)}return this.single_int_mode&&n&&l!=null&&((s=l.remove)===null||s===void 0||s.call(l),l=void 0),l==null&&(l=document.createElementNS("http://www.w3.org/2000/svg","svg"),l.setAttribute("meta",t),l.setAttribute("width","100%"),l.setAttribute("height","100%"),this.isTargetingDocument()&&(l.style.overflow="visible"),this.diagram_outer_svg.appendChild(l)),l}get_diagram_svg(){let t=this.get_svg_element("diagram_svg");return this.diagram_svg=t,t}isTargetingDocument(){return this.event_target==Rc.DOCUMENT}set_focus_padding(t){this.focus_padding=t,this.dragAndDropHandler&&(this.dragAndDropHandler.focus_padding=t),this.buttonHandler&&(this.buttonHandler.focus_padding=t)}locator(t,n,s,l="blue",u,f=!0,g){if(this.diagram_outer_svg==null)throw Error("diagram_outer_svg in Interactive class is undefined");this.inp_variables[t]=n;let p=this.get_diagram_svg(),m=this.get_svg_element(Bs.locator,!this.locator_svg);if(this.locator_svg=m,this.locatorHandler==null){let x=new vy(m,p,this.global_scale_factor);this.locatorHandler=x;const I=this.isTargetingDocument()?document:this.diagram_outer_svg;this.registerEventListener(I,"mousemove",U=>{x.drag(U)}),this.registerEventListener(I,"mouseup",U=>{x.endDrag(U)}),this.registerEventListener(I,"touchmove",U=>{x.drag(U)}),this.registerEventListener(I,"touchend",U=>{x.endDrag(U)}),this.registerEventListener(I,"touchcancel",U=>{x.endDrag(U)})}const b=(x,I=!0)=>{this.inp_variables[t]=x,g&&I&&g(t,x),I&&this.draw()};this.locatorHandler.registerCallback(t,b);let E=this.locatorHandler.create_locator_circle_pointer_svg(t,s,n,l,f);if(f){let x=E.getElementsByClassName("diagramatics-locator-blink");for(let I=0;I<x.length;I++)this.locatorHandler.addBlinkingCircleOuter(x[I])}this.registerEventListener(E,"mousedown",x=>{this.locatorHandler.startDrag(x,t,E)}),this.registerEventListener(E,"touchstart",x=>{this.locatorHandler.startDrag(x,t,E)});let T;if(u){if(u.type!=ct.Polygon&&u.type!=ct.Curve)throw Error("Track diagram must be a polygon or curve");if(u.path==null)throw Error("diagram {diagtam.type} must have a path");let x=u.path.points;T=I=>{const U=this.global_scale_factor;let rt=yy(I,x);return E.setAttribute("transform",`translate(${rt.x*U},${-rt.y*U})`),rt}}else T=x=>{const I=this.global_scale_factor;return E.setAttribute("transform",`translate(${x.x*I},${-x.y*I})`),x};this.locatorHandler.registerSetter(t,T),this.inp_setter[t]=T;let M=T(n);this.locatorHandler.setPos(t,M)}locator_custom(t,n,s,l,u=!0,f,g){if(this.diagram_outer_svg==null)throw Error("diagram_outer_svg in Interactive class is undefined");this.inp_variables[t]=n;let p=this.get_diagram_svg(),m=this.get_svg_element(Bs.locator,!this.locator_svg);if(this.locator_svg=m,this.locatorHandler==null){let x=new vy(m,p,this.global_scale_factor);this.locatorHandler=x;const I=this.isTargetingDocument()?document:this.diagram_outer_svg;this.registerEventListener(I,"mousemove",U=>{x.drag(U)}),this.registerEventListener(I,"mouseup",U=>{x.endDrag(U)}),this.registerEventListener(I,"touchmove",U=>{x.drag(U)}),this.registerEventListener(I,"touchend",U=>{x.endDrag(U)}),this.registerEventListener(I,"touchcancel",U=>{x.endDrag(U)})}const b=(x,I=!0)=>{this.inp_variables[t]=x,f&&I&&f(t,x),I&&this.draw()};this.locatorHandler.registerCallback(t,b);let E=this.locatorHandler.create_locator_diagram_svg(t,s,u);this.registerEventListener(E,"mousedown",x=>{this.locatorHandler.startDrag(x,t,E)}),this.registerEventListener(E,"touchstart",x=>{this.locatorHandler.startDrag(x,t,E)}),g&&this.registerEventListener(E,"contextmenu",x=>{x.preventDefault(),g(t)});let T;if(l){if(l.type!=ct.Polygon&&l.type!=ct.Curve)throw Error("Track diagram must be a polygon or curve");if(l.path==null)throw Error("diagram {diagtam.type} must have a path");let x=l.path.points;T=I=>{let U=yy(I,x);const rt=this.global_scale_factor;return E.setAttribute("transform",`translate(${U.x*rt},${-U.y*rt})`),U}}else T=x=>{const I=this.global_scale_factor;return E.setAttribute("transform",`translate(${x.x*I},${-x.y*I})`),x};this.locatorHandler.registerSetter(t,T),this.inp_setter[t]=T;let M=T(n);this.locatorHandler.setPos(t,M)}slider(t,n=0,s=100,l=50,u=-1,f=1.5,g=py){u==-1&&(u=(s-n)/100),this.inp_variables[t]=l;let p=document.createElement("div");p.classList.add("diagramatics-label"),p.innerHTML=g(t,l,this.display_precision);const m=(K,at=!0)=>{this.inp_variables[t]=K,p.innerHTML=g(t,K,this.display_precision),at&&this.draw()};let b=F1(m,n,s,l,u);const E=K=>{b.value=K.toString(),m(K,!1)};this.inp_setter[t]=E;let T=(s-n)/u;const M=1e3*f/T;let x=document.createElement("button"),I=document.createElement("div");I.classList.add("diagramatics-slider-playbutton-symbol"),x.appendChild(I),x.classList.add("diagramatics-slider-playbutton"),x.onclick=()=>{this.intervals[t]==null?(x.classList.add("paused"),this.intervals[t]=setInterval(()=>{let K=parseFloat(b.value);K+=u,K=(K-n)%(s-n)+n,b.value=K.toString(),m(K)},M)):(x.classList.remove("paused"),clearInterval(this.intervals[t]),this.intervals[t]=void 0)};let U=document.createElement("div");U.classList.add("diagramatics-slider-leftcontainer"),U.appendChild(document.createElement("br")),U.appendChild(x);let rt=document.createElement("div");rt.classList.add("diagramatics-slider-rightcontainer"),rt.appendChild(p),rt.appendChild(b);let X=document.createElement("div");X.classList.add("diagramatics-slider-container"),X.appendChild(U),X.appendChild(rt),this.control_container_div.appendChild(X)}init_drag_and_drop(){if(this.diagram_outer_svg==null)throw Error("diagram_outer_svg in Interactive class is undefined");let t=this.get_diagram_svg(),n=this.get_svg_element(Bs.dnd,!this.dnd_svg);if(this.dnd_svg=n,this.dragAndDropHandler==null){let s=new X1(n,t,this.global_scale_factor);s.focus_padding=this.focus_padding,this.dragAndDropHandler=s;const l=this.isTargetingDocument()?document:this.diagram_outer_svg;this.registerEventListener(l,"mousemove",u=>{s.drag(u)}),this.registerEventListener(l,"mouseup",u=>{s.endDrag(u)}),this.registerEventListener(l,"touchmove",u=>{s.drag(u)}),this.registerEventListener(l,"touchend",u=>{s.endDrag(u)}),this.registerEventListener(l,"touchcancel",u=>{s.endDrag(u)})}}set_global_scale_factor(t){this.global_scale_factor=t,this.buttonHandler&&(this.buttonHandler.global_scale_factor=t),this.locatorHandler&&(this.locatorHandler.global_scale_factor=t),this.dragAndDropHandler&&(this.dragAndDropHandler.global_scale_factor=t)}dnd_container(t,n,s,l){var u;this.init_drag_and_drop(),(u=this.dragAndDropHandler)===null||u===void 0||u.add_container(t,n,s,l)}dnd_draggable_to_container(t,n,s,l,u){if(this.init_drag_and_drop(),this.dragAndDropHandler==null)throw Error("dragAndDropHandler in Interactive class is undefined");this.inp_variables[t]=n.origin,this.dragAndDropHandler.add_draggable_to_container(t,n,s);const f=(g,p=!0)=>{this.inp_variables[t]=g,l&&l(t,s),p&&this.draw()};this.dragAndDropHandler.registerCallback(t,f),u&&this.dragAndDropHandler.register_clickstart_callback(t,u)}dnd_draggable(t,n,s,l,u){if(this.init_drag_and_drop(),this.dragAndDropHandler==null)throw Error("dragAndDropHandler in Interactive class is undefined");this.inp_variables[t]=n.origin,this.dragAndDropHandler.add_draggable_with_container(t,n,s);const f=(g,p=!0)=>{this.inp_variables[t]=g,l&&l(t,g),p&&this.draw()};this.dragAndDropHandler.registerCallback(t,f),u&&this.dragAndDropHandler.register_clickstart_callback(t,u)}dnd_register_drop_outside_callback(t){var n;this.init_drag_and_drop(),(n=this.dragAndDropHandler)===null||n===void 0||n.register_dropped_outside_callback(t)}dnd_register_move_validation_function(t){var n;this.init_drag_and_drop(),(n=this.dragAndDropHandler)===null||n===void 0||n.register_move_validation_function(t)}dnd_move_to_container(t,n){var s;(s=this.dragAndDropHandler)===null||s===void 0||s.try_move_draggable_to_container(t,n)}get_dnd_data(){var t,n;return(n=(t=this.dragAndDropHandler)===null||t===void 0?void 0:t.getData())!==null&&n!==void 0?n:[]}set_dnd_data(t){var n;(n=this.dragAndDropHandler)===null||n===void 0||n.setData(t)}dnd_reorder_tabindex(t){var n;(n=this.dragAndDropHandler)===null||n===void 0||n.reorder_svg_container_tabindex(t)}get_dnd_container_content_size(t){return this.dragAndDropHandler?this.dragAndDropHandler.get_container_content_size(t):[NaN,NaN]}set_dnd_content_sort(t){this.dragAndDropHandler&&(this.dragAndDropHandler.sort_content=t)}remove_dnd_draggable(t){var n;(n=this.dragAndDropHandler)===null||n===void 0||n.remove_draggable(t)}remove_locator(t){var n;(n=this.locatorHandler)===null||n===void 0||n.remove(t)}remove_button(t){var n;(n=this.buttonHandler)===null||n===void 0||n.remove(t)}custom_object(t,n,s){if(this.diagram_outer_svg==null)throw Error("diagram_outer_svg in Interactive class is undefined");let l=this.get_diagram_svg(),u=this.get_svg_element(Bs.custom,!this.custom_svg),f=document.createElementNS("http://www.w3.org/2000/svg","svg");return Gn(f,f,s,!0,!1,Pn(l),this.global_scale_factor),f.setAttribute("overflow","visible"),f.setAttribute("class",n.join(" ")),f.setAttribute("id",t),u.setAttribute("viewBox",l.getAttribute("viewBox")),u.setAttribute("preserveAspectRatio",l.getAttribute("preserveAspectRatio")),u.style.overflow="visible",u.appendChild(f),this.custom_svg=u,f}custom_object_g(t,n,s){if(this.diagram_outer_svg==null)throw Error("diagram_outer_svg in Interactive class is undefined");let l=this.get_diagram_svg(),u=this.get_svg_element(Bs.custom,!this.custom_svg),f=document.createElementNS("http://www.w3.org/2000/svg","g");return Gn(u,f,s,!0,!1,Pn(l),this.global_scale_factor),f.setAttribute("overflow","visible"),f.setAttribute("class",n.join(" ")),f.setAttribute("id",t),u.setAttribute("viewBox",l.getAttribute("viewBox")),u.setAttribute("preserveAspectRatio",l.getAttribute("preserveAspectRatio")),u.style.overflow="visible",u.appendChild(f),this.custom_svg=u,f}init_button(){if(this.diagram_outer_svg==null)throw Error("diagram_outer_svg in Interactive class is undefined");let t=this.get_diagram_svg(),n=this.get_svg_element(Bs.button,!this.button_svg);if(this.button_svg=n,this.buttonHandler==null){let s=new K1(n,t,this.global_scale_factor);s.focus_padding=this.focus_padding,this.buttonHandler=s}}button_toggle(t,n,s,l=!1,u){if(this.init_button(),this.buttonHandler==null)throw Error("buttonHandler in Interactive class is undefined");this.inp_variables[t]=l;let f;u?f=(p,m=!0)=>{this.inp_variables[t]=p,u(t,p),m&&this.draw()}:f=(p,m=!0)=>{this.inp_variables[t]=p,m&&this.draw()};let g=this.buttonHandler.try_add_toggle(t,n,s,l,f);this.inp_setter[t]=g}button_click(t,n,s,l){if(this.init_button(),this.buttonHandler==null)throw Error("buttonHandler in Interactive class is undefined");let u=()=>{l(),this.draw()};this.buttonHandler.try_add_click(t,n,s,n,u)}button_click_hover(t,n,s,l,u){if(this.init_button(),this.buttonHandler==null)throw Error("buttonHandler in Interactive class is undefined");let f=()=>{u(),this.draw()};this.buttonHandler.try_add_click(t,n,s,l,f)}}function _y(a,t){a!=null&&t!=null&&(a.setAttribute("viewBox",t.getAttribute("viewBox")),a.setAttribute("preserveAspectRatio",t.getAttribute("preserveAspectRatio")))}function F1(a,t=0,n=100,s=50,l){let u=document.createElement("input");return u.type="range",u.min=t.toString(),u.max=n.toString(),u.value=s.toString(),u.step=l.toString(),u.oninput=()=>{let f=u.value;a(parseFloat(f))},u.classList.add("diagramatics-slider"),u}function yy(a,t){if(t.length==0)return a;let n=1/0,s=t[0];for(let l=0;l<t.length;l++){let u=t[l].sub(a).length_sq();u<n&&(n=u,s=t[l])}return s}function Q1(a){let t=a.getScreenCTM(),n=a.width.baseVal.value,s=a.height.baseVal.value,l=a.viewBox.baseVal,u=n/l.width,f=s/l.height,g=Math.min(u,f),p=n/2-(l.width/2+l.x)*g,m=s/2-(l.height/2+l.y)*g;return DOMMatrix.fromMatrix(t).translate(p,m).scale(g)}function Y1(a,t){let n;return navigator.userAgent.toLowerCase().indexOf("firefox")>-1?n=Q1(t):n=t.getScreenCTM(),{x:(a.x-n.e)/n.a,y:-(a.y-n.f)/n.d}}function xd(a,t){window.TouchEvent&&a instanceof TouchEvent&&(a=a.touches[0]);let n={x:a.clientX,y:a.clientY};return Y1(n,t)}class vy{constructor(t,n,s){this.control_svg=t,this.diagram_svg=n,this.global_scale_factor=s,this.selectedElement=null,this.selectedVariable=null,this.mouseOffset=F(0,0),this.callbacks={},this.setter={},this.svg_elements={},this.blinking_circle_outers=[],this.first_touch_callback=null,this.element_pos={}}startDrag(t,n,s){this.selectedElement=s,this.selectedVariable=n;const l=this.global_scale_factor;t instanceof MouseEvent&&t.preventDefault(),window.TouchEvent&&t instanceof TouchEvent&&t.preventDefault();let u=xd(t,this.control_svg),f=F(u.x/l,u.y/l),g=this.element_pos[n];g&&(this.mouseOffset=g.sub(f)),this.handleBlinking()}drag(t){if(this.selectedElement==null||this.selectedVariable==null)return;t instanceof MouseEvent&&t.preventDefault(),window.TouchEvent&&t instanceof TouchEvent&&t.preventDefault();let n=xd(t,this.control_svg);const s=this.global_scale_factor;let l=F(n.x/s,n.y/s).add(this.mouseOffset);this.element_pos[this.selectedVariable]=l,this.setter[this.selectedVariable]!=null&&(l=this.setter[this.selectedVariable](l)),this.selectedVariable!=null&&(this.callbacks[this.selectedVariable]!=null&&this.callbacks[this.selectedVariable](l),this.setViewBox())}setViewBox(){this.control_svg.setAttribute("viewBox",this.diagram_svg.getAttribute("viewBox")),this.control_svg.setAttribute("preserveAspectRatio",this.diagram_svg.getAttribute("preserveAspectRatio"))}endDrag(t){this.selectedElement=null,this.selectedVariable=null}remove(t){var n;this.selectedVariable==t&&(this.selectedElement=null,this.selectedVariable=null),delete this.callbacks[t],delete this.setter[t],(n=this.svg_elements[t])===null||n===void 0||n.remove(),delete this.svg_elements[t],delete this.element_pos[t]}setPos(t,n){this.element_pos[t]=n,this.callbacks[t](n,!1)}registerCallback(t,n){this.callbacks[t]=n}registerSetter(t,n){this.setter[t]=n}addBlinkingCircleOuter(t){this.blinking_circle_outers.push(t)}handleBlinking(){if(this.blinking_circle_outers.length!=0){for(let t=0;t<this.blinking_circle_outers.length;t++)this.blinking_circle_outers[t].classList.remove("diagramatics-locator-blink");this.blinking_circle_outers=[],this.first_touch_callback!=null&&this.first_touch_callback()}}create_locator_diagram_svg(t,n,s){let l=document.createElementNS("http://www.w3.org/2000/svg","g");return Gn(this.control_svg,l,n.position(F(0,0)),!0,!1,Pn(this.diagram_svg),this.global_scale_factor),l.style.cursor="pointer",l.setAttribute("overflow","visible"),s&&(l.classList.add("diagramatics-locator-blink"),this.addBlinkingCircleOuter(l)),this.svg_elements[t]?this.svg_elements[t].replaceWith(l):this.control_svg.appendChild(l),this.svg_elements[t]=l,this.element_pos[t],l}create_locator_circle_pointer_svg(t,n,s,l,u){let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("overflow","visible"),f.style.cursor="pointer";let g=document.createElementNS("http://www.w3.org/2000/svg","circle"),p=document.createElementNS("http://www.w3.org/2000/svg","circle"),m=n*.4;g.setAttribute("r",n.toString()),g.setAttribute("fill",Oi(l,Mi)),g.setAttribute("fill-opacity","0.3137"),g.setAttribute("stroke","none"),g.classList.add("diagramatics-locator-outer"),u&&g.classList.add("diagramatics-locator-blink"),p.setAttribute("r",m.toString()),p.setAttribute("fill",Oi(l,Mi)),p.setAttribute("stroke","none"),p.classList.add("diagramatics-locator-inner");const b=this.global_scale_factor;return f.appendChild(g),f.appendChild(p),f.setAttribute("transform",`translate(${s.x*b},${-s.y*b})`),this.svg_elements[t]?this.svg_elements[t].replaceWith(f):this.control_svg.appendChild(f),this.svg_elements[t]=f,f}}var _n;(function(a){a.container="diagramatics-dnd-container",a.draggable="diagramatics-dnd-draggable",a.ghost="diagramatics-dnd-draggable-ghost"})(_n||(_n={}));class X1{constructor(t,n,s){this.dnd_svg=t,this.diagram_svg=n,this.global_scale_factor=s,this.containers={},this.draggables={},this.callbacks={},this.onclickstart_callback={},this.hoveredContainerName=null,this.draggedElementName=null,this.draggedElementGhost=null,this.dropped_outside_callback=null,this.move_validation_function=null,this.sort_content=!1,this.active_draggable_name=null,this.focus_padding=1,this.dom_to_id_map=new WeakMap}add_container(t,n,s,l){if(this.containers[t]!=null){this.replace_container_svg(t,n,s,l);return}this.containers[t]={name:t,diagram:n,position:n.origin,content:[],config:l??{type:"horizontal-uniform"},capacity:s??1}}generate_position_map(t,n,s,l){var u;const f=t[0].add(t[1]).scale(.5);switch(n.type){case"horizontal-uniform":{let p=(t[1].x-t[0].x)/s,m=t[0].x+p/2,b=f.y;return md(0,s).map(E=>F(m+p*E,b))}case"vertical-uniform":{let p=(t[1].y-t[0].y)/s,m=f.x,b=t[1].y-p/2;return md(0,s).map(E=>F(m,b-p*E))}case"grid":{let[g,p]=n.value,m=t[1].y-t[0].y,E=(t[1].x-t[0].x)/g,T=m/p,M=t[0].x+E/2,x=t[1].y-T/2;return md(0,s).map(I=>{let U=M+E*(I%g),rt=x-T*Math.floor(I/g);return F(U,rt)})}case"vertical":{const g=F(f.x,t[1].y),m=l.map(E=>{var T,M;return(M=(T=this.draggables[E])===null||T===void 0?void 0:T.diagram_size)!==null&&M!==void 0?M:[0,0]}).map(([E,T])=>js(E,T).mut());return kv(m,n.padding).mut().move_origin("top-center").position(g).translate(F(0,-n.padding)).children.map(E=>E.origin)}case"horizontal":{const g=F(t[0].x,f.y),m=l.map(E=>{var T,M;return(M=(T=this.draggables[E])===null||T===void 0?void 0:T.diagram_size)!==null&&M!==void 0?M:[0,0]}).map(([E,T])=>js(E,T).mut());return Uv(m,n.padding).mut().move_origin("center-left").position(g).translate(F(n.padding,0)).children.map(E=>E.origin)}case"flex-row":{const g=bo((u=n.padding)!==null&&u!==void 0?u:0),p=n.gap?bo(n.gap):g,m=t[1].x-t[0].x-g[1]-g[3],E=l.map(M=>{var x,I;return(I=(x=this.draggables[M])===null||x===void 0?void 0:x.diagram_size)!==null&&I!==void 0?I:[0,0]}).map(([M,x])=>js(M,x).mut());let T=H1(E,m,p[0],p[1],n.vertical_alignment,n.horizontal_alignment).mut();switch(n.horizontal_alignment){case"center":T=T.move_origin("top-center").position(F(f.x,t[1].y-g[0]));break;case"right":T=T.move_origin("top-right").position(F(t[1].x-g[1],t[1].y-g[0]));break;case"center":default:T=T.move_origin("top-left").position(F(t[0].x+g[3],t[1].y-g[0]))}return T.children.map(M=>M.origin)}default:return[]}}get_container_content_size(t){var n;const s=this.containers[t];if(s==null)return[NaN,NaN];const l=(n=s.config.padding)!==null&&n!==void 0?n:0,u=s.content.map(p=>{var m,b;return(b=(m=this.draggables[p])===null||m===void 0?void 0:m.diagram)!==null&&b!==void 0?b:nr()}),[f,g]=co(Xt(...u));return[f+2*l,g+2*l]}replace_draggable_svg(t,n){var s,l;let u=this.draggables[t];if(u==null)return;let f=(s=u.svgelement)===null||s===void 0?void 0:s.parentNode;f!=null&&((l=u.svgelement)===null||l===void 0||l.remove(),u.diagram=n,u.diagram_size=co(n),this.add_draggable_svg(t,n,f),this.reposition_container_content(u.container))}replace_container_svg(t,n,s,l){var u;let f=this.containers[t];if(f==null)return;const g=this.get_container_outer_g(t);g!=null&&((u=f.svgelement)===null||u===void 0||u.remove(),f.diagram=n,s&&(f.capacity=s),l&&(f.config=l),this.add_container_svg(t,n,g),this.reposition_container_content(t))}add_draggable_to_container(t,n,s){if(this.draggables[t]!=null){this.replace_draggable_svg(t,n),this.move_draggable_to_container(t,s,!0);return}const l=co(n);this.draggables[t]={name:t,diagram:n.mut(),diagram_size:l,position:n.origin,container:s},this.containers[s].content.push(t)}add_draggable_with_container(t,n,s){if(this.draggables[t]!=null){this.replace_draggable_svg(t,n);return}let l=`_container0_${t}`;s==null&&(s=this.diagram_container_from_draggable(n)),this.add_container(l,s);const u=co(n);this.containers[l].content.push(t),this.draggables[t]={name:t,diagram:n.mut(),diagram_size:u,position:n.origin,container:l}}remove_draggable(t){var n;for(let s in this.containers){const l=this.containers[s];l.content=l.content.filter(u=>u!=t)}(n=this.draggables[t].svgelement)===null||n===void 0||n.remove(),delete this.draggables[t]}registerCallback(t,n){this.callbacks[t]=n}register_clickstart_callback(t,n){this.onclickstart_callback[t]=n}register_dropped_outside_callback(t){this.dropped_outside_callback=t}register_move_validation_function(t){this.move_validation_function=t}setViewBox(){this.dnd_svg.setAttribute("viewBox",this.diagram_svg.getAttribute("viewBox")),this.dnd_svg.setAttribute("preserveAspectRatio",this.diagram_svg.getAttribute("preserveAspectRatio"))}drawSvg(){for(let t in this.containers){const n=this.containers[t];if(n?.svgelement==null){const l=document.createElementNS("http://www.w3.org/2000/svg","g");this.dnd_svg.append(l),this.add_container_svg(t,n.diagram,l)}const s=this.get_container_outer_g(t);if(s!=null)for(let l of n.content){const u=this.draggables[l];u?.svgelement||this.add_draggable_svg(l,u.diagram,s)}}for(let t in this.containers)this.reposition_container_content(t),this.reconfigure_container_tabindex(t)}getData(){let t=[];for(let n in this.containers)t.push({container:n,content:this.containers[n].content});return t}setData(t){try{for(let n of t)for(let s of n.content)this.try_move_draggable_to_container(s,n.container,!0)}catch{console.error("the data is not valid")}}diagram_container_from_draggable(t){return M1(...t.bounding_box()).move_origin(t.origin).strokedasharray([5])}register_tap_enter(t,n){t.onclick=s=>{n(!1)},t.onkeydown=s=>{s.key=="Enter"&&n(!0)}}tap_enter_draggable(t,n){var s,l,u;if(this.active_draggable_name==null){this.reset_picked_class(),this.active_draggable_name=t;let f=this.draggables[t];if(f.svgelement==null)return;f.svgelement.classList.add("picked"),n&&((l=(s=this.onclickstart_callback)[t])===null||l===void 0||l.call(s))}else if(t==this.active_draggable_name)this.reset_picked_class(),this.active_draggable_name=null;else{const f=(u=this.draggables[t])===null||u===void 0?void 0:u.container;f&&this.try_move_draggable_to_container(this.active_draggable_name,f),this.reset_picked_class(),this.active_draggable_name=null}}tap_enter_container(t){this.active_draggable_name!=null&&(this.try_move_draggable_to_container(this.active_draggable_name,t),this.active_draggable_name=null,this.reset_picked_class())}get_container_outer_g(t){var n;const s=this.containers[t];return(n=s?.svgelement)===null||n===void 0?void 0:n.parentNode}add_container_svg(t,n,s){let l=document.createElementNS("http://www.w3.org/2000/svg","g");Gn(this.dnd_svg,l,n.position(F(0,0)),!1,!1,Pn(this.diagram_svg),this.global_scale_factor,_n.container);const u=this.global_scale_factor;let f=n.origin;l.setAttribute("transform",`translate(${f.x*u},${-f.y*u})`),l.setAttribute("class",_n.container),l.setAttribute("tabindex","0"),l.onmousedown=g=>{g.preventDefault()},this.register_tap_enter(l,()=>{this.tap_enter_container(t)}),s.prepend(l),this.containers[t].svgelement=l,this.dom_to_id_map.set(l,t),this.add_focus_rect(l,n)}add_draggable_svg(t,n,s){let l=document.createElementNS("http://www.w3.org/2000/svg","g");Gn(this.dnd_svg,l,n.position(F(0,0)),!0,!1,Pn(this.diagram_svg),this.global_scale_factor,_n.draggable);const u=this.global_scale_factor;let f=n.origin;l.setAttribute("transform",`translate(${f.x*u},${-f.y*u})`),l.setAttribute("class",_n.draggable),l.setAttribute("draggable","true"),l.setAttribute("tabindex","0"),l.onmousedown=g=>{this.draggedElementName=t,this.startDrag(g)},l.ontouchstart=g=>{this.draggedElementName=t,this.tap_enter_draggable(t),this.startDrag(g)},this.register_tap_enter(l,g=>{this.tap_enter_draggable(t,g)}),s.append(l),this.draggables[t].svgelement=l,this.dom_to_id_map.set(l,t),this.add_focus_rect(l,n)}add_focus_rect(t,n){const s=n.position(F(0,0)).bounding_box(),l=this.focus_padding,u=this.global_scale_factor,f=s[1].x-s[0].x+2*l,g=s[1].y-s[0].y+2*l,p=document.createElementNS("http://www.w3.org/2000/svg","rect");p.setAttribute("width",(f*u).toString()),p.setAttribute("height",(g*u).toString()),p.setAttribute("x",((s[0].x-l)*u).toString()),p.setAttribute("y",((-s[1].y-l)*u).toString()),p.setAttribute("fill","none"),p.setAttribute("stroke","black"),p.setAttribute("stroke-width","1"),p.setAttribute("vector-effect","non-scaling-stroke"),p.setAttribute("class",Bv),t.appendChild(p)}move_svg_draggable_to_container(t,n){var s;const l=(s=this.draggables[t])===null||s===void 0?void 0:s.svgelement;if(l==null)return;const u=this.get_container_outer_g(n);u?.appendChild(l)}reorder_svg_container_content(t){var n,s;const l=(n=this.containers[t])===null||n===void 0?void 0:n.content,u=this.get_container_outer_g(t);if(!(l==null||u==null))for(let f of l){const g=(s=this.draggables[f])===null||s===void 0?void 0:s.svgelement;g!=null&&u.appendChild(g)}}reconfigure_container_tabindex(t){var n,s,l,u;const f=this.containers[t];if(f!=null&&f.capacity==1)if(f.content.length==1){if((n=f.svgelement)===null||n===void 0||n.setAttribute("tabindex","-1"),f.svgelement==document.activeElement){const g=f.content[0];(l=(s=this.draggables[g])===null||s===void 0?void 0:s.svgelement)===null||l===void 0||l.focus()}}else(u=f.svgelement)===null||u===void 0||u.setAttribute("tabindex","0")}reorder_svg_container_tabindex(t){for(let n of t){const s=this.get_container_outer_g(n);s!=null&&this.dnd_svg.appendChild(s)}}reposition_container_content(t){var n,s,l,u;let f=this.containers[t];if(f==null)return;this.sort_content?(f.content.sort(),this.reorder_svg_container_content(t)):!((n=f.config)===null||n===void 0)&&n.sorting_function&&(f.content.sort(f.config.sorting_function),this.reorder_svg_container_content(t));const g=(s=f.config.custom_region_box)!==null&&s!==void 0?s:f.diagram.bounding_box(),p=this.generate_position_map(g,f.config,f.capacity,f.content),m=this.global_scale_factor;for(let b=0;b<f.content.length;b++){let E=this.draggables[f.content[b]],T=(l=p[b])!==null&&l!==void 0?l:f.diagram.origin;E.diagram=E.diagram.position(T),E.position=T,(u=E.svgelement)===null||u===void 0||u.setAttribute("transform",`translate(${T.x*m},${-T.y*m})`)}}remove_draggable_from_container(t,n){this.containers[n].content=this.containers[n].content.filter(s=>s!=t)}move_draggable_to_container(t,n,s=!1){let l=this.draggables[t];if(l==null||l.container==n)return;let u=this.containers[n],f=l.container;if(this.remove_draggable_from_container(t,f),l.container=n,u.content.push(t),this.move_svg_draggable_to_container(t,n),this.reposition_container_content(n),this.reposition_container_content(f),this.reconfigure_container_tabindex(n),this.reconfigure_container_tabindex(f),s)return;let g=this.draggables[t];this.callbacks[g.name](g.position)}try_move_draggable_to_container(t,n,s=!1){if(this.move_validation_function&&!this.move_validation_function(t,n))return;let l=this.draggables[t],u=this.containers[n];if(u.content.length+1<=u.capacity)this.move_draggable_to_container(t,n,s);else if(u.capacity==1){let f=l.container,g=u.content[0];this.move_draggable_to_container(t,n,!0),this.move_draggable_to_container(g,f,s)}}startDrag(t){var n,s;t instanceof MouseEvent&&t.preventDefault(),window.TouchEvent&&t instanceof TouchEvent&&t.preventDefault(),this.hoveredContainerName=null,this.reset_hovered_class();let l=this.dnd_svg.getElementsByClassName(_n.ghost);for(let f=0;f<l.length;f++)l[f].remove();if(this.draggedElementName==null)return;let u=this.draggables[this.draggedElementName];u.svgelement!=null&&(u.svgelement.classList.add("picked"),(s=(n=this.onclickstart_callback)[this.draggedElementName])===null||s===void 0||s.call(n),this.draggedElementGhost=u.svgelement.cloneNode(!0),this.draggedElementGhost.style.pointerEvents="none",this.draggedElementGhost.setAttribute("opacity","0.5"),this.draggedElementGhost.setAttribute("class",_n.ghost),this.dnd_svg.append(this.draggedElementGhost))}get_dnd_element_data_from_evt(t){let n=null;if(window.TouchEvent&&t instanceof TouchEvent){let l=t.touches[0];n=document.elementFromPoint(l.clientX,l.clientY)}else{const l=t;n=document.elementFromPoint(l.clientX,l.clientY)}if(n==null||(n.localName=="tspan"&&(n=n.parentElement),n==null))return null;let s=n.getAttribute("_dg_tag");if(s==null)return null;if(s==_n.container){let l=n.parentElement;if(l==null)return null;let u=this.dom_to_id_map.get(l);return u==null?null:{name:u,type:_n.container}}if(s==_n.draggable){let l=n.parentElement;if(l==null)return null;let u=this.dom_to_id_map.get(l);return u==null?null:{name:u,type:_n.draggable}}return null}drag(t){var n,s,l;if(this.draggedElementName==null||this.draggedElementGhost==null)return;t instanceof MouseEvent&&t.preventDefault(),window.TouchEvent&&t instanceof TouchEvent&&t.preventDefault(),this.reset_hovered_class();let u=this.get_dnd_element_data_from_evt(t);u==null?this.hoveredContainerName=null:u.type==_n.container?(this.hoveredContainerName=u.name,(n=this.containers[u.name].svgelement)===null||n===void 0||n.classList.add("hovered")):u.type==_n.draggable&&(this.hoveredContainerName=(s=this.draggables[u.name])===null||s===void 0?void 0:s.container,(l=this.draggables[u.name].svgelement)===null||l===void 0||l.classList.add("hovered"));let f=xd(t,this.dnd_svg);this.draggedElementGhost.setAttribute("transform",`translate(${f.x},${-f.y})`)}endDrag(t){this.hoveredContainerName!=null&&this.draggedElementName!=null&&this.try_move_draggable_to_container(this.draggedElementName,this.hoveredContainerName),this.hoveredContainerName==null&&this.draggedElementName!=null&&this.dropped_outside_callback!=null&&this.dropped_outside_callback(this.draggedElementName),this.draggedElementName=null,this.hoveredContainerName=null,this.reset_hovered_class(),this.reset_picked_class(),this.draggedElementGhost!=null&&(this.draggedElementGhost.remove(),this.draggedElementGhost=null)}reset_hovered_class(){var t,n;for(let s in this.containers)(t=this.containers[s].svgelement)===null||t===void 0||t.classList.remove("hovered");for(let s in this.draggables)(n=this.draggables[s].svgelement)===null||n===void 0||n.classList.remove("hovered")}reset_picked_class(){var t;for(let n in this.draggables)(t=this.draggables[n].svgelement)===null||t===void 0||t.classList.remove("picked")}}class K1{constructor(t,n,s){this.button_svg=t,this.diagram_svg=n,this.global_scale_factor=s,this.states={},this.svg_g_element={},this.touchdownName=null,this.focus_padding=1}remove(t){delete this.states[t];const n=this.svg_g_element[t];n?.remove(),delete this.svg_g_element[t]}try_add_toggle(t,n,s,l,u){let f=this.svg_g_element[t];return f?f.innerHTML="":(f=document.createElementNS("http://www.w3.org/2000/svg","g"),this.button_svg.appendChild(f)),this.add_toggle(t,n,s,l,f,u)}add_toggle(t,n,s,l,u,f){let g=document.createElementNS("http://www.w3.org/2000/svg","g");Gn(this.button_svg,g,s,!0,!1,Pn(this.diagram_svg),this.global_scale_factor),g.setAttribute("overflow","visible"),g.style.cursor="pointer";let p=document.createElementNS("http://www.w3.org/2000/svg","g");Gn(this.button_svg,p,n,!0,!1,Pn(this.diagram_svg),this.global_scale_factor),p.setAttribute("overflow","visible"),p.style.cursor="pointer",u.setAttribute("overflow","visible"),u.setAttribute("tabindex","0"),u.appendChild(p),u.appendChild(g),this.svg_g_element[t]=u,this.states[t]=l;const m=T=>{p.setAttribute("display",T?"block":"none"),g.setAttribute("display",T?"none":"block")};m(this.states[t]);const b=(T,M=!0)=>{this.states[t]=T,f(this.states[t],M),m(this.states[t])};return u.onmousedown=T=>{T.preventDefault()},u.onclick=T=>{T.preventDefault(),b(!this.states[t])},u.onkeydown=T=>{T.key=="Enter"&&b(!this.states[t])},T=>{b(T,!1)}}try_add_click(t,n,s,l,u){let f=this.svg_g_element[t];f?f.innerHTML="":(f=document.createElementNS("http://www.w3.org/2000/svg","g"),this.button_svg.appendChild(f)),this.add_click(t,n,s,l,f,u)}add_click(t,n,s,l,u,f){let g=document.createElementNS("http://www.w3.org/2000/svg","g");Gn(this.button_svg,g,n,!0,!1,Pn(this.diagram_svg),this.global_scale_factor),g.setAttribute("overflow","visible"),g.style.cursor="pointer";let p=document.createElementNS("http://www.w3.org/2000/svg","g");Gn(this.button_svg,p,s,!0,!1,Pn(this.diagram_svg),this.global_scale_factor),p.setAttribute("overflow","visible"),p.style.cursor="pointer";let m=document.createElementNS("http://www.w3.org/2000/svg","g");Gn(this.button_svg,m,l,!0,!1,Pn(this.diagram_svg),this.global_scale_factor),m.setAttribute("overflow","visible"),m.style.cursor="pointer",u.setAttribute("class",q1),u.setAttribute("overflow","visible"),u.setAttribute("tabindex","0"),u.appendChild(g),u.appendChild(p),u.appendChild(m),this.add_focus_rect(u,n),this.svg_g_element[t]=u;const b=(x,I)=>{g.setAttribute("display",!x&&!I?"block":"none"),p.setAttribute("display",x?"block":"none"),m.setAttribute("display",I&&!x?"block":"none")};b(!1,!1);let E=!1,T=!1;const M=()=>{b(E,T)};u.onblur=x=>{T=!1,E=!1,M()},u.onmouseenter=x=>{T=!0,M()},u.onmouseleave=x=>{T=!1,E=!1,M()},u.onmousedown=x=>{x.preventDefault(),E=!0,M()},u.onmouseup=x=>{E=!1,M()},u.onclick=x=>{f(),T=!1,E=!1,M()},u.onkeydown=x=>{x.key=="Enter"&&(f(),E=!0,M())},u.onkeyup=x=>{E=!1,M()}}add_focus_rect(t,n){const s=n.bounding_box(),l=this.focus_padding,u=s[1].x-s[0].x+2*l,f=s[1].y-s[0].y+2*l,g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.setAttribute("width",u.toString()),g.setAttribute("height",f.toString()),g.setAttribute("x",(s[0].x-l).toString()),g.setAttribute("y",(-s[1].y-l).toString()),g.setAttribute("fill","none"),g.setAttribute("stroke","black"),g.setAttribute("stroke-width","1"),g.setAttribute("vector-effect","non-scaling-stroke"),g.setAttribute("class",Bv),t.appendChild(g)}}var ln;(function(a){a[a.BeforeStart=0]="BeforeStart",a[a.EqualStart=1]="EqualStart",a[a.BetweenStartAndEnd=2]="BetweenStartAndEnd",a[a.EqualEnd=3]="EqualEnd",a[a.AfterEnd=4]="AfterEnd"})(ln||(ln={}));class $1{pointsSame(t,n){return this.pointsSameX(t,n)&&this.pointsSameY(t,n)}pointsCompare(t,n){return this.pointsSameX(t,n)?this.pointsSameY(t,n)?0:t[1]<n[1]?-1:1:t[0]<n[0]?-1:1}}class Z1 extends $1{constructor(t=1e-10){super(),this.epsilon=t}pointAboveOrOnLine(t,n,s){const l=n[0],u=n[1],f=s[0],g=s[1],p=t[0],m=t[1];return(f-l)*(m-u)-(g-u)*(p-l)>=-this.epsilon}pointBetween(t,n,s){const l=t[1]-n[1],u=s[0]-n[0],f=t[0]-n[0],g=s[1]-n[1],p=f*u+l*g;if(p<this.epsilon)return!1;const m=u*u+g*g;return!(p-m>-this.epsilon)}pointsSameX(t,n){return Math.abs(t[0]-n[0])<this.epsilon}pointsSameY(t,n){return Math.abs(t[1]-n[1])<this.epsilon}pointsCollinear(t,n,s){const l=t[0]-n[0],u=t[1]-n[1],f=n[0]-s[0],g=n[1]-s[1];return Math.abs(l*g-f*u)<this.epsilon}linesIntersect(t,n,s,l){const u=n[0]-t[0],f=n[1]-t[1],g=l[0]-s[0],p=l[1]-s[1],m=u*p-f*g;if(Math.abs(m)<this.epsilon)return null;const b=t[0]-s[0],E=t[1]-s[1],T=(g*E-p*b)/m,M=(u*E-f*b)/m,x=U=>U<=-this.epsilon?ln.BeforeStart:U<this.epsilon?ln.EqualStart:U-1<=-this.epsilon?ln.BetweenStartAndEnd:U-1<this.epsilon?ln.EqualEnd:ln.AfterEnd,I=[t[0]+T*u,t[1]+T*f];return{alongA:x(T),alongB:x(M),p:I}}}class by{constructor(){this.nodes=[]}remove(t){const n=this.nodes.indexOf(t);n>=0&&this.nodes.splice(n,1)}getIndex(t){return this.nodes.indexOf(t)}isEmpty(){return this.nodes.length<=0}getHead(){return this.nodes[0]}removeHead(){this.nodes.shift()}insertBefore(t,n){this.findTransition(t,n).insert(t)}findTransition(t,n){var s,l;const u=(p,m)=>n(m)-n(p);let f=0,g=this.nodes.length;for(;f<g;){const p=f+g>>1;u(this.nodes[p],t)>0?g=p:f=p+1}return{before:f<=0?null:(s=this.nodes[f-1])!==null&&s!==void 0?s:null,after:(l=this.nodes[f])!==null&&l!==void 0?l:null,insert:p=>(this.nodes.splice(f,0,p),p)}}}class ka{constructor(t,n,s,l){var u;this.otherFill=null,this.id=(u=l?.segmentId())!==null&&u!==void 0?u:-1,this.start=t,this.end=n,this.myFill={above:s?s.myFill.above:null,below:s?s.myFill.below:null}}}let Ey=class{constructor(t,n,s,l){this.status=null,this.isStart=t,this.p=n,this.seg=s,this.primary=l}};class Ty{constructor(t,n,s=null){this.events=new by,this.status=new by,this.selfIntersection=t,this.geo=n,this.log=s}compareEvents(t,n,s,l,u,f){const g=this.geo.pointsCompare(n,u);return g!==0?g:this.geo.pointsSame(s,f)?0:t!==l?t?1:-1:this.geo.pointAboveOrOnLine(s,l?u:f,l?f:u)?1:-1}addEvent(t){this.events.insertBefore(t,n=>n===t?0:this.compareEvents(t.isStart,t.p,t.other.p,n.isStart,n.p,n.other.p))}divideEvent(t,n){var s;const l=new ka(n,t.seg.end,t.seg,this.log);return(s=this.log)===null||s===void 0||s.segmentChop(t.seg,n),this.events.remove(t.other),t.seg.end=n,t.other.p=n,this.addEvent(t.other),this.addSegment(l,t.primary)}newSegment(t,n){const s=this.geo.pointsCompare(t,n);return s===0?null:s<0?new ka(t,n,null,this.log):new ka(n,t,null,this.log)}addSegment(t,n){const s=new Ey(!0,t.start,t,n),l=new Ey(!1,t.end,t,n);return s.other=l,l.other=s,this.addEvent(s),this.addEvent(l),s}addRegion(t){let n,s=t[t.length-1];for(let l=0;l<t.length;l++){n=s,s=t[l];const u=this.newSegment(n,s);u&&this.addSegment(u,!0)}}compareStatus(t,n){const s=t.seg.start,l=t.seg.end,u=n.seg.start,f=n.seg.end;return this.geo.pointsCollinear(s,u,f)?this.geo.pointsCollinear(l,u,f)||this.geo.pointAboveOrOnLine(l,u,f)?1:-1:this.geo.pointAboveOrOnLine(s,u,f)?1:-1}statusFindSurrounding(t){return this.status.findTransition(t,n=>n===t?0:-this.compareStatus(t,n))}checkIntersection(t,n){var s;const l=t.seg,u=n.seg,f=l.start,g=l.end,p=u.start,m=u.end;(s=this.log)===null||s===void 0||s.checkIntersection(l,u);const b=this.geo.linesIntersect(f,g,p,m);if(b===null){if(!this.geo.pointsCollinear(f,g,p)||this.geo.pointsSame(f,m)||this.geo.pointsSame(g,p))return null;const E=this.geo.pointsSame(f,p),T=this.geo.pointsSame(g,m);if(E&&T)return n;const M=!E&&this.geo.pointBetween(f,p,m),x=!T&&this.geo.pointBetween(g,p,m);if(E)return x?this.divideEvent(n,g):this.divideEvent(t,m),n;M&&(T||(x?this.divideEvent(n,g):this.divideEvent(t,m)),this.divideEvent(n,f))}else b.alongA===ln.BetweenStartAndEnd&&(b.alongB===ln.EqualStart?this.divideEvent(t,p):b.alongB===ln.BetweenStartAndEnd?this.divideEvent(t,b.p):b.alongB===ln.EqualEnd&&this.divideEvent(t,m)),b.alongB===ln.BetweenStartAndEnd&&(b.alongA===ln.EqualStart?this.divideEvent(n,f):b.alongA===ln.BetweenStartAndEnd?this.divideEvent(n,b.p):b.alongA===ln.EqualEnd&&this.divideEvent(n,g));return null}calculate(t,n){var s,l,u,f,g,p,m,b;const E=[];for(;!this.events.isEmpty();){const T=this.events.getHead();if((s=this.log)===null||s===void 0||s.vert(T.p[0]),T.isStart){(l=this.log)===null||l===void 0||l.segmentNew(T.seg,T.primary);const M=this.statusFindSurrounding(T),x=M.before,I=M.after;(u=this.log)===null||u===void 0||u.tempStatus(T.seg,x?x.seg:!1,I?I.seg:!1);const rt=(()=>{if(x){const X=this.checkIntersection(T,x);if(X)return X}return I?this.checkIntersection(T,I):null})();if(rt){if(this.selfIntersection){let X;T.seg.myFill.below===null?X=!0:X=T.seg.myFill.above!==T.seg.myFill.below,X&&(rt.seg.myFill.above=!rt.seg.myFill.above)}else rt.seg.otherFill=T.seg.myFill;(f=this.log)===null||f===void 0||f.segmentUpdate(rt.seg),this.events.remove(T.other),this.events.remove(T)}if(this.events.getHead()!==T){(g=this.log)===null||g===void 0||g.rewind(T.seg);continue}if(this.selfIntersection){let X;T.seg.myFill.below===null?X=!0:X=T.seg.myFill.above!==T.seg.myFill.below,I?T.seg.myFill.below=I.seg.myFill.above:T.seg.myFill.below=t,X?T.seg.myFill.above=!T.seg.myFill.below:T.seg.myFill.above=T.seg.myFill.below}else if(T.seg.otherFill===null){let X;if(!I)X=T.primary?n:t;else if(T.primary===I.primary){if(I.seg.otherFill===null)throw new Error("otherFill is null");X=I.seg.otherFill.above}else X=I.seg.myFill.above;T.seg.otherFill={above:X,below:X}}(p=this.log)===null||p===void 0||p.status(T.seg,x?x.seg:!1,I?I.seg:!1),T.other.status=M.insert(T)}else{const M=T.status;if(M===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");const x=this.status.getIndex(M);if(x>0&&x<this.status.nodes.length-1){const I=this.status.nodes[x-1],U=this.status.nodes[x+1];this.checkIntersection(I,U)}if((m=this.log)===null||m===void 0||m.statusRemove(M.seg),this.status.remove(M),!T.primary){if(!T.seg.otherFill)throw new Error("otherFill is null");const I=T.seg.myFill;T.seg.myFill=T.seg.otherFill,T.seg.otherFill=I}E.push(T.seg)}this.events.removeHead()}return(b=this.log)===null||b===void 0||b.done(),E}}function lo(a,t,n){const s=[];for(const l of a){const u=(l.myFill.above?8:0)+(l.myFill.below?4:0)+(l.otherFill&&l.otherFill.above?2:0)+(l.otherFill&&l.otherFill.below?1:0);if(t[u]!==0){const f=new ka(l.start,l.end,null,n);f.myFill.above=t[u]===1,f.myFill.below=t[u]===2,s.push(f)}}return n?.selected(s),s}class oo{static union(t,n){return lo(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],n)}static intersect(t,n){return lo(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],n)}static difference(t,n){return lo(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],n)}static differenceRev(t,n){return lo(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],n)}static xor(t,n){return lo(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],n)}}function J1(a,t,n){const s=[],l=[];for(const p of a){let x=function(at,it,et){return M&&(M.index=at,M.matches_head=it,M.matches_pt1=et),M===E?(M=T,!1):(M=null,!0)},I=function(at){n?.chainReverse(at),s[at].reverse()},U=function(at,it){const et=s[at],w=s[it];let R=et[et.length-1];const C=et[et.length-2],V=w[0],N=w[1];t.pointsCollinear(C,R,V)&&(n?.chainRemoveTail(at,R),et.pop(),R=C),t.pointsCollinear(R,V,N)&&(n?.chainRemoveHead(it,V),w.shift()),n?.chainJoin(at,it),s[at]=et.concat(w),s.splice(it,1)};var u=x,f=I,g=U;const m=p.start,b=p.end;if(t.pointsSame(m,b)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");continue}n?.chainStart(p);const E={index:0,matches_head:!1,matches_pt1:!1},T={index:0,matches_head:!1,matches_pt1:!1};let M=E;for(let at=0;at<s.length;at++){const it=s[at],et=it[0],w=it[it.length-1];if(t.pointsSame(et,m)){if(x(at,!0,!0))break}else if(t.pointsSame(et,b)){if(x(at,!0,!1))break}else if(t.pointsSame(w,m)){if(x(at,!1,!0))break}else if(t.pointsSame(w,b)&&x(at,!1,!1))break}if(M===E){s.push([m,b]),n?.chainNew(m,b);continue}if(M===T){n?.chainMatch(E.index);const at=E.index,it=E.matches_pt1?b:m,et=E.matches_head,w=s[at];let R=et?w[0]:w[w.length-1];const C=et?w[1]:w[w.length-2],V=et?w[w.length-1]:w[0],N=et?w[w.length-2]:w[1];if(t.pointsCollinear(C,R,it)&&(et?(n?.chainRemoveHead(E.index,it),w.shift()):(n?.chainRemoveTail(E.index,it),w.pop()),R=C),t.pointsSame(V,it)){s.splice(at,1),t.pointsCollinear(N,V,R)&&(et?(n?.chainRemoveTail(E.index,R),w.pop()):(n?.chainRemoveHead(E.index,R),w.shift())),n?.chainClose(E.index),l.push(w);continue}et?(n?.chainAddHead(E.index,it),w.unshift(it)):(n?.chainAddTail(E.index,it),w.push(it));continue}const rt=E.index,X=T.index;n?.chainConnect(rt,X);const K=s[rt].length<s[X].length;E.matches_head?T.matches_head?K?(I(rt),U(rt,X)):(I(X),U(X,rt)):U(X,rt):T.matches_head?U(rt,X):K?(I(rt),U(X,rt)):(I(X),U(rt,X))}return l}class W1{constructor(){this.list=[],this.nextSegmentId=0,this.curVert=NaN}push(t,n){this.list.push({type:t,data:JSON.parse(JSON.stringify(n))})}segmentId(){return this.nextSegmentId++}checkIntersection(t,n){this.push("check",{seg1:t,seg2:n})}segmentChop(t,n){this.push("div_seg",{seg:t,p:n}),this.push("chop",{seg:t,p:n})}statusRemove(t){this.push("pop_seg",{seg:t})}segmentUpdate(t){this.push("seg_update",{seg:t})}segmentNew(t,n){this.push("new_seg",{seg:t,primary:n})}tempStatus(t,n,s){this.push("temp_status",{seg:t,above:n,below:s})}rewind(t){this.push("rewind",{seg:t})}status(t,n,s){this.push("status",{seg:t,above:n,below:s})}vert(t){t!==this.curVert&&(this.push("vert",{x:t}),this.curVert=t)}selected(t){this.push("selected",{segs:t})}chainStart(t){this.push("chain_start",{seg:t})}chainRemoveHead(t,n){this.push("chain_rem_head",{index:t,p:n})}chainRemoveTail(t,n){this.push("chain_rem_tail",{index:t,p:n})}chainNew(t,n){this.push("chain_new",{p1:t,p2:n})}chainMatch(t){this.push("chain_match",{index:t})}chainClose(t){this.push("chain_close",{index:t})}chainAddHead(t,n){this.push("chain_add_head",{index:t,p:n})}chainAddTail(t,n){this.push("chain_add_tail",{index:t,p:n})}chainConnect(t,n){this.push("chain_con",{index1:t,index2:n})}chainReverse(t){this.push("chain_rev",{index:t})}chainJoin(t,n){this.push("chain_join",{index1:t,index2:n})}done(){this.push("done",null)}}class tT{constructor(t){this.log=null,this.geo=t}buildLog(t){var n;return this.log=t?new W1:null,(n=this.log)===null||n===void 0?void 0:n.list}segments(t){const n=new Ty(!0,this.geo,this.log);for(const s of t.regions)n.addRegion(s);return{segments:n.calculate(t.inverted,!1),inverted:t.inverted}}combine(t,n){const s=new Ty(!1,this.geo,this.log);for(const l of t.segments)s.addSegment(new ka(l.start,l.end,l,this.log),!0);for(const l of n.segments)s.addSegment(new ka(l.start,l.end,l,this.log),!1);return{combined:s.calculate(t.inverted,n.inverted),inverted1:t.inverted,inverted2:n.inverted}}selectUnion(t){return{segments:oo.union(t.combined,this.log),inverted:t.inverted1||t.inverted2}}selectIntersect(t){return{segments:oo.intersect(t.combined,this.log),inverted:t.inverted1&&t.inverted2}}selectDifference(t){return{segments:oo.difference(t.combined,this.log),inverted:t.inverted1&&!t.inverted2}}selectDifferenceRev(t){return{segments:oo.differenceRev(t.combined,this.log),inverted:!t.inverted1&&t.inverted2}}selectXor(t){return{segments:oo.xor(t.combined,this.log),inverted:t.inverted1!==t.inverted2}}polygon(t){return{regions:J1(t.segments,this.geo,this.log),inverted:t.inverted}}union(t,n){const s=this.segments(t),l=this.segments(n),u=this.combine(s,l),f=this.selectUnion(u);return this.polygon(f)}intersect(t,n){const s=this.segments(t),l=this.segments(n),u=this.combine(s,l),f=this.selectIntersect(u);return this.polygon(f)}difference(t,n){const s=this.segments(t),l=this.segments(n),u=this.combine(s,l),f=this.selectDifference(u);return this.polygon(f)}differenceRev(t,n){const s=this.segments(t),l=this.segments(n),u=this.combine(s,l),f=this.selectDifferenceRev(u);return this.polygon(f)}xor(t,n){const s=this.segments(t),l=this.segments(n),u=this.combine(s,l),f=this.selectXor(u);return this.polygon(f)}}new tT(new Z1);var Ay;(function(a){function t(n,s,l,u,f,g="outer-shadow",p,m,b=1){const E=(p-1)/2,T=(m-1)/2;return`
        <filter id="${g}" x="-${E*100}%" y="-${T*100}%" width="${p*100}%" height="${m*100}%">
            <feMorphology operator="dilate" radius="${l*b}" in="SourceAlpha" result="dilated" />
            <feGaussianBlur in="dilated" stdDeviation="${u*b}" />
            <feOffset dx="${n*b}" dy="${s*b}" result="offsetblur" />
            <feFlood flood-color="${f}" result="colorblur"/>
            <feComposite in="colorblur" in2="offsetblur" operator="in" result="shadow" />
            <feComposite in="shadow" in2="SourceAlpha" operator="out" result="clipped-shadow"/>
        </filter>
        `}a.outer_shadow=t})(Ay||(Ay={}));let jr={bbox:void 0,xrange:[-2,2],yrange:[-2,2],xticks:void 0,yticks:void 0,n_sample:100,ticksize:.1,headsize:.05,tick_label_offset:0};function Mo(a){let t=Object.assign(Object.assign({},jr),a);if(t.bbox==null){let[p,m]=t.xrange,[b,E]=t.yrange;t.bbox=[F(p,b),F(m,E)]}let[n,s]=t.bbox,[l,u]=t.xrange,[f,g]=t.yrange;return function(p){let m=n.x+(p.x-l)/(u-l)*(s.x-n.x),b=n.y+(p.y-f)/(g-f)*(s.y-n.y);return F(m,b)}}function eT(a){let t=Object.assign(Object.assign({},jr),a);if(t.bbox==null){let[p,m]=t.xrange,[b,E]=t.yrange;t.bbox=[F(p,b),F(m,E)]}let[n,s]=t.bbox,l=n.x+(s.x-n.x)/(t.xrange[1]-t.xrange[0])*(0-t.xrange[0]),u=n.y+(s.y-n.y)/(t.yrange[1]-t.yrange[0])*(0-t.yrange[0]),f=my(F(n.x,u),F(s.x,u),t.headsize).append_tags(Ne.GRAPH_AXIS),g=my(F(l,n.y),F(l,s.y),t.headsize).append_tags(Ne.GRAPH_AXIS);return Xt(f,g).stroke("gray").fill("gray")}function nT(a,t,n){let s=Object.assign(Object.assign({},jr),n),l=s.ticksize,u=Mo(s)(F(a,t));return qn(F(u.x,u.y+l/2),F(u.x,u.y-l/2)).stroke("gray").append_tags(Ne.GRAPH_TICK)}function uo(a,t,n,s){let l=nT(a,t,s),u=No(n).move_origin_text("top-center").translate(l.get_anchor("bottom-center")).translate(F(0,-(s?.tick_label_offset||0))).textfill("gray").append_tags(Ne.GRAPH_TICK_LABEL);return Xt(l,u)}function iT(a,t,n){let s=Object.assign(Object.assign({},jr),n),l=s.ticksize,u=Mo(s)(F(t,a));return qn(F(u.x+l/2,u.y),F(u.x-l/2,u.y)).stroke("gray").append_tags(Ne.GRAPH_TICK)}function fc(a,t,n,s){let l=iT(a,t,s),u=No(n).move_origin_text("center-right").translate(l.get_anchor("center-left")).translate(F(-(s?.tick_label_offset||0),0)).textfill("gray").append_tags(Ne.GRAPH_TICK_LABEL);return Xt(l,u)}function sT(a,t){let n=Object.assign(Object.assign({},jr),t),[s,l]=n.xrange,[u,f]=n.yrange,g=[],p=[];for(let E=0;E<a.length;E++){let T=a[E];T.x>=s&&T.x<=l&&T.y>=u&&T.y<=f?p.push(T):(p.length>1&&g.push(p),p=[])}p.length>1&&g.push(p);let m,b=g.map(E=>on(E));return b.length==1?m=b[0]:m=Xt(...b).stroke("black").fill("none"),m.transform(Mo(n))}function rT(a,t){let n=Object.assign(Object.assign({},jr),t),l=_1(...n.xrange,n.n_sample).map(u=>F(u,a(u)));return sT(l,t)}function aT(a,t,n,s){let l=Object.assign(Object.assign({},jr),s),u=Object.assign({},l);return u.xrange=[t,n],u.bbox=void 0,rT(a,u).add_points([F(n,0),F(t,0)]).to_polygon().transform(Mo(l))}function lT(a,t,n,s){n==null&&(n=F(0,0));let l=z1(a,s);if(t==""||t==null)return l;let u=No(t).position(a.add(n));return Xt(l,u)}function jv(a,t,n=1,s){let[l,u,f]=a,g=l.sub(u),p=f.sub(u);s==null&&(s=F(0,0)),typeof s=="number"&&(s=g.normalize().add(p.normalize()).normalize().scale(s));let m=g.angle(),b=p.angle();b<m&&(b+=2*Math.PI);let E=L1(n,b-m).rotate(m).add_points([F(0,0)]).to_polygon();if(t==""||t==null)return E.position(u);let T=No(t).translate(s);return Xt(E,T).position(u)}function oT(a,t,n=1,s){let[l,u,f]=a,g=l.sub(u),p=f.sub(u),m=g.angle(),b=p.angle();b<m&&(b+=2*Math.PI);let T=b-m>Math.PI?[f,u,l]:[l,u,f];return jv(T,t,n,s)}function uT(a,t=1){let[n,s,l]=a,u=n.sub(s).normalize().scale(t).add(s),f=l.sub(s).normalize().scale(t).add(s),g=F(u.x,f.y);return on([u,g,f])}function cT(a,t,n,s,l,u,f=!0){l=l??t.sub(a).length()/20,u=u??s*2;let g=a.equals(t)?F(0,0):t.sub(a).normalize(),p=F(g.y,-g.x),m=a.add(p.scale(s)),b=t.add(p.scale(s)),E=f?qn(m.sub(p.scale(l/2)),m.add(p.scale(l/2))):qn(m,m.sub(p.scale(l))),T=f?qn(b.sub(p.scale(l/2)),b.add(p.scale(l/2))):qn(b,b.sub(p.scale(l))),M=qn(m,b),x=Xt(M,E,T),I=a.add(t).scale(.5),U=No(n).position(I.add(p.scale(u)));return Xt(x,U)}function hT(a,t,n,s=1,l){let u=t.sub(a),f=Math.atan2(u.x,-u.y),g=a.add(t).scale(.5);l=l??s/2;let p=[];for(let b=0;b<n;b++){let E=qn(F(-s/2,b*l),F(s/2,b*l));p.push(E)}return Xt(...p).rotate(f).move_origin("center-center").position(g)}function fT(a,t,n,s=1,l,u=.5){let f=t.sub(a),g=Math.atan2(f.x,-f.y),p=a.add(t).scale(.5);l=l??s/2;let m=[],b=s/2*Math.cos(u);for(let T=0;T<n;T++){let M=F(0,T*l-b),x=qn(F(-s/2,T*l),M),I=qn(F(s/2,T*l),M);m.push(x.combine(I))}return Xt(...m).rotate(g).move_origin("center-center").position(p)}var un=Object.freeze({__proto__:null,angle:jv,angle_smaller:oT,congruence_mark:hT,length:cT,parallel_mark:fT,right_angle:uT,vector:lT}),Sy;(function(a){a.ROWS="rows",a.COLUMNS="columns"})(Sy||(Sy={}));var wy;(function(a){a.LINE="LINE"})(wy||(wy={}));function Lr(a){if(typeof a!="string"||!a.trim())return"$$";const t=a.trim(),n=t.indexOf("$"),s=t.lastIndexOf("$");if(n===-1)return t.includes("\\")?`$${t}$`:`$\\text{${t}}$`;if(n===s||n===0&&s===t.length-1)return t;const l=t.substring(0,n).trim(),u=t.substring(n+1,s).trim(),f=t.substring(s+1).trim();let g=[];return l&&g.push(`\\text{${l} }`),u&&g.push(u),f&&g.push(`\\text{ ${f}}`),`$${g.join(" ")}$`}function dT(a,t){let n=t.angle,s=t.angleLabel,l=t.isSmooth,u=t.showFBD,f=t.showGraviCompo,g=t.massLabel,p=t.normalLabel,m=t.fricLabel,b=t.graviLabel,E=t.perGraviLabel,T=t.parGraviLabel,M=(ot,bt)=>MathJax.tex2svg(ot,bt).innerHTML,x=1/Math.tan(Xe(n));x>1.7&&(x=1.7),a.innerHTML="",a.style.aspectRatio=x.toString();const I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.classList.add("diagramSvg"),I.style.aspectRatio=x.toString(),I.style.width="100%",a.appendChild(I);let U=(...ot)=>{Fc(I,Xt(...ot).fontscale(.014))};s=Lr(s);let rt=s;g=Lr(g),b=Lr(b),p=Lr(p),m=Lr(m),T=Lr(T),E=Lr(E),l&&(m=""),u==!1&&(f==!1&&(b=""),p="",m=""),f==!1&&(rt="",T="",E="");let X=Ys([F(0,0),F(10,0),F(10,10*Math.tan(Xe(n)))]).fill("white"),K=O1(2).move_origin("bottom-center").position(X.parametric_point(.5,2)).rotate(Xe(n)).fill("lightblue").stroke("none"),at=un.angle([F(1,0),F(0,0),F(1,Math.tan(Xe(n)))],s,2.4,1.8),it=Xs(g).position(K.get_anchor("center-center")).translate(F(0,.3)),et=.28,w;n>45?w=4:w=3;let R=un.vector(F(0,-.8*w),b,F(0,-.4),et).position(K.get_anchor("center-center")).fill("blue").stroke("blue").opacity(0),C=un.vector(F(-w*Math.sin(Xe(n)),w*Math.cos(Xe(n))),p,F(0,.4),et).position(K.origin).fill("blue").stroke("blue").opacity(0),V=un.vector(F(.3*w*Math.cos(Xe(n)),.3*w*Math.sin(Xe(n))),m,F(.5,-.4),et).position(K.origin).fill("blue").stroke("blue").opacity(0);u==!0&&(R=R.opacity(1),C=C.opacity(1),l==!1&&(V=V.opacity(1)));let N=.8*w*Math.cos(Xe(n)),z=.8*w*Math.sin(Xe(n)),D=un.vector(F(N*Math.sin(Xe(n)),-N*Math.cos(Xe(n))),E,F(.4,-.4),et),Rt=un.vector(F(-z*Math.cos(Xe(n)),-z*Math.sin(Xe(n))),T,F(-.25,-.4),et),Pt=Xt(D,Rt).position(K.get_anchor("center-center")).stroke("red").fill("red").opacity(0),B=on([F(-.12,-.12),F(.12,-.06),F(-.12,0),F(.12,.06),F(-.12,.12),F(.12,.18)]).position(R.origin).translate(F(0,-1.74)).stroke("red").opacity(0),J=un.angle([F(0,-1),F(0,0),F(Math.sin(Xe(n)),-Math.cos(Xe(n)))],rt,1.4,1.2).position(R.origin).fill("#ffffff96").opacity(0);f==!0&&(R=R.opacity(1),Pt=Pt.opacity(1),B=B.opacity(1),J=J.opacity(1)),U(C,K,X,at,it,R,V,Pt,B,J),Vo(I,M)}function gT(a,t){const n=t.points,s=t.showDisplacement,l=t.showSectionLength;let u=(V,N)=>MathJax.tex2svg(V,N).innerHTML;const f=n.map(V=>V.x),g=Math.min(...f);let m=Math.max(...f)-g;const b=n.map(V=>V.y),E=Math.min(...b);let M=Math.max(...b)-E;m==0&&M!=0&&(m=M),M==0&&m!=0&&(M=.2*m),m==0&&M==0&&(m=10,M=10);const x=m/M;a.innerHTML="",a.style.aspectRatio=x.toString();const I=document.createElementNS("http://www.w3.org/2000/svg","svg");I.classList.add("diagramSvg"),I.style.aspectRatio=x.toString(),I.style.width="100%",a.appendChild(I);let U=(...V)=>{Fc(I,Xt(...V))},rt=n.map(V=>F(V.x,V.y)),X=on(rt).strokewidth(3).stroke("blue").opacity(.5),K=[],at=[];n.forEach(V=>{let N=eg(.025*m).position(F(V.x,V.y)).fill("lightblue").stroke("white").strokewidth(3);if(K.push(N),V.label){let z=Xs(V.label).position(F(V.x,V.y)).fontfamily("mitr, sans-serif").fontsize(20).textstroke("white").textstrokewidth(1);at.push(z)}});let it=n[n.length-1],et=n[0],w=F(it.x-et.x,it.y-et.y),R=un.vector(w,"",F(0),.03*m).position(F(et.x,et.y)).fill("lightred").stroke("lightred").strokewidth(3).opacity(0);s&&w.length()!=0&&(R=R.opacity(1));let C=[];for(let V=0;V<n.length-1;V++){let N=F(n[V].x,n[V].y),z=F(n[V+1].x,n[V+1].y),D=Math.sqrt((n[V+1].x-n[V].x)**2+(n[V+1].y-n[V].y)**2).toFixed(0);C.push(un.length(N,z,D.toString(),.03*m,.03*m).opacity(0))}if(l)for(let V=0;V<C.length;V++)C[V]=C[V].opacity(1);U(X,...K,...C,R,...at),U(X,...K,...C,R,...at),Vo(I,u)}function mT(a,t){const n=t.u,s=t.a,l=t.t,u=t.direction,f=t.objectLabel,g=t.showAccel,p=t.showVelo,m=t.showDist,b=n*l+.5*s*l*l;let E=(N,z)=>MathJax.tex2svg(N,z).innerHTML,T=0,M=0;if(b>=0?T=b:M=b,s!=0){const N=-n/s;if(N>0&&N<l){const z=n*N+.5*s*N*N;z>=0&&z>T?T=z:z<0&&z<M&&(M=z)}}const x=T-M;let I;u=="horizontal"?I=4:I=1,a.innerHTML="",a.style.aspectRatio=I.toString();const U=document.createElementNS("http://www.w3.org/2000/svg","svg");U.classList.add("diagramSvg"),U.style.aspectRatio=I.toString(),U.style.width="100%",a.appendChild(U);const rt=document.createElement("div");a.appendChild(rt);let X=(...N)=>{Fc(U,Xt(...N))},K=new G1(rt,U),at;u=="horizontal"?at=js(x,x/I).position(F((M+T)/2,0)):at=js(x*I,x).position(F(0,(M+T)/2)),at=at.scale(F(1.14,1.14)).strokewidth(0);let it;u=="horizontal"?it=js(.4*x,x/I).position(F(b,0)).strokewidth(0):it=js(x*I,.4*x).position(F(0,b)).strokewidth(0);let et=eg(.04*x).fill("lightblue").stroke("white").strokewidth(3),w=Xs(f).fontfamily("mitr, sans-serif").fontsize(16).textstroke("white").textstrokewidth(.4),R;u=="horizontal"?R=un.vector(F(.2*x*Math.sign(s),0),"a = "+s.toFixed(1)+" m/s",F(-(.1*x*Math.sign(s)),.04*x),.02*x).fill("red").stroke("red").position(at.origin).translate(F(-(.1*x*Math.sign(s)),.06*x)):R=un.vector(F(0,.2*x*Math.sign(s)),"a = "+s.toFixed(1)+" m/s",F(.12*x,-(.1*x*Math.sign(s))),.02*x).fill("red").stroke("red").position(at.origin).translate(F(.14*x,-(.1*x*Math.sign(s)))),(g==!1||s==0)&&(R=R.opacity(0));let C,V;K.draw_function=N=>{let z=N.t,D=n*z+.5*s*z*z,Rt=n+s*z,Pt=.2*x/Math.max(Math.abs(n+s*l),Math.abs(n));u=="horizontal"?(et=et.position(F(D,-.03*x)),w=w.position(F(D,-.03*x))):(et=et.position(F(0,D)),w=w.position(F(0,D))),u=="horizontal"?C=un.vector(F(Pt*Rt,0),Rt.toFixed(1)+" m/s",F(-(Pt/2*Rt),.04*x),.02*x).fill("blue").stroke("blue").position(et.origin):C=un.vector(F(0,Pt*Rt),Rt.toFixed(1)+" m/s",F(.12*x,-(Pt/2*Rt)),.02*x).fill("blue").stroke("blue").position(et.origin),p==!1&&(C=C.opacity(0)),u=="horizontal"?V=un.length(F(0,-.03*x),et.origin,"s = "+D.toFixed(1)+" m",.06*x*Math.sign(D),.03*x,.1*x*Math.sign(D)):V=un.length(F(0,0),et.origin,"s = "+D.toFixed(1)+" m",-.1*x*Math.sign(D),.03*x,-.2*x*Math.sign(D)),(m==!1||D==0)&&(V=V.opacity(0)),X(at,it,et,w,R,C,V)},K.slider("t",0,l,0,l/1e3,l,(N,z)=>Gc(N)+" = "+z.toFixed(1)+" s"),K.draw(),K.draw(),Vo(U,E)}function pT(a,t){const n=t.graphSections,s=t.xLabel,l=t.yLabel,u=t.pointsToShowSlope,f=t.intervalsToShowArea;let g=(B,J)=>MathJax.tex2svg(B,J).innerHTML,p=n[0].domain.xStart,m=n[n.length-1].domain.xEnd,b=n[0].a*p*p+n[0].b*p+n[0].c,E=n[n.length-1].a*m*m+n[n.length-1].b*m+n[n.length-1].c;for(let B=0;B<n.length;B++){let J=n[B].domain.xStart,ot=n[B].domain.xEnd;J<p&&(p=J),ot>m&&(m=ot);let bt=n[B].a*J*J+n[B].b*J+n[B].c,xt=n[B].a*ot*ot+n[B].b*ot+n[B].c;bt<b&&(b=bt),xt<b&&(b=xt),bt>E&&(E=bt),xt>E&&(E=xt);let L=-n[B].b/(2*n[B].a);if(J<L&&L<ot){let $=n[B].a*L*L+n[B].b*L+n[B].c;$<b&&(b=$),$>E&&(E=$)}}b>0&&(b=0),p>0&&(p=0),E<0&&(E=0),m<0&&(m=0);const T=2;a.innerHTML="",a.style.aspectRatio=T.toString();const M=document.createElementNS("http://www.w3.org/2000/svg","svg");M.classList.add("diagramSvg"),M.style.aspectRatio=T.toString(),M.style.width="100%",a.appendChild(M);let x=(...B)=>{Fc(M,Xt(...B))},I={xrange:[p,m],yrange:[b,E],bbox:[F(-5*T,-5),F(5*T,5)],headsize:0,ticksize:.4,n_sample:500},U=Mo(I),rt=eT(I),X=on([F(0,0),F(.8,0)]).position(U(F(m,0))),K=on([F(0,0),F(0,.8)]).position(U(F(0,E))),at=Xt(rt,X,K).stroke("black").strokewidth(1.5),it=B=>{for(let J=0;J<n.length;J++)if(!(B<n[J].domain.xStart||B>n[J].domain.xEnd))return n[J].a*B*B+n[J].b*B+n[J].c},et=B=>{for(let J=0;J<n.length;J++)if(!(B<n[J].domain.xStart||B>n[J].domain.xEnd))return 2*n[J].a*B+n[J].b},w=[];for(let B=0;B<n.length;B++){let J=n[B].domain.xEnd-n[B].domain.xStart,ot=J/(m-p),bt=[];for(let L=1;L<ot*500;L++){let $=n[B].domain.xStart+L*J/(ot*500);bt.push(U(F($,it($))))}let xt=on(bt).stroke("blue").strokewidth(3).strokelinecap("round");if(w.push(xt),B>0){let L=U(F(n[B].domain.xStart,it(n[B].domain.xStart+J/(ot*500)))),$=U(F(n[B-1].domain.xEnd,it(n[B-1].domain.xEnd))),ut=on([$,L]).stroke("blue").strokewidth(2).strokedasharray([6,6]);w.push(ut)}}let R=Xs(s).position(U(F(m,0))).fontfamily("mitr, sans-serif").move_origin_text("center-left").translate(F(.4+.8,0)),C=Xs(l).position(U(F(0,E))).fontfamily("mitr, sans-serif").move_origin_text("bottom-center").translate(F(0,.4/T+.8)),V=Xt(R,C),N=[];for(let B=0;B<n.length;B++){let J=n[B].domain.xStart,ot=n[B].domain.xEnd;N.push(uo(J,0,J.toString(),I)),N.push(uo(ot,0,ot.toString(),I));let bt=n[B].a*J*J+n[B].b*J+n[B].c,xt=n[B].a*ot*ot+n[B].b*ot+n[B].c;N.push(fc(bt,0,bt.toString(),I)),N.push(fc(xt,0,xt.toString(),I))}let z=[];for(let B=0;B<n.length;B++){let J=n[B].domain.xEnd,ot=it(J),bt=U(F(0,ot)),xt=U(F(J,ot)),L=on([bt,xt]).stroke("grey").strokewidth(1).opacity(.5).strokedasharray([6,10]);z.push(L)}let D=on([]),Rt=[];if(f){D=aT(it,f.xStart,f.xEnd,I).fill("lightblue").opacity(.5).stroke("none"),Rt.push(uo(f.xStart,0,f.xStart.toString(),I)),Rt.push(uo(f.xEnd,0,f.xEnd.toString(),I));let B=it(f.xStart),J=it(f.xEnd);Rt.push(fc(B,0,B.toString(),I)),Rt.push(fc(J,0,J.toString(),I))}let Pt=[];if(u)for(let B=0;B<u.length;B++){let J=eg(.2).fill("lightred").strokewidth(0).position(U(F(u[B],it(u[B])))),ot=Math.atan(et(u[B])),bt=U(F(u[B]-Math.cos(ot),it(u[B])-Math.sin(ot))),L=U(F(u[B]+Math.cos(ot),it(u[B])+Math.sin(ot))).sub(bt),$=Math.atan2(L.y,L.x),ut=on([F(-1,0),F(1,0)]).rotate($).strokewidth(3.5).stroke("red").position(U(F(u[B],it(u[B])))),ht=Xt(ut,J);Pt.push(ht),Pt.push(uo(u[B],0,u[B].toString(),I))}x(...z,at,D,...Rt,...w,...Pt,V,...N),x(...z,at,D,...Rt,...w,...Pt,V,...N),Vo(M,g)}function Ry({objJson:a}){const t=$e.useRef(null);return $e.useEffect(()=>{a.name=="create_inclined_plane_diagram"?dT(t.current,a.parameters):a.name=="create_motion_path_diagram"?gT(t.current,a.parameters):a.name=="create_rectilinear_motion_animation"?mT(t.current,a.parameters):a.name=="create_polynomial_graph"?pT(t.current,a.parameters):t.current.innerHTML=""},[a]),ft.jsx("div",{ref:t,className:d1.diagram})}function _T({problem:a}){$e.useEffect(()=>{MathJax.typeset()},[a]);const n=hy(a.question).map((m,b)=>{if(m.type==="text")return ft.jsx("p",{children:m.text},b);if(m.type==="jsonObj")return ft.jsx(Ry,{objJson:m.jsonObj},b)}),s=[];for(let m=0;m<a.choices.length;m++)s.push(ft.jsx("p",{children:m+1+". "+a.choices[m]},m));const l=ft.jsx("p",{children:" : "+a.hint}),u=a.answer+1,f=ft.jsx("p",{children:" : "+u}),p=hy(a.solution).map((m,b)=>{if(m.type==="text")return ft.jsx("p",{children:m.text},b);if(m.type==="jsonObj")return ft.jsx(Ry,{objJson:m.jsonObj},b)});return ft.jsxs("div",{className:h1.preview,children:[n,s,l,f,p]})}const yT="_editor_d8189_1",vT={editor:yT},bT=()=>{};var xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=function(a){const t=[];let n=0;for(let s=0;s<a.length;s++){let l=a.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},ET=function(a){const t=[];let n=0,s=0;for(;n<a.length;){const l=a[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const u=a[n++];t[s++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=a[n++],f=a[n++],g=a[n++],p=((l&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const u=a[n++],f=a[n++];t[s++]=String.fromCharCode((l&15)<<12|(u&63)<<6|f&63)}}return t.join("")},qv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<a.length;l+=3){const u=a[l],f=l+1<a.length,g=f?a[l+1]:0,p=l+2<a.length,m=p?a[l+2]:0,b=u>>2,E=(u&3)<<4|g>>4;let T=(g&15)<<2|m>>6,M=m&63;p||(M=64,f||(T=64)),s.push(n[b],n[E],n[T],n[M])}return s.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(Hv(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):ET(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<a.length;){const u=n[a.charAt(l++)],g=l<a.length?n[a.charAt(l)]:0;++l;const m=l<a.length?n[a.charAt(l)]:64;++l;const E=l<a.length?n[a.charAt(l)]:64;if(++l,u==null||g==null||m==null||E==null)throw new TT;const T=u<<2|g>>4;if(s.push(T),m!==64){const M=g<<4&240|m>>2;if(s.push(M),E!==64){const x=m<<6&192|E;s.push(x)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class TT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AT=function(a){const t=Hv(a);return qv.encodeByteArray(t,!0)},xc=function(a){return AT(a).replace(/\./g,"")},ST=function(a){try{return qv.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=()=>wT().__FIREBASE_DEFAULTS__,xT=()=>{if(typeof process>"u"||typeof xy>"u")return;const a=xy.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},CT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&ST(a[1]);return t&&JSON.parse(t)},ng=()=>{try{return bT()||RT()||xT()||CT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},DT=a=>ng()?.emulatorHosts?.[a],VT=a=>{const t=DT(a);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Pv=()=>ng()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MT(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...a};return[xc(JSON.stringify(n)),xc(JSON.stringify(f)),""].join(".")}const mo={};function IT(){const a={prod:[],emulator:[]};for(const t of Object.keys(mo))mo[t]?a.emulator.push(t):a.prod.push(t);return a}function LT(a){let t=document.getElementById(a),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",a),n=!0),{created:n,element:t}}let Cy=!1;function zT(a,t){if(typeof window>"u"||typeof document>"u"||!ig(window.location.host)||mo[a]===t||mo[a]||Cy)return;mo[a]=t;function n(T){return`__firebase__banner__${T}`}const s="__firebase__banner",u=IT().prod.length>0;function f(){const T=document.getElementById(s);T&&T.remove()}function g(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,M){T.setAttribute("width","24"),T.setAttribute("id",M),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Cy=!0,f()},T}function b(T,M){T.setAttribute("id",M),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=LT(s),M=n("text"),x=document.getElementById(M)||document.createElement("span"),I=n("learnmore"),U=document.getElementById(I)||document.createElement("a"),rt=n("preprendIcon"),X=document.getElementById(rt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;g(K),b(U,I);const at=m();p(X,rt),K.append(X,x,U,at),document.body.appendChild(K)}u?(x.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){const a=ng()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BT(){return!kT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jT(){try{return typeof indexedDB=="object"}catch{return!1}}function HT(){return new Promise((a,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),a(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="FirebaseError";class $a extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=qT,Object.setPrototypeOf(this,$a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gv.prototype.create)}}class Gv{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,u=this.errors[t],f=u?PT(u,s):"Error",g=`${this.serviceName}: ${f} (${l}).`;return new $a(l,g,s)}}function PT(a,t){return a.replace(GT,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const GT=/\{\$([^}]+)}/g;function Cc(a,t){if(a===t)return!0;const n=Object.keys(a),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const u=a[l],f=t[l];if(Dy(u)&&Dy(f)){if(!Cc(u,f))return!1}else if(u!==f)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Dy(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(a){return a&&a._delegate?a._delegate:a}class Eo{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new NT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(YT(t))try{this.getOrInitializeService({instanceIdentifier:zr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});s.resolve(u)}catch{}}}}clearInstance(t=zr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=zr){return this.instances.has(t)}getOptions(t=zr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);s===g&&f.resolve(l)}return l}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&t(u,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:QT(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=zr){return this.component?this.component.multipleInstances?t:zr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QT(a){return a===zr?void 0:a}function YT(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new FT(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(qt||(qt={}));const KT={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},$T=qt.INFO,ZT={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},JT=(a,t,...n)=>{if(t<a.logLevel)return;const s=new Date().toISOString(),l=ZT[t];if(l)console[l](`[${s}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Fv{constructor(t){this.name=t,this._logLevel=$T,this._logHandler=JT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?KT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...t),this._logHandler(this,qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...t),this._logHandler(this,qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...t),this._logHandler(this,qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...t),this._logHandler(this,qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...t),this._logHandler(this,qt.ERROR,...t)}}const WT=(a,t)=>t.some(n=>a instanceof n);let Vy,Ny;function tA(){return Vy||(Vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eA(){return Ny||(Ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qv=new WeakMap,Cd=new WeakMap,Yv=new WeakMap,_d=new WeakMap,sg=new WeakMap;function nA(a){const t=new Promise((n,s)=>{const l=()=>{a.removeEventListener("success",u),a.removeEventListener("error",f)},u=()=>{n(qs(a.result)),l()},f=()=>{s(a.error),l()};a.addEventListener("success",u),a.addEventListener("error",f)});return t.then(n=>{n instanceof IDBCursor&&Qv.set(n,a)}).catch(()=>{}),sg.set(t,a),t}function iA(a){if(Cd.has(a))return;const t=new Promise((n,s)=>{const l=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",f),a.removeEventListener("abort",f)},u=()=>{n(),l()},f=()=>{s(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",u),a.addEventListener("error",f),a.addEventListener("abort",f)});Cd.set(a,t)}let Dd={get(a,t,n){if(a instanceof IDBTransaction){if(t==="done")return Cd.get(a);if(t==="objectStoreNames")return a.objectStoreNames||Yv.get(a);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qs(a[t])},set(a,t,n){return a[t]=n,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function sA(a){Dd=a(Dd)}function rA(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=a.call(yd(this),t,...n);return Yv.set(s,t.sort?t.sort():[t]),qs(s)}:eA().includes(a)?function(...t){return a.apply(yd(this),t),qs(Qv.get(this))}:function(...t){return qs(a.apply(yd(this),t))}}function aA(a){return typeof a=="function"?rA(a):(a instanceof IDBTransaction&&iA(a),WT(a,tA())?new Proxy(a,Dd):a)}function qs(a){if(a instanceof IDBRequest)return nA(a);if(_d.has(a))return _d.get(a);const t=aA(a);return t!==a&&(_d.set(a,t),sg.set(t,a)),t}const yd=a=>sg.get(a);function lA(a,t,{blocked:n,upgrade:s,blocking:l,terminated:u}={}){const f=indexedDB.open(a,t),g=qs(f);return s&&f.addEventListener("upgradeneeded",p=>{s(qs(f.result),p.oldVersion,p.newVersion,qs(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),l&&p.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),g}const oA=["get","getKey","getAll","getAllKeys","count"],uA=["put","add","delete","clear"],vd=new Map;function My(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(vd.get(t))return vd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=uA.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||oA.includes(n)))return;const u=async function(f,...g){const p=this.transaction(f,l?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(g.shift())),(await Promise.all([m[n](...g),l&&p.done]))[0]};return vd.set(t,u),u}sA(a=>({...a,get:(t,n,s)=>My(t,n)||a.get(t,n,s),has:(t,n)=>!!My(t,n)||a.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hA(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function hA(a){return a.getComponent()?.type==="VERSION"}const Vd="@firebase/app",Oy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Fv("@firebase/app"),fA="@firebase/app-compat",dA="@firebase/analytics-compat",gA="@firebase/analytics",mA="@firebase/app-check-compat",pA="@firebase/app-check",_A="@firebase/auth",yA="@firebase/auth-compat",vA="@firebase/database",bA="@firebase/data-connect",EA="@firebase/database-compat",TA="@firebase/functions",AA="@firebase/functions-compat",SA="@firebase/installations",wA="@firebase/installations-compat",RA="@firebase/messaging",xA="@firebase/messaging-compat",CA="@firebase/performance",DA="@firebase/performance-compat",VA="@firebase/remote-config",NA="@firebase/remote-config-compat",MA="@firebase/storage",OA="@firebase/storage-compat",IA="@firebase/firestore",LA="@firebase/ai",zA="@firebase/firestore-compat",UA="firebase",kA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd="[DEFAULT]",BA={[Vd]:"fire-core",[fA]:"fire-core-compat",[gA]:"fire-analytics",[dA]:"fire-analytics-compat",[pA]:"fire-app-check",[mA]:"fire-app-check-compat",[_A]:"fire-auth",[yA]:"fire-auth-compat",[vA]:"fire-rtdb",[bA]:"fire-data-connect",[EA]:"fire-rtdb-compat",[TA]:"fire-fn",[AA]:"fire-fn-compat",[SA]:"fire-iid",[wA]:"fire-iid-compat",[RA]:"fire-fcm",[xA]:"fire-fcm-compat",[CA]:"fire-perf",[DA]:"fire-perf-compat",[VA]:"fire-rc",[NA]:"fire-rc-compat",[MA]:"fire-gcs",[OA]:"fire-gcs-compat",[IA]:"fire-fst",[zA]:"fire-fst-compat",[LA]:"fire-vertex","fire-js":"fire-js",[UA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,jA=new Map,Md=new Map;function Iy(a,t){try{a.container.addComponent(t)}catch(n){ns.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,n)}}function Vc(a){const t=a.name;if(Md.has(t))return ns.debug(`There were multiple attempts to register component ${t}.`),!1;Md.set(t,a);for(const n of Dc.values())Iy(n,a);for(const n of jA.values())Iy(n,a);return!0}function HA(a,t){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(t)}function qA(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new Gv("app","Firebase",PA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=kA;function Xv(a,t={}){let n=a;typeof t!="object"&&(t={name:t});const s={name:Nd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Ps.create("bad-app-name",{appName:String(l)});if(n||(n=Pv()),!n)throw Ps.create("no-options");const u=Dc.get(l);if(u){if(Cc(n,u.options)&&Cc(s,u.config))return u;throw Ps.create("duplicate-app",{appName:l})}const f=new XT(l);for(const p of Md.values())f.addComponent(p);const g=new GA(n,s,f);return Dc.set(l,g),g}function QA(a=Nd){const t=Dc.get(a);if(!t&&a===Nd&&Pv())return Xv();if(!t)throw Ps.create("no-app",{appName:a});return t}function Ba(a,t,n){let s=BA[a]??a;n&&(s+=`-${n}`);const l=s.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const f=[`Unable to register library "${s}" with version "${t}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ns.warn(f.join(" "));return}Vc(new Eo(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebase-heartbeat-database",XA=1,To="firebase-heartbeat-store";let bd=null;function Kv(){return bd||(bd=lA(YA,XA,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(a=>{throw Ps.create("idb-open",{originalErrorMessage:a.message})})),bd}async function KA(a){try{const n=(await Kv()).transaction(To),s=await n.objectStore(To).get($v(a));return await n.done,s}catch(t){if(t instanceof $a)ns.warn(t.message);else{const n=Ps.create("idb-get",{originalErrorMessage:t?.message});ns.warn(n.message)}}}async function Ly(a,t){try{const s=(await Kv()).transaction(To,"readwrite");await s.objectStore(To).put(t,$v(a)),await s.done}catch(n){if(n instanceof $a)ns.warn(n.message);else{const s=Ps.create("idb-set",{originalErrorMessage:n?.message});ns.warn(s.message)}}}function $v(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=1024,ZA=30;class JA{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>ZA){const l=eS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ns.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zy(),{heartbeatsToSend:n,unsentEntries:s}=WA(this._heartbeatsCache.heartbeats),l=xc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ns.warn(t),""}}}function zy(){return new Date().toISOString().substring(0,10)}function WA(a,t=$A){const n=[];let s=a.slice();for(const l of a){const u=n.find(f=>f.agent===l.agent);if(u){if(u.dates.push(l.date),Uy(n)>t){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Uy(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class tS{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jT()?HT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await KA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ly(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ly(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Uy(a){return xc(JSON.stringify({version:2,heartbeats:a})).length}function eS(a){if(a.length===0)return-1;let t=0,n=a[0].date;for(let s=1;s<a.length;s++)a[s].date<n&&(n=a[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(a){Vc(new Eo("platform-logger",t=>new cA(t),"PRIVATE")),Vc(new Eo("heartbeat",t=>new JA(t),"PRIVATE")),Ba(Vd,Oy,a),Ba(Vd,Oy,"esm2020"),Ba("fire-js","")}nS("");var iS="firebase",sS="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ba(iS,sS,"app");var ky=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gs,Zv;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,R){function C(){}C.prototype=R.prototype,w.F=R.prototype,w.prototype=new C,w.prototype.constructor=w,w.D=function(V,N,z){for(var D=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)D[Rt-2]=arguments[Rt];return R.prototype[N].apply(V,D)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(w,R,C){C||(C=0);const V=Array(16);if(typeof R=="string")for(var N=0;N<16;++N)V[N]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(N=0;N<16;++N)V[N]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=w.g[0],C=w.g[1],N=w.g[2];let z=w.g[3],D;D=R+(z^C&(N^z))+V[0]+3614090360&4294967295,R=C+(D<<7&4294967295|D>>>25),D=z+(N^R&(C^N))+V[1]+3905402710&4294967295,z=R+(D<<12&4294967295|D>>>20),D=N+(C^z&(R^C))+V[2]+606105819&4294967295,N=z+(D<<17&4294967295|D>>>15),D=C+(R^N&(z^R))+V[3]+3250441966&4294967295,C=N+(D<<22&4294967295|D>>>10),D=R+(z^C&(N^z))+V[4]+4118548399&4294967295,R=C+(D<<7&4294967295|D>>>25),D=z+(N^R&(C^N))+V[5]+1200080426&4294967295,z=R+(D<<12&4294967295|D>>>20),D=N+(C^z&(R^C))+V[6]+2821735955&4294967295,N=z+(D<<17&4294967295|D>>>15),D=C+(R^N&(z^R))+V[7]+4249261313&4294967295,C=N+(D<<22&4294967295|D>>>10),D=R+(z^C&(N^z))+V[8]+1770035416&4294967295,R=C+(D<<7&4294967295|D>>>25),D=z+(N^R&(C^N))+V[9]+2336552879&4294967295,z=R+(D<<12&4294967295|D>>>20),D=N+(C^z&(R^C))+V[10]+4294925233&4294967295,N=z+(D<<17&4294967295|D>>>15),D=C+(R^N&(z^R))+V[11]+2304563134&4294967295,C=N+(D<<22&4294967295|D>>>10),D=R+(z^C&(N^z))+V[12]+1804603682&4294967295,R=C+(D<<7&4294967295|D>>>25),D=z+(N^R&(C^N))+V[13]+4254626195&4294967295,z=R+(D<<12&4294967295|D>>>20),D=N+(C^z&(R^C))+V[14]+2792965006&4294967295,N=z+(D<<17&4294967295|D>>>15),D=C+(R^N&(z^R))+V[15]+1236535329&4294967295,C=N+(D<<22&4294967295|D>>>10),D=R+(N^z&(C^N))+V[1]+4129170786&4294967295,R=C+(D<<5&4294967295|D>>>27),D=z+(C^N&(R^C))+V[6]+3225465664&4294967295,z=R+(D<<9&4294967295|D>>>23),D=N+(R^C&(z^R))+V[11]+643717713&4294967295,N=z+(D<<14&4294967295|D>>>18),D=C+(z^R&(N^z))+V[0]+3921069994&4294967295,C=N+(D<<20&4294967295|D>>>12),D=R+(N^z&(C^N))+V[5]+3593408605&4294967295,R=C+(D<<5&4294967295|D>>>27),D=z+(C^N&(R^C))+V[10]+38016083&4294967295,z=R+(D<<9&4294967295|D>>>23),D=N+(R^C&(z^R))+V[15]+3634488961&4294967295,N=z+(D<<14&4294967295|D>>>18),D=C+(z^R&(N^z))+V[4]+3889429448&4294967295,C=N+(D<<20&4294967295|D>>>12),D=R+(N^z&(C^N))+V[9]+568446438&4294967295,R=C+(D<<5&4294967295|D>>>27),D=z+(C^N&(R^C))+V[14]+3275163606&4294967295,z=R+(D<<9&4294967295|D>>>23),D=N+(R^C&(z^R))+V[3]+4107603335&4294967295,N=z+(D<<14&4294967295|D>>>18),D=C+(z^R&(N^z))+V[8]+1163531501&4294967295,C=N+(D<<20&4294967295|D>>>12),D=R+(N^z&(C^N))+V[13]+2850285829&4294967295,R=C+(D<<5&4294967295|D>>>27),D=z+(C^N&(R^C))+V[2]+4243563512&4294967295,z=R+(D<<9&4294967295|D>>>23),D=N+(R^C&(z^R))+V[7]+1735328473&4294967295,N=z+(D<<14&4294967295|D>>>18),D=C+(z^R&(N^z))+V[12]+2368359562&4294967295,C=N+(D<<20&4294967295|D>>>12),D=R+(C^N^z)+V[5]+4294588738&4294967295,R=C+(D<<4&4294967295|D>>>28),D=z+(R^C^N)+V[8]+2272392833&4294967295,z=R+(D<<11&4294967295|D>>>21),D=N+(z^R^C)+V[11]+1839030562&4294967295,N=z+(D<<16&4294967295|D>>>16),D=C+(N^z^R)+V[14]+4259657740&4294967295,C=N+(D<<23&4294967295|D>>>9),D=R+(C^N^z)+V[1]+2763975236&4294967295,R=C+(D<<4&4294967295|D>>>28),D=z+(R^C^N)+V[4]+1272893353&4294967295,z=R+(D<<11&4294967295|D>>>21),D=N+(z^R^C)+V[7]+4139469664&4294967295,N=z+(D<<16&4294967295|D>>>16),D=C+(N^z^R)+V[10]+3200236656&4294967295,C=N+(D<<23&4294967295|D>>>9),D=R+(C^N^z)+V[13]+681279174&4294967295,R=C+(D<<4&4294967295|D>>>28),D=z+(R^C^N)+V[0]+3936430074&4294967295,z=R+(D<<11&4294967295|D>>>21),D=N+(z^R^C)+V[3]+3572445317&4294967295,N=z+(D<<16&4294967295|D>>>16),D=C+(N^z^R)+V[6]+76029189&4294967295,C=N+(D<<23&4294967295|D>>>9),D=R+(C^N^z)+V[9]+3654602809&4294967295,R=C+(D<<4&4294967295|D>>>28),D=z+(R^C^N)+V[12]+3873151461&4294967295,z=R+(D<<11&4294967295|D>>>21),D=N+(z^R^C)+V[15]+530742520&4294967295,N=z+(D<<16&4294967295|D>>>16),D=C+(N^z^R)+V[2]+3299628645&4294967295,C=N+(D<<23&4294967295|D>>>9),D=R+(N^(C|~z))+V[0]+4096336452&4294967295,R=C+(D<<6&4294967295|D>>>26),D=z+(C^(R|~N))+V[7]+1126891415&4294967295,z=R+(D<<10&4294967295|D>>>22),D=N+(R^(z|~C))+V[14]+2878612391&4294967295,N=z+(D<<15&4294967295|D>>>17),D=C+(z^(N|~R))+V[5]+4237533241&4294967295,C=N+(D<<21&4294967295|D>>>11),D=R+(N^(C|~z))+V[12]+1700485571&4294967295,R=C+(D<<6&4294967295|D>>>26),D=z+(C^(R|~N))+V[3]+2399980690&4294967295,z=R+(D<<10&4294967295|D>>>22),D=N+(R^(z|~C))+V[10]+4293915773&4294967295,N=z+(D<<15&4294967295|D>>>17),D=C+(z^(N|~R))+V[1]+2240044497&4294967295,C=N+(D<<21&4294967295|D>>>11),D=R+(N^(C|~z))+V[8]+1873313359&4294967295,R=C+(D<<6&4294967295|D>>>26),D=z+(C^(R|~N))+V[15]+4264355552&4294967295,z=R+(D<<10&4294967295|D>>>22),D=N+(R^(z|~C))+V[6]+2734768916&4294967295,N=z+(D<<15&4294967295|D>>>17),D=C+(z^(N|~R))+V[13]+1309151649&4294967295,C=N+(D<<21&4294967295|D>>>11),D=R+(N^(C|~z))+V[4]+4149444226&4294967295,R=C+(D<<6&4294967295|D>>>26),D=z+(C^(R|~N))+V[11]+3174756917&4294967295,z=R+(D<<10&4294967295|D>>>22),D=N+(R^(z|~C))+V[2]+718787259&4294967295,N=z+(D<<15&4294967295|D>>>17),D=C+(z^(N|~R))+V[9]+3951481745&4294967295,w.g[0]=w.g[0]+R&4294967295,w.g[1]=w.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,w.g[2]=w.g[2]+N&4294967295,w.g[3]=w.g[3]+z&4294967295}s.prototype.v=function(w,R){R===void 0&&(R=w.length);const C=R-this.blockSize,V=this.C;let N=this.h,z=0;for(;z<R;){if(N==0)for(;z<=C;)l(this,w,z),z+=this.blockSize;if(typeof w=="string"){for(;z<R;)if(V[N++]=w.charCodeAt(z++),N==this.blockSize){l(this,V),N=0;break}}else for(;z<R;)if(V[N++]=w[z++],N==this.blockSize){l(this,V),N=0;break}}this.h=N,this.o+=R},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var R=1;R<w.length-8;++R)w[R]=0;R=this.o*8;for(var C=w.length-8;C<w.length;++C)w[C]=R&255,R/=256;for(this.v(w),w=Array(16),R=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)w[R++]=this.g[C]>>>V&255;return w};function u(w,R){var C=g;return Object.prototype.hasOwnProperty.call(C,w)?C[w]:C[w]=R(w)}function f(w,R){this.h=R;const C=[];let V=!0;for(let N=w.length-1;N>=0;N--){const z=w[N]|0;V&&z==R||(C[N]=z,V=!1)}this.g=C}var g={};function p(w){return-128<=w&&w<128?u(w,function(R){return new f([R|0],R<0?-1:0)}):new f([w|0],w<0?-1:0)}function m(w){if(isNaN(w)||!isFinite(w))return E;if(w<0)return U(m(-w));const R=[];let C=1;for(let V=0;w>=C;V++)R[V]=w/C|0,C*=4294967296;return new f(R,0)}function b(w,R){if(w.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(w.charAt(0)=="-")return U(b(w.substring(1),R));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=m(Math.pow(R,8));let V=E;for(let z=0;z<w.length;z+=8){var N=Math.min(8,w.length-z);const D=parseInt(w.substring(z,z+N),R);N<8?(N=m(Math.pow(R,N)),V=V.j(N).add(m(D))):(V=V.j(C),V=V.add(m(D)))}return V}var E=p(0),T=p(1),M=p(16777216);a=f.prototype,a.m=function(){if(I(this))return-U(this).m();let w=0,R=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);w+=(V>=0?V:4294967296+V)*R,R*=4294967296}return w},a.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(x(this))return"0";if(I(this))return"-"+U(this).toString(w);const R=m(Math.pow(w,6));var C=this;let V="";for(;;){const N=at(C,R).g;C=rt(C,N.j(R));let z=((C.g.length>0?C.g[0]:C.h)>>>0).toString(w);if(C=N,x(C))return z+V;for(;z.length<6;)z="0"+z;V=z+V}},a.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function x(w){if(w.h!=0)return!1;for(let R=0;R<w.g.length;R++)if(w.g[R]!=0)return!1;return!0}function I(w){return w.h==-1}a.l=function(w){return w=rt(this,w),I(w)?-1:x(w)?0:1};function U(w){const R=w.g.length,C=[];for(let V=0;V<R;V++)C[V]=~w.g[V];return new f(C,~w.h).add(T)}a.abs=function(){return I(this)?U(this):this},a.add=function(w){const R=Math.max(this.g.length,w.g.length),C=[];let V=0;for(let N=0;N<=R;N++){let z=V+(this.i(N)&65535)+(w.i(N)&65535),D=(z>>>16)+(this.i(N)>>>16)+(w.i(N)>>>16);V=D>>>16,z&=65535,D&=65535,C[N]=D<<16|z}return new f(C,C[C.length-1]&-2147483648?-1:0)};function rt(w,R){return w.add(U(R))}a.j=function(w){if(x(this)||x(w))return E;if(I(this))return I(w)?U(this).j(U(w)):U(U(this).j(w));if(I(w))return U(this.j(U(w)));if(this.l(M)<0&&w.l(M)<0)return m(this.m()*w.m());const R=this.g.length+w.g.length,C=[];for(var V=0;V<2*R;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<w.g.length;N++){const z=this.i(V)>>>16,D=this.i(V)&65535,Rt=w.i(N)>>>16,Pt=w.i(N)&65535;C[2*V+2*N]+=D*Pt,X(C,2*V+2*N),C[2*V+2*N+1]+=z*Pt,X(C,2*V+2*N+1),C[2*V+2*N+1]+=D*Rt,X(C,2*V+2*N+1),C[2*V+2*N+2]+=z*Rt,X(C,2*V+2*N+2)}for(w=0;w<R;w++)C[w]=C[2*w+1]<<16|C[2*w];for(w=R;w<2*R;w++)C[w]=0;return new f(C,0)};function X(w,R){for(;(w[R]&65535)!=w[R];)w[R+1]+=w[R]>>>16,w[R]&=65535,R++}function K(w,R){this.g=w,this.h=R}function at(w,R){if(x(R))throw Error("division by zero");if(x(w))return new K(E,E);if(I(w))return R=at(U(w),R),new K(U(R.g),U(R.h));if(I(R))return R=at(w,U(R)),new K(U(R.g),R.h);if(w.g.length>30){if(I(w)||I(R))throw Error("slowDivide_ only works with positive integers.");for(var C=T,V=R;V.l(w)<=0;)C=it(C),V=it(V);var N=et(C,1),z=et(V,1);for(V=et(V,2),C=et(C,2);!x(V);){var D=z.add(V);D.l(w)<=0&&(N=N.add(C),z=D),V=et(V,1),C=et(C,1)}return R=rt(w,N.j(R)),new K(N,R)}for(N=E;w.l(R)>=0;){for(C=Math.max(1,Math.floor(w.m()/R.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),z=m(C),D=z.j(R);I(D)||D.l(w)>0;)C-=V,z=m(C),D=z.j(R);x(z)&&(z=T),N=N.add(z),w=rt(w,D)}return new K(N,w)}a.B=function(w){return at(this,w).h},a.and=function(w){const R=Math.max(this.g.length,w.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)&w.i(V);return new f(C,this.h&w.h)},a.or=function(w){const R=Math.max(this.g.length,w.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)|w.i(V);return new f(C,this.h|w.h)},a.xor=function(w){const R=Math.max(this.g.length,w.g.length),C=[];for(let V=0;V<R;V++)C[V]=this.i(V)^w.i(V);return new f(C,this.h^w.h)};function it(w){const R=w.g.length+1,C=[];for(let V=0;V<R;V++)C[V]=w.i(V)<<1|w.i(V-1)>>>31;return new f(C,w.h)}function et(w,R){const C=R>>5;R%=32;const V=w.g.length-C,N=[];for(let z=0;z<V;z++)N[z]=R>0?w.i(z+C)>>>R|w.i(z+C+1)<<32-R:w.i(z+C);return new f(N,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Zv=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=m,f.fromString=b,Gs=f}).apply(typeof ky<"u"?ky:typeof self<"u"?self:typeof window<"u"?window:{});var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jv,ho,Wv,bc,Od,t0,e0,n0;(function(){var a,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dc=="object"&&dc];for(var _=0;_<c.length;++_){var v=c[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function l(c,_){if(_)t:{var v=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var H=c[S];if(!(H in v))break t;v=v[H]}c=c[c.length-1],S=v[c],_=_(S),_!=S&&_!=null&&t(v,c,{configurable:!0,writable:!0,value:_})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(_){var v=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&v.push([S,_[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function g(c){var _=typeof c;return _=="object"&&c!=null||_=="function"}function p(c,_,v){return c.call.apply(c.bind,arguments)}function m(c,_,v){return m=p,m.apply(null,arguments)}function b(c,_){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function E(c,_){function v(){}v.prototype=_.prototype,c.Z=_.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(S,H,Q){for(var lt=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)lt[Ct-2]=arguments[Ct];return _.prototype[H].apply(S,lt)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function M(c){const _=c.length;if(_>0){const v=Array(_);for(let S=0;S<_;S++)v[S]=c[S];return v}return[]}function x(c,_){for(let S=1;S<arguments.length;S++){const H=arguments[S];var v=typeof H;if(v=v!="object"?v:H?Array.isArray(H)?"array":v:"null",v=="array"||v=="object"&&typeof H.length=="number"){v=c.length||0;const Q=H.length||0;c.length=v+Q;for(let lt=0;lt<Q;lt++)c[v+lt]=H[lt]}else c.push(H)}}class I{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function U(c){f.setTimeout(()=>{throw c},0)}function rt(){var c=w;let _=null;return c.g&&(_=c.g,c.g=c.g.next,c.g||(c.h=null),_.next=null),_}class X{constructor(){this.h=this.g=null}add(_,v){const S=K.get();S.set(_,v),this.h?this.h.next=S:this.g=S,this.h=S}}var K=new I(()=>new at,c=>c.reset());class at{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let it,et=!1,w=new X,R=()=>{const c=Promise.resolve(void 0);it=()=>{c.then(C)}};function C(){for(var c;c=rt();){try{c.h.call(c.g)}catch(v){U(v)}var _=K;_.j(c),_.h<100&&(_.h++,c.next=_.g,_.g=c)}et=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,_){this.type=c,this.g=this.target=_,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,_=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,_),f.removeEventListener("test",v,_)}catch{}return c})();function D(c){return/^[\s\xa0]*$/.test(c)}function Rt(c,_){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,_)}E(Rt,N),Rt.prototype.init=function(c,_){const v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=_,_=c.relatedTarget,_||(v=="mouseover"?_=c.fromElement:v=="mouseout"&&(_=c.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Rt.Z.h.call(this)},Rt.prototype.h=function(){Rt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Pt="closure_listenable_"+(Math.random()*1e6|0),B=0;function J(c,_,v,S,H){this.listener=c,this.proxy=null,this.src=_,this.type=v,this.capture=!!S,this.ha=H,this.key=++B,this.da=this.fa=!1}function ot(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function bt(c,_,v){for(const S in c)_.call(v,c[S],S,c)}function xt(c,_){for(const v in c)_.call(void 0,c[v],v,c)}function L(c){const _={};for(const v in c)_[v]=c[v];return _}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(c,_){let v,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(v in S)c[v]=S[v];for(let Q=0;Q<$.length;Q++)v=$[Q],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function ht(c){this.src=c,this.g={},this.h=0}ht.prototype.add=function(c,_,v,S,H){const Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);const lt=Nt(c,_,S,H);return lt>-1?(_=c[lt],v||(_.fa=!1)):(_=new J(_,this.src,Q,!!S,H),_.fa=v,c.push(_)),_};function Tt(c,_){const v=_.type;if(v in c.g){var S=c.g[v],H=Array.prototype.indexOf.call(S,_,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(S,H,1),Q&&(ot(_),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Nt(c,_,v,S){for(let H=0;H<c.length;++H){const Q=c[H];if(!Q.da&&Q.listener==_&&Q.capture==!!v&&Q.ha==S)return H}return-1}var jt="closure_lm_"+(Math.random()*1e6|0),Me={};function oe(c,_,v,S,H){if(Array.isArray(_)){for(let Q=0;Q<_.length;Q++)oe(c,_[Q],v,S,H);return null}return v=il(v),c&&c[Pt]?c.J(_,v,g(S)?!!S.capture:!1,H):sr(c,_,v,!1,S,H)}function sr(c,_,v,S,H,Q){if(!_)throw Error("Invalid event type");const lt=g(H)?!!H.capture:!!H;let Ct=rr(c);if(Ct||(c[jt]=Ct=new ht(c)),v=Ct.add(_,v,S,lt,Q),v.proxy)return v;if(S=Gr(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)z||(H=lt),H===void 0&&(H=!1),c.addEventListener(_.toString(),S,H);else if(c.attachEvent)c.attachEvent(ri(_.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Gr(){function c(v){return _.call(c.src,c.listener,v)}const _=el;return c}function Fr(c,_,v,S,H){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)Fr(c,_[Q],v,S,H);else S=g(S)?!!S.capture:!!S,v=il(v),c&&c[Pt]?(c=c.i,Q=String(_).toString(),Q in c.g&&(_=c.g[Q],v=Nt(_,v,S,H),v>-1&&(ot(_[v]),Array.prototype.splice.call(_,v,1),_.length==0&&(delete c.g[Q],c.h--)))):c&&(c=rr(c))&&(_=c.g[_.toString()],c=-1,_&&(c=Nt(_,v,S,H)),(v=c>-1?_[c]:null)&&Qr(v))}function Qr(c){if(typeof c!="number"&&c&&!c.da){var _=c.src;if(_&&_[Pt])Tt(_.i,c);else{var v=c.type,S=c.proxy;_.removeEventListener?_.removeEventListener(v,S,c.capture):_.detachEvent?_.detachEvent(ri(v),S):_.addListener&&_.removeListener&&_.removeListener(S),(v=rr(_))?(Tt(v,c),v.h==0&&(v.src=null,_[jt]=null)):ot(c)}}}function ri(c){return c in Me?Me[c]:Me[c]="on"+c}function el(c,_){if(c.da)c=!0;else{_=new Rt(_,this);const v=c.listener,S=c.ha||c.src;c.fa&&Qr(c),c=v.call(S,_)}return c}function rr(c){return c=c[jt],c instanceof ht?c:null}var nl="__closure_events_fn_"+(Math.random()*1e9>>>0);function il(c){return typeof c=="function"?c:(c[nl]||(c[nl]=function(_){return c.handleEvent(_)}),c[nl])}function be(){V.call(this),this.i=new ht(this),this.M=this,this.G=null}E(be,V),be.prototype[Pt]=!0,be.prototype.removeEventListener=function(c,_,v,S){Fr(this,c,_,v,S)};function Oe(c,_){var v,S=c.G;if(S)for(v=[];S;S=S.G)v.push(S);if(c=c.M,S=_.type||_,typeof _=="string")_=new N(_,c);else if(_ instanceof N)_.target=_.target||c;else{var H=_;_=new N(S,c),ut(_,H)}H=!0;let Q,lt;if(v)for(lt=v.length-1;lt>=0;lt--)Q=_.g=v[lt],H=rs(Q,S,!0,_)&&H;if(Q=_.g=c,H=rs(Q,S,!0,_)&&H,H=rs(Q,S,!1,_)&&H,v)for(lt=0;lt<v.length;lt++)Q=_.g=v[lt],H=rs(Q,S,!1,_)&&H}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var c=this.i;for(const _ in c.g){const v=c.g[_];for(let S=0;S<v.length;S++)ot(v[S]);delete c.g[_],c.h--}}this.G=null},be.prototype.J=function(c,_,v,S){return this.i.add(String(c),_,!1,v,S)},be.prototype.K=function(c,_,v,S){return this.i.add(String(c),_,!0,v,S)};function rs(c,_,v,S){if(_=c.i.g[String(_)],!_)return!0;_=_.concat();let H=!0;for(let Q=0;Q<_.length;++Q){const lt=_[Q];if(lt&&!lt.da&&lt.capture==v){const Ct=lt.listener,pe=lt.ha||lt.src;lt.fa&&Tt(c.i,lt),H=Ct.call(pe,S)!==!1&&H}}return H&&!S.defaultPrevented}function ch(c,_){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:f.setTimeout(c,_||0)}function Uo(c){c.g=ch(()=>{c.g=null,c.i&&(c.i=!1,Uo(c))},c.l);const _=c.h;c.h=null,c.m.apply(null,_)}class sn extends V{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Uo(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(c){V.call(this),this.h=c,this.g={}}E(ar,V);var sl=[];function rl(c){bt(c.g,function(_,v){this.g.hasOwnProperty(v)&&Qr(_)},c),c.g={}}ar.prototype.N=function(){ar.Z.N.call(this),rl(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var as=f.JSON.stringify,hh=f.JSON.parse,ko=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Bo(){}function jo(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){N.call(this,"d")}E(qe,N);function Dn(){N.call(this,"c")}E(Dn,N);var me={},Ho=null;function Yr(){return Ho=Ho||new be}me.Ia="serverreachability";function qo(c){N.call(this,me.Ia,c)}E(qo,N);function ai(c){const _=Yr();Oe(_,new qo(_))}me.STAT_EVENT="statevent";function lr(c,_){N.call(this,me.STAT_EVENT,c),this.stat=_}E(lr,N);function Ee(c){const _=Yr();Oe(_,new lr(_,c))}me.Ja="timingevent";function li(c,_){N.call(this,me.Ja,c),this.size=_}E(li,N);function oi(c,_){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},_)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function fh(c,_,v,S,H,Q){c.info(function(){if(c.g)if(Q){var lt="",Ct=Q.split("&");for(let Qt=0;Qt<Ct.length;Qt++){var pe=Ct[Qt].split("=");if(pe.length>1){const ue=pe[0];pe=pe[1];const On=ue.split("_");lt=On.length>=2&&On[1]=="type"?lt+(ue+"="+pe+"&"):lt+(ue+"=redacted&")}}}else lt=null;else lt=Q;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+_+`
`+v+`
`+lt})}function Po(c,_,v,S,H,Q,lt){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+_+`
`+v+`
`+Q+" "+lt})}function ui(c,_,v,S){c.info(function(){return"XMLHTTP TEXT ("+_+"): "+dh(c,v)+(S?" "+S:"")})}function or(c,_){c.info(function(){return"TIMEOUT: "+_})}Yn.prototype.info=function(){};function dh(c,_){if(!c.g)return _;if(!_)return null;try{const Q=JSON.parse(_);if(Q){for(c=0;c<Q.length;c++)if(Array.isArray(Q[c])){var v=Q[c];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var H=S[0];if(H!="noop"&&H!="stop"&&H!="close")for(let lt=1;lt<S.length;lt++)S[lt]=""}}}}return as(Q)}catch{return _}}var ur={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},al={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ll;function cr(){}E(cr,Bo),cr.prototype.g=function(){return new XMLHttpRequest},ll=new cr;function zi(c){return encodeURIComponent(String(c))}function Go(c){var _=1;c=c.split(":");const v=[];for(;_>0&&c.length;)v.push(c.shift()),_--;return c.length&&v.push(c.join(":")),v}function Xn(c,_,v,S){this.j=c,this.i=_,this.l=v,this.S=S||1,this.V=new ar(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var Te={},Ue={};function ci(c,_,v){c.M=1,c.A=hr(Se(_)),c.u=v,c.R=!0,Xr(c,null)}function Xr(c,_){c.F=Date.now(),hi(c),c.B=Se(c.A);var v=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),Jr(v.i,"t",S),c.C=0,v=c.j.L,c.h=new Kn,c.g=ru(c.j,v?_:null,!c.u),c.P>0&&(c.O=new sn(m(c.Y,c,c.g),c.P)),_=c.V,v=c.g,S=c.ba;var H="readystatechange";Array.isArray(H)||(H&&(sl[0]=H.toString()),H=sl);for(let Q=0;Q<H.length;Q++){const lt=oe(v,H[Q],S||_.handleEvent,!1,_.h||_);if(!lt)break;_.g[lt.key]=lt}_=c.J?L(c.J):{},c.u?(c.v||(c.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,_)):(c.v="GET",c.g.ea(c.B,c.v,null,_)),ai(),fh(c.i,c.v,c.B,c.l,c.S,c.u)}Xn.prototype.ba=function(c){c=c.target;const _=this.O;_&&Jn(c)==3?_.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)t:{const Ct=Jn(this.g),pe=this.g.ya(),Qt=this.g.ca();if(!(Ct<3)&&(Ct!=3||this.g&&(this.h.h||this.g.la()||Pe(this.g)))){this.K||Ct!=4||pe==7||(pe==8||Qt<=0?ai(3):ai(2)),fi(this);var _=this.g.ca();this.X=_;var v=gh(this);if(this.o=_==200,Po(this.i,this.v,this.B,this.l,this.S,Ct,_),this.o){if(this.U&&!this.L){e:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var Q=S;break e}}Q=null}if(c=Q)ui(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,di(this,c);else{this.o=!1,this.m=3,Ee(12),vn(this),Vn(this);break t}}if(this.R){c=!0;let ue;for(;!this.K&&this.C<v.length;)if(ue=Qo(this,v),ue==Ue){Ct==4&&(this.m=4,Ee(14),c=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(ue==Te){this.m=4,Ee(15),ui(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else ui(this.i,this.l,ue,null),di(this,ue);if(Fo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||v.length!=0||this.h.h||(this.m=1,Ee(16),c=!1),this.o=this.o&&c,!c)ui(this.i,this.l,v,"[Invalid Chunked Response]"),vn(this),Vn(this);else if(v.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Tl(lt),lt.P=!0,Ee(11))}}else ui(this.i,this.l,v,null),di(this,v);Ct==4&&vn(this),this.o&&!this.K&&(Ct==4?eu(this.j,this):(this.o=!1,hi(this)))}else ki(this.g),_==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ee(12)):(this.m=0,Ee(13)),vn(this),Vn(this)}}}catch{}finally{}};function gh(c){if(!Fo(c))return c.g.la();const _=Pe(c.g);if(_==="")return"";let v="";const S=_.length,H=Jn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return vn(c),Vn(c),"";c.h.i=new f.TextDecoder}for(let Q=0;Q<S;Q++)c.h.h=!0,v+=c.h.i.decode(_[Q],{stream:!(H&&Q==S-1)});return _.length=0,c.h.g+=v,c.C=0,c.h.g}function Fo(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Qo(c,_){var v=c.C,S=_.indexOf(`
`,v);return S==-1?Ue:(v=Number(_.substring(v,S)),isNaN(v)?Te:(S+=1,S+v>_.length?Ue:(_=_.slice(S,S+v),c.C=S+v,_)))}Xn.prototype.cancel=function(){this.K=!0,vn(this)};function hi(c){c.T=Date.now()+c.H,Kr(c,c.H)}function Kr(c,_){if(c.D!=null)throw Error("WatchDog timer not null");c.D=oi(m(c.aa,c),_)}function fi(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Xn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(or(this.i,this.B),this.M!=2&&(ai(),Ee(17)),vn(this),this.m=2,Vn(this)):Kr(this,this.T-c)};function Vn(c){c.j.I==0||c.K||eu(c.j,c)}function vn(c){fi(c);var _=c.O;_&&typeof _.dispose=="function"&&_.dispose(),c.O=null,rl(c.V),c.g&&(_=c.g,c.g=null,_.abort(),_.dispose())}function di(c,_){try{var v=c.j;if(v.I!=0&&(v.g==c||mi(v.h,c))){if(!c.L&&mi(v.h,c)&&v.I==3){try{var S=v.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)ia(v),gs(v);else break t;yr(v),Ee(18)}}else v.xa=H[1],0<v.xa-v.K&&H[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=oi(m(v.Va,v),6e3));gi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ei(v,11)}else if((c.L||v.g==c)&&ia(v),!D(_))for(H=v.Ba.g.parse(_),_=0;_<H.length;_++){let Qt=H[_];const ue=Qt[0];if(!(ue<=v.K))if(v.K=ue,Qt=Qt[1],v.I==2)if(Qt[0]=="c"){v.M=Qt[1],v.ba=Qt[2];const On=Qt[3];On!=null&&(v.ka=On,v.j.info("VER="+v.ka));const Ti=Qt[4];Ti!=null&&(v.za=Ti,v.j.info("SVER="+v.za));const Wn=Qt[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(S=1.5*Wn,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ti=c.g;if(ti){const vr=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vr){var Q=S.h;Q.g||vr.indexOf("spdy")==-1&&vr.indexOf("quic")==-1&&vr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(cl(Q,Q.h),Q.h=null))}if(S.G){const sa=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;sa&&(S.wa=sa,$t(S.J,S.G,sa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var lt=c;if(S.na=su(S,S.L?S.ba:null,S.W),lt.L){hl(S.h,lt);var Ct=lt,pe=S.O;pe&&(Ct.H=pe),Ct.D&&(fi(Ct),hi(Ct)),S.g=lt}else Wo(S);v.i.length>0&&bi(v)}else Qt[0]!="stop"&&Qt[0]!="close"||Ei(v,7);else v.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Ei(v,7):bl(v):Qt[0]!="noop"&&v.l&&v.l.qa(Qt),v.A=0)}}ai(4)}catch{}}var Ae=class{constructor(c,_){this.g=c,this.map=_}};function ol(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ul(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function gi(c){return c.h?1:c.g?c.g.size:0}function mi(c,_){return c.h?c.h==_:c.g?c.g.has(_):!1}function cl(c,_){c.g?c.g.add(_):c.h=_}function hl(c,_){c.h&&c.h==_?c.h=null:c.g&&c.g.has(_)&&c.g.delete(_)}ol.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function fl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let _=c.i;for(const v of c.g.values())_=_.concat(v.G);return _}return M(c.i)}var Yo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $r(c,_){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const S=c[v].indexOf("=");let H,Q=null;S>=0?(H=c[v].substring(0,S),Q=c[v].substring(S+1)):H=c[v],_(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function bn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;c instanceof bn?(this.l=c.l,ke(this,c.j),this.o=c.o,this.g=c.g,ls(this,c.u),this.h=c.h,dl(this,Zo(c.i)),this.m=c.m):c&&(_=String(c).match(Yo))?(this.l=!1,ke(this,_[1]||"",!0),this.o=pi(_[2]||""),this.g=pi(_[3]||"",!0),ls(this,_[4]),this.h=pi(_[5]||"",!0),dl(this,_[6]||"",!0),this.m=pi(_[7]||"")):(this.l=!1,this.i=new us(null,this.l))}bn.prototype.toString=function(){const c=[];var _=this.j;_&&c.push(fr(_,Zr,!0),":");var v=this.g;return(v||_=="file")&&(c.push("//"),(_=this.o)&&c.push(fr(_,Zr,!0),"@"),c.push(zi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(fr(v,v.charAt(0)=="/"?gl:Xo,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",fr(v,Ko)),c.join("")},bn.prototype.resolve=function(c){const _=Se(this);let v=!!c.j;v?ke(_,c.j):v=!!c.o,v?_.o=c.o:v=!!c.g,v?_.g=c.g:v=c.u!=null;var S=c.h;if(v)ls(_,c.u);else if(v=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var H=_.h.lastIndexOf("/");H!=-1&&(S=_.h.slice(0,H+1)+S)}if(H=S,H==".."||H==".")S="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){S=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let lt=0;lt<H.length;){const Ct=H[lt++];Ct=="."?S&&lt==H.length&&Q.push(""):Ct==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),S&&lt==H.length&&Q.push("")):(Q.push(Ct),S=!0)}S=Q.join("/")}else S=H}return v?_.h=S:v=c.i.toString()!=="",v?dl(_,Zo(c.i)):v=!!c.m,v&&(_.m=c.m),_};function Se(c){return new bn(c)}function ke(c,_,v){c.j=v?pi(_,!0):_,c.j&&(c.j=c.j.replace(/:$/,""))}function ls(c,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);c.u=_}else c.u=null}function dl(c,_,v){_ instanceof us?(c.i=_,Wr(c.i,c.l)):(v||(_=fr(_,os)),c.i=new us(_,c.l))}function $t(c,_,v){c.i.set(_,v)}function hr(c){return $t(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function pi(c,_){return c?_?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function fr(c,_,v){return typeof c=="string"?(c=encodeURI(c).replace(_,cn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Zr=/[#\/\?@]/g,Xo=/[#\?:]/g,gl=/[#\?]/g,os=/[#\?@]/g,Ko=/#/g;function us(c,_){this.h=this.g=null,this.i=c||null,this.j=!!_}function hn(c){c.g||(c.g=new Map,c.h=0,c.i&&$r(c.i,function(_,v){c.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}a=us.prototype,a.add=function(c,_){hn(this),this.i=null,c=cs(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(_),this.h+=1,this};function $o(c,_){hn(c),_=cs(c,_),c.g.has(_)&&(c.i=null,c.h-=c.g.get(_).length,c.g.delete(_))}function ml(c,_){return hn(c),_=cs(c,_),c.g.has(_)}a.forEach=function(c,_){hn(this),this.g.forEach(function(v,S){v.forEach(function(H){c.call(_,H,S,this)},this)},this)};function pl(c,_){hn(c);let v=[];if(typeof _=="string")ml(c,_)&&(v=v.concat(c.g.get(cs(c,_))));else for(c=Array.from(c.g.values()),_=0;_<c.length;_++)v=v.concat(c[_]);return v}a.set=function(c,_){return hn(this),this.i=null,c=cs(this,c),ml(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[_]),this.h+=1,this},a.get=function(c,_){return c?(c=pl(this,c),c.length>0?String(c[0]):_):_};function Jr(c,_,v){$o(c,_),v.length>0&&(c.i=null,c.g.set(cs(c,_),M(v)),c.h+=v.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var v=_[S];const H=zi(v);v=pl(this,v);for(let Q=0;Q<v.length;Q++){let lt=H;v[Q]!==""&&(lt+="="+zi(v[Q])),c.push(lt)}}return this.i=c.join("&")};function Zo(c){const _=new us;return _.i=c.i,c.g&&(_.g=new Map(c.g),_.h=c.h),_}function cs(c,_){return _=String(_),c.j&&(_=_.toLowerCase()),_}function Wr(c,_){_&&!c.j&&(hn(c),c.i=null,c.g.forEach(function(v,S){const H=S.toLowerCase();S!=H&&($o(this,S),Jr(this,H,v))},c)),c.j=_}function $n(c,_){const v=new Yn;if(f.Image){const S=new Image;S.onload=b(Nn,v,"TestLoadImage: loaded",!0,_,S),S.onerror=b(Nn,v,"TestLoadImage: error",!1,_,S),S.onabort=b(Nn,v,"TestLoadImage: abort",!1,_,S),S.ontimeout=b(Nn,v,"TestLoadImage: timeout",!1,_,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else _(!1)}function _l(c,_){const v=new Yn,S=new AbortController,H=setTimeout(()=>{S.abort(),Nn(v,"TestPingServer: timeout",!1,_)},1e4);fetch(c,{signal:S.signal}).then(Q=>{clearTimeout(H),Q.ok?Nn(v,"TestPingServer: ok",!0,_):Nn(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),Nn(v,"TestPingServer: error",!1,_)})}function Nn(c,_,v,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(v)}catch{}}function hs(){this.g=new ko}function _i(c){this.i=c.Sb||null,this.h=c.ab||!1}E(_i,Bo),_i.prototype.g=function(){return new dr(this.i,this.h)};function dr(c,_){be.call(this),this.H=c,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(dr,be),a=dr.prototype,a.open=function(c,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=_,this.readyState=1,Zn(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(_.body=c),(this.H||f).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ta(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ta(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var _=c.value?c.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!c.done}))&&(this.response=this.responseText+=_)}c.done?fs(this):Zn(this),this.readyState==3&&ta(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,fs(this))},a.Na=function(c){this.g&&(this.response=c,fs(this))},a.ga=function(){this.g&&fs(this)};function fs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Zn(c)}a.setRequestHeader=function(c,_){this.A.append(c,_)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=_.next();return c.join(`\r
`)};function Zn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mn(c){let _="";return bt(c,function(v,S){_+=S,_+=":",_+=v,_+=`\r
`}),_}function gr(c,_,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=Mn(v),typeof c=="string"?v!=null&&zi(v):$t(c,_,v))}function Wt(c){be.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Wt,be);var yi=/^https?$/i,yl=["POST","PUT"];a=Wt.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,_,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);_=_?_.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ll.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(_,String(c),!0),this.B=!1}catch(Q){mr(this,Q);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)v.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())v.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(yl,_,void 0)>=0)||S||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,lt]of v)this.g.setRequestHeader(Q,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(Q){mr(this,Q)}};function mr(c,_){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=_,c.o=5,vl(c),Ui(c)}function vl(c){c.A||(c.A=!0,Oe(c,"complete"),Oe(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Oe(this,"complete"),Oe(this,"abort"),Ui(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),Wt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?pr(this):this.Xa())},a.Xa=function(){pr(this)};function pr(c){if(c.h&&typeof u<"u"){if(c.v&&Jn(c)==4)setTimeout(c.Ca.bind(c),0);else if(Oe(c,"readystatechange"),Jn(c)==4){c.h=!1;try{const Q=c.ca();t:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var v;if(!(v=_)){var S;if(S=Q===0){let lt=String(c.D).match(Yo)[1]||null;!lt&&f.self&&f.self.location&&(lt=f.self.location.protocol.slice(0,-1)),S=!yi.test(lt?lt.toLowerCase():"")}v=S}if(v)Oe(c,"complete"),Oe(c,"success");else{c.o=6;try{var H=Jn(c)>2?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.ca()+"]",vl(c)}}finally{Ui(c)}}}}function Ui(c,_){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,_||Oe(c,"ready");try{v.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function Jn(c){return c.g?c.g.readyState:0}a.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var _=this.g.responseText;return c&&_.indexOf(c)==0&&(_=_.substring(c.length)),hh(_)}};function Pe(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ki(c){const _={};c=(c.g&&Jn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(D(c[S]))continue;var v=Go(c[S]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=_[H]||[];_[H]=Q,Q.push(v)}xt(_,function(S){return S.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(c,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||_}function ds(c){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vi("baseRetryDelayMs",5e3,c),this.Za=vi("retryDelaySeedMs",1e4,c),this.Ta=vi("forwardChannelMaxRetries",2,c),this.va=vi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(c&&c.concurrentRequestLimit),this.Ba=new hs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ds.prototype,a.ka=8,a.I=1,a.connect=function(c,_,v,S){Ee(0),this.W=c,this.H=_||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=su(this,null,this.W),bi(this)};function bl(c){if(ea(c),c.I==3){var _=c.V++,v=Se(c.J);if($t(v,"SID",c.M),$t(v,"RID",_),$t(v,"TYPE","terminate"),_r(c,v),_=new Xn(c,c.j,_),_.M=2,_.A=hr(Se(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(_.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=_.A,v=!0),v||(_.g=ru(_.j,null),_.g.ea(_.A)),_.F=Date.now(),hi(_)}iu(c)}function gs(c){c.g&&(Tl(c),c.g.cancel(),c.g=null)}function ea(c){gs(c),c.v&&(f.clearTimeout(c.v),c.v=null),ia(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function bi(c){if(!ul(c.h)&&!c.m){c.m=!0;var _=c.Ea;it||R(),et||(it(),et=!0),w.add(_,c),c.D=0}}function na(c,_){return gi(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=_.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=oi(m(c.Ea,c,_),nu(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const H=new Xn(this,this.j,c);let Q=this.o;if(this.U&&(Q?(Q=L(Q),ut(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)t:{for(var _=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=v;break t}if(_===4096||v===this.i.length-1){_=v+1;break t}}_=1e3}else _=1e3;_=Jo(this,H,_),v=Se(this.J),$t(v,"RID",c),$t(v,"CVER",22),this.G&&$t(v,"X-HTTP-Session-Id",this.G),_r(this,v),Q&&(this.R?_="headers="+zi(Mn(Q))+"&"+_:this.u&&gr(v,this.u,Q)),cl(this.h,H),this.Ra&&$t(v,"TYPE","init"),this.S?($t(v,"$req",_),$t(v,"SID","null"),H.U=!0,ci(H,v,null)):ci(H,v,_),this.I=2}}else this.I==3&&(c?El(this,c):this.i.length==0||ul(this.h)||El(this))};function El(c,_){var v;_?v=_.l:v=c.V++;const S=Se(c.J);$t(S,"SID",c.M),$t(S,"RID",v),$t(S,"AID",c.K),_r(c,S),c.u&&c.o&&gr(S,c.u,c.o),v=new Xn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),_&&(c.i=_.G.concat(c.i)),_=Jo(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),cl(c.h,v),ci(v,S,_)}function _r(c,_){c.H&&bt(c.H,function(v,S){$t(_,S,v)}),c.l&&bt({},function(v,S){$t(_,S,v)})}function Jo(c,_,v){v=Math.min(c.i.length,v);const S=c.l?m(c.l.Ka,c.l,c):null;t:{var H=c.i;let Ct=-1;for(;;){const pe=["count="+v];Ct==-1?v>0?(Ct=H[0].g,pe.push("ofs="+Ct)):Ct=0:pe.push("ofs="+Ct);let Qt=!0;for(let ue=0;ue<v;ue++){var Q=H[ue].g;const On=H[ue].map;if(Q-=Ct,Q<0)Ct=Math.max(0,H[ue].g-100),Qt=!1;else try{Q="req"+Q+"_"||"";try{var lt=On instanceof Map?On:Object.entries(On);for(const[Ti,Wn]of lt){let ti=Wn;g(Wn)&&(ti=as(Wn)),pe.push(Q+Ti+"="+encodeURIComponent(ti))}}catch(Ti){throw pe.push(Q+"type="+encodeURIComponent("_badmap")),Ti}}catch{S&&S(On)}}if(Qt){lt=pe.join("&");break t}}lt=void 0}return c=c.i.splice(0,v),_.G=c,lt}function Wo(c){if(!c.g&&!c.v){c.Y=1;var _=c.Da;it||R(),et||(it(),et=!0),w.add(_,c),c.A=0}}function yr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=oi(m(c.Da,c),nu(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,tu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=oi(m(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ee(10),gs(this),tu(this))};function Tl(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function tu(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var _=Se(c.na);$t(_,"RID","rpc"),$t(_,"SID",c.M),$t(_,"AID",c.K),$t(_,"CI",c.F?"0":"1"),!c.F&&c.ia&&$t(_,"TO",c.ia),$t(_,"TYPE","xmlhttp"),_r(c,_),c.u&&c.o&&gr(_,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=hr(Se(_)),v.u=null,v.R=!0,Xr(v,c)}a.Va=function(){this.C!=null&&(this.C=null,gs(this),yr(this),Ee(19))};function ia(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function eu(c,_){var v=null;if(c.g==_){ia(c),Tl(c),c.g=null;var S=2}else if(mi(c.h,_))v=_.G,hl(c.h,_),S=1;else return;if(c.I!=0){if(_.o)if(S==1){v=_.u?_.u.length:0,_=Date.now()-_.F;var H=c.D;S=Yr(),Oe(S,new li(S,v)),bi(c)}else Wo(c);else if(H=_.m,H==3||H==0&&_.X>0||!(S==1&&na(c,_)||S==2&&yr(c)))switch(v&&v.length>0&&(_=c.h,_.i=_.i.concat(v)),H){case 1:Ei(c,5);break;case 4:Ei(c,10);break;case 3:Ei(c,6);break;default:Ei(c,2)}}}function nu(c,_){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*_}function Ei(c,_){if(c.j.info("Error code "+_),_==2){var v=m(c.bb,c),S=c.Ua;const H=!S;S=new bn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ke(S,"https"),hr(S),H?$n(S.toString(),v):_l(S.toString(),v)}else Ee(2);c.I=0,c.l&&c.l.pa(_),iu(c),ea(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function iu(c){if(c.I=0,c.ja=[],c.l){const _=fl(c.h);(_.length!=0||c.i.length!=0)&&(x(c.ja,_),x(c.ja,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.oa()}}function su(c,_,v){var S=v instanceof bn?Se(v):new bn(v);if(S.g!="")_&&(S.g=_+"."+S.g),ls(S,S.u);else{var H=f.location;S=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;const Q=new bn(null);S&&ke(Q,S),_&&(Q.g=_),H&&ls(Q,H),v&&(Q.h=v),S=Q}return v=c.G,_=c.wa,v&&_&&$t(S,v,_),$t(S,"VER",c.ka),_r(c,S),S}function ru(c,_,v){if(_&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=c.Aa&&!c.ma?new Wt(new _i({ab:v})):new Wt(c.ma),_.Fa(c.L),_}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function au(){}a=au.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function ms(){}ms.prototype.g=function(c,_){return new rn(c,_)};function rn(c,_){be.call(this),this.g=new ds(_),this.l=c,this.h=_&&_.messageUrlParams||null,c=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(c?c["X-WebChannel-Content-Type"]=_.messageContentType:c={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(c?c["X-WebChannel-Client-Profile"]=_.sa:c={"X-WebChannel-Client-Profile":_.sa}),this.g.U=c,(c=_&&_.Qb)&&!D(c)&&(this.g.u=c),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!D(_)&&(this.g.G=_,c=this.h,c!==null&&_ in c&&(c=this.h,_ in c&&delete c[_])),this.j=new Bi(this)}E(rn,be),rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){bl(this.g)},rn.prototype.o=function(c){var _=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=as(c),c=v);_.i.push(new Ae(_.Ya++,c)),_.I==3&&bi(_)},rn.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,rn.Z.N.call(this)};function lu(c){qe.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var _=c.__sm__;if(_){t:{for(const v in _){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,_=_!==null&&c in _?_[c]:void 0),this.data=_}else this.data=c}E(lu,qe);function ou(){Dn.call(this),this.status=1}E(ou,Dn);function Bi(c){this.g=c}E(Bi,au),Bi.prototype.ra=function(){Oe(this.g,"a")},Bi.prototype.qa=function(c){Oe(this.g,new lu(c))},Bi.prototype.pa=function(c){Oe(this.g,new ou)},Bi.prototype.oa=function(){Oe(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,n0=function(){return new ms},e0=function(){return Yr()},t0=me,Od={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ur.NO_ERROR=0,ur.TIMEOUT=8,ur.HTTP_ERROR=6,bc=ur,al.COMPLETE="complete",Wv=al,jo.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",be.prototype.listen=be.prototype.J,ho=jo,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,Jv=Wt}).apply(typeof dc<"u"?dc:typeof self<"u"?self:typeof window<"u"?window:{});const By="@firebase/firestore",jy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new Fv("@firebase/firestore");function Ia(){return kr.logLevel}function dt(a,...t){if(kr.logLevel<=qt.DEBUG){const n=t.map(rg);kr.debug(`Firestore (${Za}): ${a}`,...n)}}function is(a,...t){if(kr.logLevel<=qt.ERROR){const n=t.map(rg);kr.error(`Firestore (${Za}): ${a}`,...n)}}function Pa(a,...t){if(kr.logLevel<=qt.WARN){const n=t.map(rg);kr.warn(`Firestore (${Za}): ${a}`,...n)}}function rg(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(a,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,i0(a,s,n)}function i0(a,t,n){let s=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${t} (ID: ${a.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw is(s),new Error(s)}function Kt(a,t,n,s){let l="Unexpected state";typeof n=="string"?l=n:s=n,a||i0(t,l,s)}function wt(a,t){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends $a{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(en.UNAUTHENTICATED)))}shutdown(){}}class aS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class lS{constructor(t){this.t=t,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Kt(this.o===void 0,42304);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Fs,t.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const p=u;t.enqueueRetryable((async()=>{await p.promise,await l(this.currentUser)}))},g=p=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Fs)}}),0),f()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Kt(typeof s.accessToken=="string",31837,{l:s}),new s0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Kt(t===null||typeof t=="string",2055,{h:t}),new en(t)}}class oS{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uS{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new oS(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cS{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qA(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Kt(this.o===void 0,3512);const s=u=>{u.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,dt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const l=u=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Hy(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Kt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hy(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<a;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=hS(40);for(let u=0;u<l.length;++u)s.length<20&&l[u]<n&&(s+=t.charAt(l[u]%62))}return s}}function Ut(a,t){return a<t?-1:a>t?1:0}function Id(a,t){const n=Math.min(a.length,t.length);for(let s=0;s<n;s++){const l=a.charAt(s),u=t.charAt(s);if(l!==u)return Ed(l)===Ed(u)?Ut(l,u):Ed(l)?1:-1}return Ut(a.length,t.length)}const fS=55296,dS=57343;function Ed(a){const t=a.charCodeAt(0);return t>=fS&&t<=dS}function Ga(a,t,n){return a.length===t.length&&a.every(((s,l)=>n(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="__name__";class xi{constructor(t,n,s){n===void 0?n=0:n>t.length&&Et(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Et(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return xi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xi?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const u=xi.compareSegments(t.get(l),n.get(l));if(u!==0)return u}return Ut(t.length,n.length)}static compareSegments(t,n){const s=xi.isNumericId(t),l=xi.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?xi.extractNumericId(t).compare(xi.extractNumericId(n)):Id(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Gs.fromString(t.substring(4,t.length-2))}}class ae extends xi{construct(t,n,s){return new ae(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new pt(st.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((l=>l.length>0)))}return new ae(n)}static emptyPath(){return new ae([])}}const gS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends xi{construct(t,n,s){return new Ze(t,n,s)}static isValidIdentifier(t){return gS.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qy}static keyField(){return new Ze([qy])}static fromServerFormat(t){const n=[];let s="",l=0;const u=()=>{if(s.length===0)throw new pt(st.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new pt(st.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pt(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(f=!f,l++):g!=="."||f?(s+=g,l++):(u(),l++)}if(u(),f)throw new pt(st.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.path=t}static fromPath(t){return new yt(ae.fromString(t))}static fromName(t){return new yt(ae.fromString(t).popFirst(5))}static empty(){return new yt(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ae.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yt(new ae(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(a,t,n){if(!n)throw new pt(st.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function mS(a,t,n,s){if(t===!0&&s===!0)throw new pt(st.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function Py(a){if(!yt.isDocumentKey(a))throw new pt(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Gy(a){if(yt.isDocumentKey(a))throw new pt(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function a0(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function lg(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(a);return t?`a custom ${t} object`:"an object"}}return typeof a=="function"?"a function":Et(12329,{type:typeof a})}function Ao(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new pt(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lg(a);throw new pt(st.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(a,t){const n={typeString:a};return t&&(n.value=t),n}function Oo(a,t){if(!a0(a))throw new pt(st.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const l=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in a)){n=`JSON missing required field: '${s}'`;break}const f=a[s];if(l&&typeof f!==l){n=`JSON field '${s}' must be a ${l}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new pt(st.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy=-62135596800,Qy=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(t){return le.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*Qy);return new le(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new pt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Fy)throw new pt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qy}_compareTo(t){return this.seconds===t.seconds?Ut(this.nanoseconds,t.nanoseconds):Ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Oo(t,le._jsonSchema))return new le(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Fy;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Ve("string",le._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static fromTimestamp(t){return new At(t)}static min(){return new At(new le(0,0))}static max(){return new At(new le(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=-1;function pS(a,t){const n=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,l=At.fromTimestamp(s===1e9?new le(n+1,0):new le(n,s));return new $s(l,yt.empty(),t)}function _S(a){return new $s(a.readTime,a.key,So)}class $s{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new $s(At.min(),yt.empty(),So)}static max(){return new $s(At.max(),yt.empty(),So)}}function yS(a,t){let n=a.readTime.compareTo(t.readTime);return n!==0?n:(n=yt.comparator(a.documentKey,t.documentKey),n!==0?n:Ut(a.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(a){if(a.code!==st.FAILED_PRECONDITION||a.message!==vS)throw a;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new nt(((s,l)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,l)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof nt?n:nt.resolve(n)}catch(n){return nt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):nt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):nt.reject(n)}static resolve(t){return new nt(((n,s)=>{n(t)}))}static reject(t){return new nt(((n,s)=>{s(t)}))}static waitFor(t){return new nt(((n,s)=>{let l=0,u=0,f=!1;t.forEach((g=>{++l,g.next((()=>{++u,f&&u===l&&n()}),(p=>s(p)))})),f=!0,u===l&&n()}))}static or(t){let n=nt.resolve(!1);for(const s of t)n=n.next((l=>l?nt.resolve(l):s()));return n}static forEach(t,n){const s=[];return t.forEach(((l,u)=>{s.push(n.call(this,l,u))})),this.waitFor(s)}static mapArray(t,n){return new nt(((s,l)=>{const u=t.length,f=new Array(u);let g=0;for(let p=0;p<u;p++){const m=p;n(t[m]).next((b=>{f[m]=b,++g,g===u&&s(f)}),(b=>l(b)))}}))}static doWhile(t,n){return new nt(((s,l)=>{const u=()=>{t()===!0?n().next((()=>{u()}),l):s()};u()}))}}function ES(a){const t=a.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wa(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Qc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function Yc(a){return a==null}function Nc(a){return a===0&&1/a==-1/0}function TS(a){return typeof a=="number"&&Number.isInteger(a)&&!Nc(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="";function AS(a){let t="";for(let n=0;n<a.length;n++)t.length>0&&(t=Yy(t)),t=SS(a.get(n),t);return Yy(t)}function SS(a,t){let n=t;const s=a.length;for(let l=0;l<s;l++){const u=a.charAt(l);switch(u){case"\0":n+="";break;case l0:n+="";break;default:n+=u}}return n}function Yy(a){return a+l0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(a){let t=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t++;return t}function ir(a,t){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&t(n,a[n])}function o0(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,n){this.comparator=t,this.root=n||Ke.EMPTY}insert(t,n){return new he(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(t){return new he(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gc(this.root,t,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gc(this.root,t,this.comparator,!0)}}class gc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&l&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ke{constructor(t,n,s,l,u){this.key=t,this.value=n,this.color=s??Ke.RED,this.left=l??Ke.EMPTY,this.right=u??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,u){return new Ke(t??this.key,n??this.value,s??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const u=s(t,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(t,n,s),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return Ke.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Et(27949);return t+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(t,n,s,l,u){return this}insert(t,n,s){return new Ke(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t){this.comparator=t,this.data=new he(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ky(this.data.getIterator())}getIteratorFrom(t){return new Ky(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof ze)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new ze(this.comparator);return n.data=t,n}}class Ky{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this.fields=t,t.sort(Ze.comparator)}static empty(){return new si([])}unionWith(t){let n=new ze(Ze.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new si(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ga(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new u0("Invalid base64 string: "+u):u}})(t);return new Je(n)}static fromUint8Array(t){const n=(function(l){let u="";for(let f=0;f<l.length;++f)u+=String.fromCharCode(l[f]);return u})(t);return new Je(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const wS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(a){if(Kt(!!a,39018),typeof a=="string"){let t=0;const n=wS.exec(a);if(Kt(!!n,46558,{timestamp:a}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ve(a.seconds),nanos:ve(a.nanos)}}function ve(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Js(a){return typeof a=="string"?Je.fromBase64String(a):Je.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="server_timestamp",h0="__type__",f0="__previous_value__",d0="__local_write_time__";function ug(a){return(a?.mapValue?.fields||{})[h0]?.stringValue===c0}function Xc(a){const t=a.mapValue.fields[f0];return ug(t)?Xc(t):t}function wo(a){const t=Zs(a.mapValue.fields[d0].timestampValue);return new le(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,n,s,l,u,f,g,p,m,b){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=b}}const Mc="(default)";class Ro{constructor(t,n){this.projectId=t,this.database=n||Mc}static empty(){return new Ro("","")}get isDefaultDatabase(){return this.database===Mc}isEqual(t){return t instanceof Ro&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="__type__",xS="__max__",mc={mapValue:{}},m0="__vector__",Oc="value";function Ws(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?ug(a)?4:DS(a)?9007199254740991:CS(a)?10:11:Et(28295,{value:a})}function Ii(a,t){if(a===t)return!0;const n=Ws(a);if(n!==Ws(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return wo(a).isEqual(wo(t));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const f=Zs(l.timestampValue),g=Zs(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos})(a,t);case 5:return a.stringValue===t.stringValue;case 6:return(function(l,u){return Js(l.bytesValue).isEqual(Js(u.bytesValue))})(a,t);case 7:return a.referenceValue===t.referenceValue;case 8:return(function(l,u){return ve(l.geoPointValue.latitude)===ve(u.geoPointValue.latitude)&&ve(l.geoPointValue.longitude)===ve(u.geoPointValue.longitude)})(a,t);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return ve(l.integerValue)===ve(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const f=ve(l.doubleValue),g=ve(u.doubleValue);return f===g?Nc(f)===Nc(g):isNaN(f)&&isNaN(g)}return!1})(a,t);case 9:return Ga(a.arrayValue.values||[],t.arrayValue.values||[],Ii);case 10:case 11:return(function(l,u){const f=l.mapValue.fields||{},g=u.mapValue.fields||{};if(Xy(f)!==Xy(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!Ii(f[p],g[p])))return!1;return!0})(a,t);default:return Et(52216,{left:a})}}function xo(a,t){return(a.values||[]).find((n=>Ii(n,t)))!==void 0}function Fa(a,t){if(a===t)return 0;const n=Ws(a),s=Ws(t);if(n!==s)return Ut(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ut(a.booleanValue,t.booleanValue);case 2:return(function(u,f){const g=ve(u.integerValue||u.doubleValue),p=ve(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(a,t);case 3:return $y(a.timestampValue,t.timestampValue);case 4:return $y(wo(a),wo(t));case 5:return Id(a.stringValue,t.stringValue);case 6:return(function(u,f){const g=Js(u),p=Js(f);return g.compareTo(p)})(a.bytesValue,t.bytesValue);case 7:return(function(u,f){const g=u.split("/"),p=f.split("/");for(let m=0;m<g.length&&m<p.length;m++){const b=Ut(g[m],p[m]);if(b!==0)return b}return Ut(g.length,p.length)})(a.referenceValue,t.referenceValue);case 8:return(function(u,f){const g=Ut(ve(u.latitude),ve(f.latitude));return g!==0?g:Ut(ve(u.longitude),ve(f.longitude))})(a.geoPointValue,t.geoPointValue);case 9:return Zy(a.arrayValue,t.arrayValue);case 10:return(function(u,f){const g=u.fields||{},p=f.fields||{},m=g[Oc]?.arrayValue,b=p[Oc]?.arrayValue,E=Ut(m?.values?.length||0,b?.values?.length||0);return E!==0?E:Zy(m,b)})(a.mapValue,t.mapValue);case 11:return(function(u,f){if(u===mc.mapValue&&f===mc.mapValue)return 0;if(u===mc.mapValue)return 1;if(f===mc.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),m=f.fields||{},b=Object.keys(m);p.sort(),b.sort();for(let E=0;E<p.length&&E<b.length;++E){const T=Id(p[E],b[E]);if(T!==0)return T;const M=Fa(g[p[E]],m[b[E]]);if(M!==0)return M}return Ut(p.length,b.length)})(a.mapValue,t.mapValue);default:throw Et(23264,{he:n})}}function $y(a,t){if(typeof a=="string"&&typeof t=="string"&&a.length===t.length)return Ut(a,t);const n=Zs(a),s=Zs(t),l=Ut(n.seconds,s.seconds);return l!==0?l:Ut(n.nanos,s.nanos)}function Zy(a,t){const n=a.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const u=Fa(n[l],s[l]);if(u)return u}return Ut(n.length,s.length)}function Qa(a){return Ld(a)}function Ld(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const s=Zs(n);return`time(${s.seconds},${s.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return Js(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return yt.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let s="[",l=!0;for(const u of n.values||[])l?l=!1:s+=",",s+=Ld(u);return s+"]"})(a.arrayValue):"mapValue"in a?(function(n){const s=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const f of s)u?u=!1:l+=",",l+=`${f}:${Ld(n.fields[f])}`;return l+"}"})(a.mapValue):Et(61005,{value:a})}function Ec(a){switch(Ws(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xc(a);return t?16+Ec(t):16;case 5:return 2*a.stringValue.length;case 6:return Js(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,u)=>l+Ec(u)),0)})(a.arrayValue);case 10:case 11:return(function(s){let l=0;return ir(s.fields,((u,f)=>{l+=u.length+Ec(f)})),l})(a.mapValue);default:throw Et(13486,{value:a})}}function zd(a){return!!a&&"integerValue"in a}function cg(a){return!!a&&"arrayValue"in a}function Jy(a){return!!a&&"nullValue"in a}function Wy(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Tc(a){return!!a&&"mapValue"in a}function CS(a){return(a?.mapValue?.fields||{})[g0]?.stringValue===m0}function po(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const t={mapValue:{fields:{}}};return ir(a.mapValue.fields,((n,s)=>t.mapValue.fields[n]=po(s))),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=po(a.arrayValue.values[n]);return t}return{...a}}function DS(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===xS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(t){this.value=t}static empty(){return new Cn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Tc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=po(n)}setAll(t){let n=Ze.emptyPath(),s={},l=[];t.forEach(((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}f?s[g.lastSegment()]=po(f):l.push(g.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,l)}delete(t){const n=this.field(t.popLast());Tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ii(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];Tc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){ir(n,((l,u)=>t[l]=u));for(const l of s)delete t[l]}clone(){return new Cn(po(this.value))}}function p0(a){const t=[];return ir(a.fields,((n,s)=>{const l=new Ze([n]);if(Tc(s)){const u=p0(s.mapValue).fields;if(u.length===0)t.push(l);else for(const f of u)t.push(l.child(f))}else t.push(l)})),new si(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t,n,s,l,u,f,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(t){return new nn(t,0,At.min(),At.min(),At.min(),Cn.empty(),0)}static newFoundDocument(t,n,s,l){return new nn(t,1,n,At.min(),s,l,0)}static newNoDocument(t,n){return new nn(t,2,n,At.min(),At.min(),Cn.empty(),0)}static newUnknownDocument(t,n){return new nn(t,3,n,At.min(),At.min(),Cn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof nn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t,n){this.position=t,this.inclusive=n}}function tv(a,t,n){let s=0;for(let l=0;l<a.position.length;l++){const u=t[l],f=a.position[l];if(u.field.isKeyField()?s=yt.comparator(yt.fromName(f.referenceValue),n.key):s=Fa(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function ev(a,t){if(a===null)return t===null;if(t===null||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Ii(a.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t,n="asc"){this.field=t,this.dir=n}}function VS(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{}class Le extends _0{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new MS(t,n,s):n==="array-contains"?new LS(t,s):n==="in"?new zS(t,s):n==="not-in"?new US(t,s):n==="array-contains-any"?new kS(t,s):new Le(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new OS(t,s):new IS(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fa(n,this.value)):n!==null&&Ws(this.value)===Ws(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Li extends _0{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Li(t,n)}matches(t){return y0(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function y0(a){return a.op==="and"}function v0(a){return NS(a)&&y0(a)}function NS(a){for(const t of a.filters)if(t instanceof Li)return!1;return!0}function Ud(a){if(a instanceof Le)return a.field.canonicalString()+a.op.toString()+Qa(a.value);if(v0(a))return a.filters.map((t=>Ud(t))).join(",");{const t=a.filters.map((n=>Ud(n))).join(",");return`${a.op}(${t})`}}function b0(a,t){return a instanceof Le?(function(s,l){return l instanceof Le&&s.op===l.op&&s.field.isEqual(l.field)&&Ii(s.value,l.value)})(a,t):a instanceof Li?(function(s,l){return l instanceof Li&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((u,f,g)=>u&&b0(f,l.filters[g])),!0):!1})(a,t):void Et(19439)}function E0(a){return a instanceof Le?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qa(n.value)}`})(a):a instanceof Li?(function(n){return n.op.toString()+" {"+n.getFilters().map(E0).join(" ,")+"}"})(a):"Filter"}class MS extends Le{constructor(t,n,s){super(t,n,s),this.key=yt.fromName(s.referenceValue)}matches(t){const n=yt.comparator(t.key,this.key);return this.matchesComparison(n)}}class OS extends Le{constructor(t,n){super(t,"in",n),this.keys=T0("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class IS extends Le{constructor(t,n){super(t,"not-in",n),this.keys=T0("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function T0(a,t){return(t.arrayValue?.values||[]).map((n=>yt.fromName(n.referenceValue)))}class LS extends Le{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return cg(n)&&xo(n.arrayValue,this.value)}}class zS extends Le{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class US extends Le{constructor(t,n){super(t,"not-in",n)}matches(t){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xo(this.value.arrayValue,n)}}class kS extends Le{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!cg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>xo(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(t,n=null,s=[],l=[],u=null,f=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=u,this.startAt=f,this.endAt=g,this.Te=null}}function nv(a,t=null,n=[],s=[],l=null,u=null,f=null){return new BS(a,t,n,s,l,u,f)}function hg(a){const t=wt(a);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Ud(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Yc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Qa(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Qa(s))).join(",")),t.Te=n}return t.Te}function fg(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!VS(a.orderBy[n],t.orderBy[n]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!b0(a.filters[n],t.filters[n]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!ev(a.startAt,t.startAt)&&ev(a.endAt,t.endAt)}function kd(a){return yt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(t,n=null,s=[],l=[],u=null,f="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jS(a,t,n,s,l,u,f,g){return new Kc(a,t,n,s,l,u,f,g)}function A0(a){return new Kc(a)}function iv(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function HS(a){return a.collectionGroup!==null}function _o(a){const t=wt(a);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new ze(Ze.comparator);return f.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(g=g.add(m.field))}))})),g})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Lc(u,s))})),n.has(Ze.keyField().canonicalString())||t.Ie.push(new Lc(Ze.keyField(),s))}return t.Ie}function Ci(a){const t=wt(a);return t.Ee||(t.Ee=qS(t,_o(a))),t.Ee}function qS(a,t){if(a.limitType==="F")return nv(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new Lc(l.field,u)}));const n=a.endAt?new Ic(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Ic(a.startAt.position,a.startAt.inclusive):null;return nv(a.path,a.collectionGroup,t,a.filters,a.limit,n,s)}}function Bd(a,t,n){return new Kc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,n,a.startAt,a.endAt)}function $c(a,t){return fg(Ci(a),Ci(t))&&a.limitType===t.limitType}function S0(a){return`${hg(Ci(a))}|lt:${a.limitType}`}function La(a){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((l=>E0(l))).join(", ")}]`),Yc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((l=>Qa(l))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((l=>Qa(l))).join(",")),`Target(${s})`})(Ci(a))}; limitType=${a.limitType})`}function Zc(a,t){return t.isFoundDocument()&&(function(s,l){const u=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):yt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(a,t)&&(function(s,l){for(const u of _o(s))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(a,t)&&(function(s,l){for(const u of s.filters)if(!u.matches(l))return!1;return!0})(a,t)&&(function(s,l){return!(s.startAt&&!(function(f,g,p){const m=tv(f,g,p);return f.inclusive?m<=0:m<0})(s.startAt,_o(s),l)||s.endAt&&!(function(f,g,p){const m=tv(f,g,p);return f.inclusive?m>=0:m>0})(s.endAt,_o(s),l))})(a,t)}function PS(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function w0(a){return(t,n)=>{let s=!1;for(const l of _o(a)){const u=GS(l,t,n);if(u!==0)return u;s=s||l.field.isKeyField()}return 0}}function GS(a,t,n){const s=a.field.isKeyField()?yt.comparator(t.key,n.key):(function(u,f,g){const p=f.data.field(u),m=g.data.field(u);return p!==null&&m!==null?Fa(p,m):Et(42886)})(a.field,t,n);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return Et(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,u]of s)if(this.equalsFn(l,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],t))return void(l[u]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){ir(this.inner,((n,s)=>{for(const[l,u]of s)t(l,u)}))}isEmpty(){return o0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new he(yt.comparator);function ss(){return FS}const R0=new he(yt.comparator);function fo(...a){let t=R0;for(const n of a)t=t.insert(n.key,n);return t}function x0(a){let t=R0;return a.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function Ur(){return yo()}function C0(){return yo()}function yo(){return new Hr((a=>a.toString()),((a,t)=>a.isEqual(t)))}const QS=new he(yt.comparator),YS=new ze(yt.comparator);function kt(...a){let t=YS;for(const n of a)t=t.add(n);return t}const XS=new ze(Ut);function KS(){return XS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(t)?"-0":t}}function D0(a){return{integerValue:""+a}}function $S(a,t){return TS(t)?D0(t):dg(a,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this._=void 0}}function ZS(a,t,n){return a instanceof zc?(function(l,u){const f={fields:{[h0]:{stringValue:c0},[d0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&ug(u)&&(u=Xc(u)),u&&(f.fields[f0]=u),{mapValue:f}})(n,t):a instanceof Co?N0(a,t):a instanceof Do?M0(a,t):(function(l,u){const f=V0(l,u),g=sv(f)+sv(l.Ae);return zd(f)&&zd(l.Ae)?D0(g):dg(l.serializer,g)})(a,t)}function JS(a,t,n){return a instanceof Co?N0(a,t):a instanceof Do?M0(a,t):n}function V0(a,t){return a instanceof Uc?(function(s){return zd(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class zc extends Jc{}class Co extends Jc{constructor(t){super(),this.elements=t}}function N0(a,t){const n=O0(t);for(const s of a.elements)n.some((l=>Ii(l,s)))||n.push(s);return{arrayValue:{values:n}}}class Do extends Jc{constructor(t){super(),this.elements=t}}function M0(a,t){let n=O0(t);for(const s of a.elements)n=n.filter((l=>!Ii(l,s)));return{arrayValue:{values:n}}}class Uc extends Jc{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function sv(a){return ve(a.integerValue||a.doubleValue)}function O0(a){return cg(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function WS(a,t){return a.field.isEqual(t.field)&&(function(s,l){return s instanceof Co&&l instanceof Co||s instanceof Do&&l instanceof Do?Ga(s.elements,l.elements,Ii):s instanceof Uc&&l instanceof Uc?Ii(s.Ae,l.Ae):s instanceof zc&&l instanceof zc})(a.transform,t.transform)}class tw{constructor(t,n){this.version=t,this.transformResults=n}}class es{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new es}static exists(t){return new es(void 0,t)}static updateTime(t){return new es(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ac(a,t){return a.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(a.updateTime):a.exists===void 0||a.exists===t.isFoundDocument()}class Wc{}function I0(a,t){if(!a.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return a.isNoDocument()?new z0(a.key,es.none()):new th(a.key,a.data,es.none());{const n=a.data,s=Cn.empty();let l=new ze(Ze.comparator);for(let u of t.fields)if(!l.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),l=l.add(u)}return new qr(a.key,s,new si(l.toArray()),es.none())}}function ew(a,t,n){a instanceof th?(function(l,u,f){const g=l.value.clone(),p=av(l.fieldTransforms,u,f.transformResults);g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(a,t,n):a instanceof qr?(function(l,u,f){if(!Ac(l.precondition,u))return void u.convertToUnknownDocument(f.version);const g=av(l.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(L0(l)),p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(a,t,n):(function(l,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,t,n)}function vo(a,t,n,s){return a instanceof th?(function(u,f,g,p){if(!Ac(u.precondition,f))return g;const m=u.value.clone(),b=lv(u.fieldTransforms,p,f);return m.setAll(b),f.convertToFoundDocument(f.version,m).setHasLocalMutations(),null})(a,t,n,s):a instanceof qr?(function(u,f,g,p){if(!Ac(u.precondition,f))return g;const m=lv(u.fieldTransforms,p,f),b=f.data;return b.setAll(L0(u)),b.setAll(m),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(a,t,n,s):(function(u,f,g){return Ac(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g})(a,t,n)}function nw(a,t){let n=null;for(const s of a.fieldTransforms){const l=t.data.field(s.field),u=V0(s.transform,l||null);u!=null&&(n===null&&(n=Cn.empty()),n.set(s.field,u))}return n||null}function rv(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ga(s,l,((u,f)=>WS(u,f)))})(a.fieldTransforms,t.fieldTransforms)&&(a.type===0?a.value.isEqual(t.value):a.type!==1||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask))}class th extends Wc{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class qr extends Wc{constructor(t,n,s,l,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function L0(a){const t=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=a.data.field(n);t.set(n,s)}})),t}function av(a,t,n){const s=new Map;Kt(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let l=0;l<n.length;l++){const u=a[l],f=u.transform,g=t.data.field(u.field);s.set(u.field,JS(f,g,n[l]))}return s}function lv(a,t,n){const s=new Map;for(const l of a){const u=l.transform,f=n.data.field(l.field);s.set(l.field,ZS(u,f,t))}return s}class z0 extends Wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iw extends Wc{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(t.key)&&ew(u,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=vo(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=vo(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=C0();return this.mutations.forEach((l=>{const u=t.get(l.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(l.key)?null:g;const p=I0(f,g);p!==null&&s.set(l.key,p),f.isValidDocument()||f.convertToNoDocument(At.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),kt())}isEqual(t){return this.batchId===t.batchId&&Ga(this.mutations,t.mutations,((n,s)=>rv(n,s)))&&Ga(this.baseMutations,t.baseMutations,((n,s)=>rv(n,s)))}}class gg{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Kt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return QS})();const u=t.mutations;for(let f=0;f<u.length;f++)l=l.insert(u[f].key,s[f].version);return new gg(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,Ht;function lw(a){switch(a){case st.OK:return Et(64938);case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0;default:return Et(15467,{code:a})}}function U0(a){if(a===void 0)return is("GRPC error has no .code"),st.UNKNOWN;switch(a){case De.OK:return st.OK;case De.CANCELLED:return st.CANCELLED;case De.UNKNOWN:return st.UNKNOWN;case De.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case De.INTERNAL:return st.INTERNAL;case De.UNAVAILABLE:return st.UNAVAILABLE;case De.UNAUTHENTICATED:return st.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case De.NOT_FOUND:return st.NOT_FOUND;case De.ALREADY_EXISTS:return st.ALREADY_EXISTS;case De.PERMISSION_DENIED:return st.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case De.ABORTED:return st.ABORTED;case De.OUT_OF_RANGE:return st.OUT_OF_RANGE;case De.UNIMPLEMENTED:return st.UNIMPLEMENTED;case De.DATA_LOSS:return st.DATA_LOSS;default:return Et(39323,{code:a})}}(Ht=De||(De={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Gs([4294967295,4294967295],0);function ov(a){const t=ow().encode(a),n=new Zv;return n.update(t),new Uint8Array(n.digest())}function uv(a){const t=new DataView(a.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Gs([n,s],0),new Gs([l,u],0)]}class mg{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(s<0)throw new go(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Gs.fromNumber(this.ge)}ye(t,n,s){let l=t.add(n.multiply(Gs.fromNumber(s)));return l.compare(uw)===1&&(l=new Gs([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=ov(t),[s,l]=uv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);if(!this.we(f))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),f=new mg(u,l,n);return s.forEach((g=>f.insert(g))),f}insert(t){if(this.ge===0)return;const n=ov(t),[s,l]=uv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,l,u);this.Se(f)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t,n,s,l,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Io.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new eh(At.min(),l,new he(Ut),ss(),kt())}}class Io{constructor(t,n,s,l,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Io(s,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(t,n,s,l){this.be=t,this.removedTargetIds=n,this.key=s,this.De=l}}class k0{constructor(t,n){this.targetId=t,this.Ce=n}}class B0{constructor(t,n,s=Je.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class cv{constructor(){this.ve=0,this.Fe=hv(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=kt(),n=kt(),s=kt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:Et(38017,{changeType:u})}})),new Io(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=hv()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cw{constructor(t){this.Ge=t,this.ze=new Map,this.je=ss(),this.Je=pc(),this.He=pc(),this.Ye=new he(Ut)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Et(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,l)=>{this.rt(l)&&n(l)}))}st(t){const n=t.targetId,s=t.Ce.count,l=this.ot(n);if(l){const u=l.target;if(kd(u))if(s===0){const f=new yt(u.path);this.et(n,f,nn.newNoDocument(f,At.min()))}else Kt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(t),p=g?this.ct(g,t,f):1;if(p!==0){this.it(n);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:u=0}=n;let f,g;try{f=Js(s).toUint8Array()}catch(p){if(p instanceof u0)return Pa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new mg(f,l,u)}catch(p){return Pa(p instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let l=0;return s.forEach((u=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;t.mightContain(g)||(this.et(n,u,null),l++)})),l}Tt(t){const n=new Map;this.ze.forEach(((u,f)=>{const g=this.ot(f);if(g){if(u.current&&kd(g.target)){const p=new yt(g.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,nn.newNoDocument(p,t))}u.Be&&(n.set(f,u.ke()),u.qe())}}));let s=kt();this.He.forEach(((u,f)=>{let g=!0;f.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(t)));const l=new eh(t,n,this.Ye,this.je,s);return this.je=ss(),this.Je=pc(),this.He=pc(),this.Ye=new he(Ut),l}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new cv,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ze(Ut),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ze(Ut),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||dt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new cv),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function pc(){return new he(yt.comparator)}function hv(){return new he(yt.comparator)}const hw={asc:"ASCENDING",desc:"DESCENDING"},fw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dw={and:"AND",or:"OR"};class gw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function jd(a,t){return a.useProto3Json||Yc(t)?t:{value:t}}function kc(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function j0(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function mw(a,t){return kc(a,t.toTimestamp())}function Di(a){return Kt(!!a,49232),At.fromTimestamp((function(n){const s=Zs(n);return new le(s.seconds,s.nanos)})(a))}function pg(a,t){return Hd(a,t).canonicalString()}function Hd(a,t){const n=(function(l){return new ae(["projects",l.projectId,"databases",l.database])})(a).child("documents");return t===void 0?n:n.child(t)}function H0(a){const t=ae.fromString(a);return Kt(Q0(t),10190,{key:t.toString()}),t}function qd(a,t){return pg(a.databaseId,t.path)}function Td(a,t){const n=H0(t);if(n.get(1)!==a.databaseId.projectId)throw new pt(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new pt(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new yt(P0(n))}function q0(a,t){return pg(a.databaseId,t)}function pw(a){const t=H0(a);return t.length===4?ae.emptyPath():P0(t)}function Pd(a){return new ae(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function P0(a){return Kt(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function fv(a,t,n){return{name:qd(a,t),fields:n.value.mapValue.fields}}function _w(a,t){let n;if("targetChange"in t){t.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Et(39313,{state:m})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],u=(function(m,b){return m.useProto3Json?(Kt(b===void 0||typeof b=="string",58123),Je.fromBase64String(b||"")):(Kt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Je.fromUint8Array(b||new Uint8Array))})(a,t.targetChange.resumeToken),f=t.targetChange.cause,g=f&&(function(m){const b=m.code===void 0?st.UNKNOWN:U0(m.code);return new pt(b,m.message||"")})(f);n=new B0(s,l,u,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Td(a,s.document.name),u=Di(s.document.updateTime),f=s.document.createTime?Di(s.document.createTime):At.min(),g=new Cn({mapValue:{fields:s.document.fields}}),p=nn.newFoundDocument(l,u,f,g),m=s.targetIds||[],b=s.removedTargetIds||[];n=new Sc(m,b,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Td(a,s.document),u=s.readTime?Di(s.readTime):At.min(),f=nn.newNoDocument(l,u),g=s.removedTargetIds||[];n=new Sc([],g,f.key,f)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Td(a,s.document),u=s.removedTargetIds||[];n=new Sc([],u,l,null)}else{if(!("filter"in t))return Et(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:u}=s,f=new aw(l,u),g=s.targetId;n=new k0(g,f)}}return n}function yw(a,t){let n;if(t instanceof th)n={update:fv(a,t.key,t.value)};else if(t instanceof z0)n={delete:qd(a,t.key)};else if(t instanceof qr)n={update:fv(a,t.key,t.data),updateMask:xw(t.fieldMask)};else{if(!(t instanceof iw))return Et(16599,{Vt:t.type});n={verify:qd(a,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(u,f){const g=f.transform;if(g instanceof zc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Co)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Do)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Uc)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw Et(20930,{transform:f.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:mw(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Et(27497)})(a,t.precondition)),n}function vw(a,t){return a&&a.length>0?(Kt(t!==void 0,14353),a.map((n=>(function(l,u){let f=l.updateTime?Di(l.updateTime):Di(u);return f.isEqual(At.min())&&(f=Di(u)),new tw(f,l.transformResults||[])})(n,t)))):[]}function bw(a,t){return{documents:[q0(a,t.path)]}}function Ew(a,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=q0(a,l);const u=(function(m){if(m.length!==0)return F0(Li.create(m,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const f=(function(m){if(m.length!==0)return m.map((b=>(function(T){return{field:za(T.field),direction:Sw(T.dir)}})(b)))})(t.orderBy);f&&(n.structuredQuery.orderBy=f);const g=jd(a,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(t.endAt)),{ft:n,parent:l}}function Tw(a){let t=pw(a.parent);const n=a.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Kt(s===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:t=t.child(b.collectionId)}let u=[];n.where&&(u=(function(E){const T=G0(E);return T instanceof Li&&v0(T)?T.getFilters():[T]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((T=>(function(x){return new Lc(Ua(x.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(T)))})(n.orderBy));let g=null;n.limit&&(g=(function(E){let T;return T=typeof E=="object"?E.value:E,Yc(T)?null:T})(n.limit));let p=null;n.startAt&&(p=(function(E){const T=!!E.before,M=E.values||[];return new Ic(M,T)})(n.startAt));let m=null;return n.endAt&&(m=(function(E){const T=!E.before,M=E.values||[];return new Ic(M,T)})(n.endAt)),jS(t,l,f,u,g,"F",p,m)}function Aw(a,t){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:l})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function G0(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ua(n.unaryFilter.field);return Le.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ua(n.unaryFilter.field);return Le.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ua(n.unaryFilter.field);return Le.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ua(n.unaryFilter.field);return Le.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(a):a.fieldFilter!==void 0?(function(n){return Le.create(Ua(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return Li.create(n.compositeFilter.filters.map((s=>G0(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(n.compositeFilter.op))})(a):Et(30097,{filter:a})}function Sw(a){return hw[a]}function ww(a){return fw[a]}function Rw(a){return dw[a]}function za(a){return{fieldPath:a.canonicalString()}}function Ua(a){return Ze.fromServerFormat(a.fieldPath)}function F0(a){return a instanceof Le?(function(n){if(n.op==="=="){if(Wy(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NAN"}};if(Jy(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wy(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NOT_NAN"}};if(Jy(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(n.field),op:ww(n.op),value:n.value}}})(a):a instanceof Li?(function(n){const s=n.getFilters().map((l=>F0(l)));return s.length===1?s[0]:{compositeFilter:{op:Rw(n.op),filters:s}}})(a):Et(54877,{filter:a})}function xw(a){const t=[];return a.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Q0(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,n,s,l,u=At.min(),f=At.min(),g=Je.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new Hs(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t){this.yt=t}}function Dw(a){const t=Tw({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Bd(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.Cn=new Nw}addToCollectionParentIndex(t,n){return this.Cn.add(n),nt.resolve()}getCollectionParents(t,n){return nt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return nt.resolve()}deleteFieldIndex(t,n){return nt.resolve()}deleteAllFieldIndexes(t){return nt.resolve()}createTargetIndexes(t,n){return nt.resolve()}getDocumentsMatchingTarget(t,n){return nt.resolve(null)}getIndexType(t,n){return nt.resolve(0)}getFieldIndexes(t,n){return nt.resolve([])}getNextCollectionGroupToUpdate(t){return nt.resolve(null)}getMinOffset(t,n){return nt.resolve($s.min())}getMinOffsetFromCollectionGroup(t,n){return nt.resolve($s.min())}updateCollectionGroup(t,n,s){return nt.resolve()}updateIndexEntries(t,n){return nt.resolve()}}class Nw{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new ze(ae.comparator),u=!l.has(s);return this.index[n]=l.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new ze(ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Y0=41943040;class yn{static withCacheSize(t){return new yn(t,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(Y0,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="LruGarbageCollector",Mw=1048576;function mv([a,t],[n,s]){const l=Ut(a,n);return l===0?Ut(t,s):l}class Ow{constructor(t){this.Ir=t,this.buffer=new ze(mv),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();mv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Iw{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dt(gv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wa(n)?dt(gv,"Ignoring IndexedDB error during garbage collection: ",n):await Ja(n)}await this.Vr(3e5)}))}}class Lw{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return nt.resolve(Qc.ce);const s=new Ow(n);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(dv)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dv):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,l,u,f,g,p,m;const b=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,f=Date.now(),this.nthSequenceNumber(t,l)))).next((E=>(s=E,g=Date.now(),this.removeTargets(t,s,n)))).next((E=>(u=E,p=Date.now(),this.removeOrphanedDocuments(t,s)))).next((E=>(m=Date.now(),Ia()<=qt.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(g-f)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-b}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function zw(a,t){return new Lw(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.changes=new Hr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,nn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?nt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,n)))).next((l=>(s!==null&&vo(s.mutation,l,si.empty(),le.now()),l)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,kt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=kt()){const l=Ur();return this.populateOverlays(t,l,n).next((()=>this.computeViews(t,n,l,s).next((u=>{let f=fo();return u.forEach(((g,p)=>{f=f.insert(g,p.overlayedDocument)})),f}))))}getOverlayedDocuments(t,n){const s=Ur();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,kt())))}populateOverlays(t,n,s){const l=[];return s.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(t,l).next((u=>{u.forEach(((f,g)=>{n.set(f,g)}))}))}computeViews(t,n,s,l){let u=ss();const f=yo(),g=(function(){return yo()})();return n.forEach(((p,m)=>{const b=s.get(m.key);l.has(m.key)&&(b===void 0||b.mutation instanceof qr)?u=u.insert(m.key,m):b!==void 0?(f.set(m.key,b.mutation.getFieldMask()),vo(b.mutation,m,b.mutation.getFieldMask(),le.now())):f.set(m.key,si.empty())})),this.recalculateAndSaveOverlays(t,u).next((p=>(p.forEach(((m,b)=>f.set(m,b))),n.forEach(((m,b)=>g.set(m,new kw(b,f.get(m)??null)))),g)))}recalculateAndSaveOverlays(t,n){const s=yo();let l=new he(((f,g)=>f-g)),u=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((f=>{for(const g of f)g.keys().forEach((p=>{const m=n.get(p);if(m===null)return;let b=s.get(p)||si.empty();b=g.applyToLocalView(m,b),s.set(p,b);const E=(l.get(g.batchId)||kt()).add(p);l=l.insert(g.batchId,E)}))})).next((()=>{const f=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),m=p.key,b=p.value,E=C0();b.forEach((T=>{if(!u.has(T)){const M=I0(n.get(T),s.get(T));M!==null&&E.set(T,M),u=u.add(T)}})),f.push(this.documentOverlayCache.saveOverlays(t,m,E))}return nt.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,l){return(function(f){return yt.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):HS(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next((u=>{const f=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-u.size):nt.resolve(Ur());let g=So,p=u;return f.next((m=>nt.forEach(m,((b,E)=>(g<E.largestBatchId&&(g=E.largestBatchId),u.get(b)?nt.resolve():this.remoteDocumentCache.getEntry(t,b).next((T=>{p=p.insert(b,T)}))))).next((()=>this.populateOverlays(t,m,u))).next((()=>this.computeViews(t,p,m,kt()))).next((b=>({batchId:g,changes:x0(b)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new yt(n)).next((s=>{let l=fo();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const u=n.collectionGroup;let f=fo();return this.indexManager.getCollectionParents(t,u).next((g=>nt.forEach(g,(p=>{const m=(function(E,T){return new Kc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(t,m,s,l).next((b=>{b.forEach(((E,T)=>{f=f.insert(E,T)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(t,n,s,l){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,l)))).next((f=>{u.forEach(((p,m)=>{const b=m.getKey();f.get(b)===null&&(f=f.insert(b,nn.newInvalidDocument(b)))}));let g=fo();return f.forEach(((p,m)=>{const b=u.get(p);b!==void 0&&vo(b.mutation,m,si.empty(),le.now()),Zc(n,m)&&(g=g.insert(p,m))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return nt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Di(l.createTime)}})(n)),nt.resolve()}getNamedQuery(t,n){return nt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:Dw(l.bundledQuery),readTime:Di(l.readTime)}})(n)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.overlays=new he(yt.comparator),this.qr=new Map}getOverlay(t,n){return nt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Ur();return nt.forEach(n,(l=>this.getOverlay(t,l).next((u=>{u!==null&&s.set(l,u)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((l,u)=>{this.St(t,n,u)})),nt.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),nt.resolve()}getOverlaysForCollection(t,n,s){const l=Ur(),u=n.length+1,f=new yt(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,m=p.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===u&&p.largestBatchId>s&&l.set(p.getKey(),p)}return nt.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let u=new he(((m,b)=>m-b));const f=this.overlays.getIterator();for(;f.hasNext();){const m=f.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let b=u.get(m.largestBatchId);b===null&&(b=Ur(),u=u.insert(m.largestBatchId,b)),b.set(m.getKey(),m)}}const g=Ur(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,b)=>g.set(m,b))),!(g.size()>=l)););return nt.resolve(g)}St(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new rw(n,s));let u=this.qr.get(n);u===void 0&&(u=kt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(t){return nt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.Qr=new ze(je.$r),this.Ur=new ze(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new je(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new je(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new yt(new ae([])),s=new je(n,t),l=new je(n,t+1),u=[];return this.Ur.forEachInRange([s,l],(f=>{this.Gr(f),u.push(f.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new yt(new ae([])),s=new je(n,t),l=new je(n,t+1);let u=kt();return this.Ur.forEachInRange([s,l],(f=>{u=u.add(f.key)})),u}containsKey(t){const n=new je(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class je{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return yt.comparator(t.key,n.key)||Ut(t.Yr,n.Yr)}static Kr(t,n){return Ut(t.Yr,n.Yr)||yt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(je.$r)}checkEmpty(t){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new sw(u,n,s,l);this.mutationQueue.push(f);for(const g of l)this.Zr=this.Zr.add(new je(g.key,u)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return nt.resolve(f)}lookupMutationBatch(t,n){return nt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.ei(s),u=l<0?0:l;return nt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?og:this.tr-1)}getAllMutationBatches(t){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new je(n,0),l=new je(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,l],(f=>{const g=this.Xr(f.Yr);u.push(g)})),nt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new ze(Ut);return n.forEach((l=>{const u=new je(l,0),f=new je(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],(g=>{s=s.add(g.Yr)}))})),nt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let u=s;yt.isDocumentKey(u)||(u=u.child(""));const f=new je(new yt(u),0);let g=new ze(Ut);return this.Zr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===l&&(g=g.add(p.Yr)),!0)}),f),nt.resolve(this.ti(g))}ti(t){const n=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&n.push(l)})),n}removeMutationBatch(t,n){Kt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return nt.forEach(n.mutations,(l=>{const u=new je(l.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new je(n,0),l=this.Zr.firstAfterOrEqual(s);return nt.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,nt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t){this.ri=t,this.docs=(function(){return new he(yt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),u=l?l.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return nt.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(t,n){let s=ss();return n.forEach((l=>{const u=this.docs.get(l);s=s.insert(l,u?u.document.mutableCopy():nn.newInvalidDocument(l))})),nt.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let u=ss();const f=n.path,g=new yt(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:m,value:{document:b}}=p.getNext();if(!f.isPrefixOf(m.path))break;m.path.length>f.length+1||yS(_S(b),s)<=0||(l.has(b.key)||Zc(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return nt.resolve(u)}getAllFromCollectionGroup(t,n,s,l){Et(9500)}ii(t,n){return nt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new Fw(this)}getSize(t){return nt.resolve(this.size)}}class Fw extends Uw{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),nt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(t){this.persistence=t,this.si=new Hr((n=>hg(n)),fg),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.oi=0,this._i=new _g,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(t,n){return this.si.forEach(((s,l)=>n(l))),nt.resolve()}getLastRemoteSnapshotVersion(t){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),nt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Ya(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,nt.resolve()}updateTargetData(t,n){return this.Pr(n),nt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,nt.resolve()}removeTargets(t,n,s){let l=0;const u=[];return this.si.forEach(((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),nt.waitFor(u).next((()=>l))}getTargetCount(t){return nt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return nt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),nt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((f=>{u.push(l.markPotentiallyOrphaned(t,f))})),nt.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),nt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return nt.resolve(s)}containsKey(t,n){return nt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(t,n){this.ui={},this.overlays={},this.ci=new Qc(0),this.li=!1,this.li=!0,this.hi=new qw,this.referenceDelegate=t(this),this.Pi=new Qw(this),this.indexManager=new Vw,this.remoteDocumentCache=(function(l){return new Gw(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new Cw(n),this.Ii=new jw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Hw,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new Pw(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){dt("MemoryPersistence","Starting transaction:",t);const l=new Yw(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(t,n){return nt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class Yw extends bS{constructor(t){super(),this.currentSequenceNumber=t}}class yg{constructor(t){this.persistence=t,this.Ri=new _g,this.Vi=null}static mi(t){return new yg(t)}get fi(){if(this.Vi)return this.Vi;throw Et(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),nt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),nt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),nt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.fi,(s=>{const l=yt.fromPath(s);return this.gi(t,l).next((u=>{u||n.removeEntry(l,At.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return nt.or([()=>nt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Bc{constructor(t,n){this.persistence=t,this.pi=new Hr((s=>AS(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=zw(this,n)}static mi(t,n){return new Bc(t,n)}Ei(){}di(t){return nt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((l=>s+l))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return nt.forEach(this.pi,((s,l)=>this.br(t,s,l).next((u=>u?nt.resolve():n(l)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(t,(f=>this.br(t,f,n).next((g=>{g||(s++,u.removeEntry(f,At.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),nt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),nt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),nt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),nt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ec(t.data.value)),n}br(t,n,s){return nt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.pi.get(n);return nt.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=l}static As(t,n){let s=kt(),l=kt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new vg(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return BT()?8:ES(UT())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,l){const u={result:null};return this.ys(t,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ws(t,n,l,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new Xw;return this.Ss(t,n,f).next((g=>{if(u.result=g,this.Vs)return this.bs(t,n,f,g.size)}))})).next((()=>u.result))}bs(t,n,s,l){return s.documentReadCount<this.fs?(Ia()<=qt.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",La(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),nt.resolve()):(Ia()<=qt.DEBUG&&dt("QueryEngine","Query:",La(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ia()<=qt.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",La(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ci(n))):nt.resolve())}ys(t,n){if(iv(n))return nt.resolve(null);let s=Ci(n);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Bd(n,null,"F"),s=Ci(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const f=kt(...u);return this.ps.getDocuments(t,f).next((g=>this.indexManager.getMinOffset(t,s).next((p=>{const m=this.Ds(n,g);return this.Cs(n,m,f,p.readTime)?this.ys(t,Bd(n,null,"F")):this.vs(t,m,n,p)}))))})))))}ws(t,n,s,l){return iv(n)||l.isEqual(At.min())?nt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const f=this.Ds(n,u);return this.Cs(n,f,s,l)?nt.resolve(null):(Ia()<=qt.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),La(n)),this.vs(t,f,n,pS(l,So)).next((g=>g)))}))}Ds(t,n){let s=new ze(w0(t));return n.forEach(((l,u)=>{Zc(t,u)&&(s=s.add(u))})),s}Cs(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(t,n,s){return Ia()<=qt.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",La(n)),this.ps.getDocumentsMatchingQuery(t,n,$s.min(),s)}vs(t,n,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="LocalStore",$w=3e8;class Zw{constructor(t,n,s,l){this.persistence=t,this.Fs=n,this.serializer=l,this.Ms=new he(Ut),this.xs=new Hr((u=>hg(u)),fg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Bw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function Jw(a,t,n,s){return new Zw(a,t,n,s)}async function K0(a,t){const n=wt(a);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next((u=>(l=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],g=[];let p=kt();for(const m of l){f.push(m.batchId);for(const b of m.mutations)p=p.add(b.key)}for(const m of u){g.push(m.batchId);for(const b of m.mutations)p=p.add(b.key)}return n.localDocuments.getDocuments(s,p).next((m=>({Ls:m,removedBatchIds:f,addedBatchIds:g})))}))}))}function Ww(a,t){const n=wt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,m,b){const E=m.batch,T=E.keys();let M=nt.resolve();return T.forEach((x=>{M=M.next((()=>b.getEntry(p,x))).next((I=>{const U=m.docVersions.get(x);Kt(U!==null,48541),I.version.compareTo(U)<0&&(E.applyToRemoteDocument(I,m),I.isValidDocument()&&(I.setReadTime(m.commitVersion),b.addEntry(I)))}))})),M.next((()=>g.mutationQueue.removeMutationBatch(p,E)))})(n,s,t,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=kt();for(let m=0;m<g.mutationResults.length;++m)g.mutationResults[m].transformResults.length>0&&(p=p.add(g.batch.mutations[m].key));return p})(t)))).next((()=>n.localDocuments.getDocuments(s,l)))}))}function $0(a){const t=wt(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function t2(a,t){const n=wt(a),s=t.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const g=[];t.targetChanges.forEach(((b,E)=>{const T=l.get(E);if(!T)return;g.push(n.Pi.removeMatchingKeys(u,b.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(u,b.addedDocuments,E))));let M=T.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(E)!==null?M=M.withResumeToken(Je.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(b.resumeToken,s)),l=l.insert(E,M),(function(I,U,rt){return I.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=$w?!0:rt.addedDocuments.size+rt.modifiedDocuments.size+rt.removedDocuments.size>0})(T,M,b)&&g.push(n.Pi.updateTargetData(u,M))}));let p=ss(),m=kt();if(t.documentUpdates.forEach((b=>{t.resolvedLimboDocuments.has(b)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),g.push(e2(u,f,t.documentUpdates).next((b=>{p=b.ks,m=b.qs}))),!s.isEqual(At.min())){const b=n.Pi.getLastRemoteSnapshotVersion(u).next((E=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));g.push(b)}return nt.waitFor(g).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,m))).next((()=>p))})).then((u=>(n.Ms=l,u)))}function e2(a,t,n){let s=kt(),l=kt();return n.forEach((u=>s=s.add(u))),t.getEntries(a,s).next((u=>{let f=ss();return n.forEach(((g,p)=>{const m=u.get(g);p.isFoundDocument()!==m.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(At.min())?(t.removeEntry(g,p.readTime),f=f.insert(g,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(p),f=f.insert(g,p)):dt(bg,"Ignoring outdated watch update for ",g,". Current version:",m.version," Watch version:",p.version)})),{ks:f,qs:l}}))}function n2(a,t){const n=wt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=og),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function i2(a,t){const n=wt(a);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return n.Pi.getTargetData(s,t).next((u=>u?(l=u,nt.resolve(l)):n.Pi.allocateTargetId(s).next((f=>(l=new Hs(t,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=n.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function Gd(a,t,n){const s=wt(a),l=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!Wa(f))throw f;dt(bg,`Failed to update sequence numbers for target ${t}: ${f}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function pv(a,t,n){const s=wt(a);let l=At.min(),u=kt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(p,m,b){const E=wt(p),T=E.xs.get(b);return T!==void 0?nt.resolve(E.Ms.get(T)):E.Pi.getTargetData(m,b)})(s,f,Ci(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(f,t,n?l:At.min(),n?u:kt()))).next((g=>(s2(s,PS(t),g),{documents:g,Qs:u})))))}function s2(a,t,n){let s=a.Os.get(t)||At.min();n.forEach(((l,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),a.Os.set(t,s)}class _v{constructor(){this.activeTargetIds=KS()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class r2{constructor(){this.Mo=new _v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new _v,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="ConnectivityMonitor";class vv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dt(yv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dt(yv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function Fd(){return _c===null?_c=(function(){return 268435456+Math.round(2147483648*Math.random())})():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="RestConnection",l2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Mc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,n,s,l,u){const f=Fd(),g=this.zo(t,n.toUriEncodedString());dt(Ad,`Sending RPC '${t}' ${f}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,l,u);const{host:m}=new URL(g),b=ig(m);return this.Jo(t,g,p,s,b).then((E=>(dt(Ad,`Received RPC '${t}' ${f}: `,E),E)),(E=>{throw Pa(Ad,`RPC '${t}' ${f} failed with error: `,E,"url: ",g,"request:",s),E}))}Ho(t,n,s,l,u,f){return this.Go(t,n,s,l,u)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Za})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>t[u]=l)),s&&s.headers.forEach(((l,u)=>t[u]=l))}zo(t,n){const s=l2[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class c2 extends o2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,l,u){const f=Fd();return new Promise(((g,p)=>{const m=new Jv;m.setWithCredentials(!0),m.listenOnce(Wv.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case bc.NO_ERROR:const E=m.getResponseJson();dt(tn,`XHR for RPC '${t}' ${f} received:`,JSON.stringify(E)),g(E);break;case bc.TIMEOUT:dt(tn,`RPC '${t}' ${f} timed out`),p(new pt(st.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const T=m.getStatus();if(dt(tn,`RPC '${t}' ${f} failed with status:`,T,"response text:",m.getResponseText()),T>0){let M=m.getResponseJson();Array.isArray(M)&&(M=M[0]);const x=M?.error;if(x&&x.status&&x.message){const I=(function(rt){const X=rt.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(X)>=0?X:st.UNKNOWN})(x.status);p(new pt(I,x.message))}else p(new pt(st.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new pt(st.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:t,streamId:f,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{dt(tn,`RPC '${t}' ${f} completed.`)}}));const b=JSON.stringify(l);dt(tn,`RPC '${t}' ${f} sending request:`,l),m.send(n,"POST",b,s,15)}))}T_(t,n,s){const l=Fd(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],f=n0(),g=e0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const b=u.join("");dt(tn,`Creating RPC '${t}' stream ${l}: ${b}`,p);const E=f.createWebChannel(b,p);this.I_(E);let T=!1,M=!1;const x=new u2({Yo:U=>{M?dt(tn,`Not sending because RPC '${t}' stream ${l} is closed:`,U):(T||(dt(tn,`Opening RPC '${t}' stream ${l} transport.`),E.open(),T=!0),dt(tn,`RPC '${t}' stream ${l} sending:`,U),E.send(U))},Zo:()=>E.close()}),I=(U,rt,X)=>{U.listen(rt,(K=>{try{X(K)}catch(at){setTimeout((()=>{throw at}),0)}}))};return I(E,ho.EventType.OPEN,(()=>{M||(dt(tn,`RPC '${t}' stream ${l} transport opened.`),x.o_())})),I(E,ho.EventType.CLOSE,(()=>{M||(M=!0,dt(tn,`RPC '${t}' stream ${l} transport closed`),x.a_(),this.E_(E))})),I(E,ho.EventType.ERROR,(U=>{M||(M=!0,Pa(tn,`RPC '${t}' stream ${l} transport errored. Name:`,U.name,"Message:",U.message),x.a_(new pt(st.UNAVAILABLE,"The operation could not be completed")))})),I(E,ho.EventType.MESSAGE,(U=>{if(!M){const rt=U.data[0];Kt(!!rt,16349);const X=rt,K=X?.error||X[0]?.error;if(K){dt(tn,`RPC '${t}' stream ${l} received error:`,K);const at=K.status;let it=(function(R){const C=De[R];if(C!==void 0)return U0(C)})(at),et=K.message;it===void 0&&(it=st.INTERNAL,et="Unknown error status: "+at+" with message "+K.message),M=!0,x.a_(new pt(it,et)),E.close()}else dt(tn,`RPC '${t}' stream ${l} received:`,rt),x.u_(rt)}})),I(g,t0.STAT_EVENT,(U=>{U.stat===Od.PROXY?dt(tn,`RPC '${t}' stream ${l} detected buffering proxy`):U.stat===Od.NOPROXY&&dt(tn,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(a){return new gw(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t,n,s=1e3,l=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-s);l>0&&dt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="PersistentStream";class J0{constructor(t,n,s,l,u,f,g,p){this.Mi=t,this.S_=s,this.b_=l,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z0(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===st.RESOURCE_EXHAUSTED?(is(n.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===n&&this.G_(s,l)}),(s=>{t((()=>{const l=new pt(st.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return dt(bv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(dt(bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h2 extends J0{constructor(t,n,s,l,u,f){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=_w(this.serializer,t),s=(function(u){if(!("targetChange"in u))return At.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?At.min():f.readTime?Di(f.readTime):At.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Pd(this.serializer),n.addTarget=(function(u,f){let g;const p=f.target;if(g=kd(p)?{documents:bw(u,p)}:{query:Ew(u,p).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=j0(u,f.resumeToken);const m=jd(u,f.expectedCount);m!==null&&(g.expectedCount=m)}else if(f.snapshotVersion.compareTo(At.min())>0){g.readTime=kc(u,f.snapshotVersion.toTimestamp());const m=jd(u,f.expectedCount);m!==null&&(g.expectedCount=m)}return g})(this.serializer,t);const s=Aw(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Pd(this.serializer),n.removeTarget=t,this.q_(n)}}class f2 extends J0{constructor(t,n,s,l,u,f){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Kt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Kt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Kt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=vw(t.writeResults,t.commitTime),s=Di(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Pd(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>yw(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{}class g2 extends d2{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new pt(st.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Go(t,Hd(n,s),l,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pt(st.UNKNOWN,u.toString())}))}Ho(t,n,s,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,g])=>this.connection.Ho(t,Hd(n,s),l,f,g,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pt(st.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class m2{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(n),this.aa=!1):dt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="RemoteStore";class p2{constructor(t,n,s,l,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((f=>{s.enqueueAndForget((async()=>{Pr(this)&&(dt(Br,"Restarting streams for network reachability change."),await(async function(p){const m=wt(p);m.Ea.add(4),await Lo(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ih(m)})(this))}))})),this.Ra=new m2(s,l)}}async function ih(a){if(Pr(a))for(const t of a.da)await t(!0)}async function Lo(a){for(const t of a.da)await t(!1)}function W0(a,t){const n=wt(a);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Sg(n)?Ag(n):tl(n).O_()&&Tg(n,t))}function Eg(a,t){const n=wt(a),s=tl(n);n.Ia.delete(t),s.O_()&&tb(n,t),n.Ia.size===0&&(s.O_()?s.L_():Pr(n)&&n.Ra.set("Unknown"))}function Tg(a,t){if(a.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(At.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tl(a).Y_(t)}function tb(a,t){a.Va.Ue(t),tl(a).Z_(t)}function Ag(a){a.Va=new cw({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),At:t=>a.Ia.get(t)||null,ht:()=>a.datastore.serializer.databaseId}),tl(a).start(),a.Ra.ua()}function Sg(a){return Pr(a)&&!tl(a).x_()&&a.Ia.size>0}function Pr(a){return wt(a).Ea.size===0}function eb(a){a.Va=void 0}async function _2(a){a.Ra.set("Online")}async function y2(a){a.Ia.forEach(((t,n)=>{Tg(a,t)}))}async function v2(a,t){eb(a),Sg(a)?(a.Ra.ha(t),Ag(a)):a.Ra.set("Unknown")}async function b2(a,t,n){if(a.Ra.set("Online"),t instanceof B0&&t.state===2&&t.cause)try{await(async function(l,u){const f=u.cause;for(const g of u.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,f),l.Ia.delete(g),l.Va.removeTarget(g))})(a,t)}catch(s){dt(Br,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await jc(a,s)}else if(t instanceof Sc?a.Va.Ze(t):t instanceof k0?a.Va.st(t):a.Va.tt(t),!n.isEqual(At.min()))try{const s=await $0(a.localStore);n.compareTo(s)>=0&&await(function(u,f){const g=u.Va.Tt(f);return g.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const b=u.Ia.get(m);b&&u.Ia.set(m,b.withResumeToken(p.resumeToken,f))}})),g.targetMismatches.forEach(((p,m)=>{const b=u.Ia.get(p);if(!b)return;u.Ia.set(p,b.withResumeToken(Je.EMPTY_BYTE_STRING,b.snapshotVersion)),tb(u,p);const E=new Hs(b.target,p,m,b.sequenceNumber);Tg(u,E)})),u.remoteSyncer.applyRemoteEvent(g)})(a,n)}catch(s){dt(Br,"Failed to raise snapshot:",s),await jc(a,s)}}async function jc(a,t,n){if(!Wa(t))throw t;a.Ea.add(1),await Lo(a),a.Ra.set("Offline"),n||(n=()=>$0(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{dt(Br,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await ih(a)}))}function nb(a,t){return t().catch((n=>jc(a,n,t)))}async function sh(a){const t=wt(a),n=tr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:og;for(;E2(t);)try{const l=await n2(t.localStore,s);if(l===null){t.Ta.length===0&&n.L_();break}s=l.batchId,T2(t,l)}catch(l){await jc(t,l)}ib(t)&&sb(t)}function E2(a){return Pr(a)&&a.Ta.length<10}function T2(a,t){a.Ta.push(t);const n=tr(a);n.O_()&&n.X_&&n.ea(t.mutations)}function ib(a){return Pr(a)&&!tr(a).x_()&&a.Ta.length>0}function sb(a){tr(a).start()}async function A2(a){tr(a).ra()}async function S2(a){const t=tr(a);for(const n of a.Ta)t.ea(n.mutations)}async function w2(a,t,n){const s=a.Ta.shift(),l=gg.from(s,t,n);await nb(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await sh(a)}async function R2(a,t){t&&tr(a).X_&&await(async function(s,l){if((function(f){return lw(f)&&f!==st.ABORTED})(l.code)){const u=s.Ta.shift();tr(s).B_(),await nb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,l))),await sh(s)}})(a,t),ib(a)&&sb(a)}async function Ev(a,t){const n=wt(a);n.asyncQueue.verifyOperationInProgress(),dt(Br,"RemoteStore received new credentials");const s=Pr(n);n.Ea.add(3),await Lo(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ih(n)}async function x2(a,t){const n=wt(a);t?(n.Ea.delete(2),await ih(n)):t||(n.Ea.add(2),await Lo(n),n.Ra.set("Unknown"))}function tl(a){return a.ma||(a.ma=(function(n,s,l){const u=wt(n);return u.sa(),new h2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:_2.bind(null,a),t_:y2.bind(null,a),r_:v2.bind(null,a),H_:b2.bind(null,a)}),a.da.push((async t=>{t?(a.ma.B_(),Sg(a)?Ag(a):a.Ra.set("Unknown")):(await a.ma.stop(),eb(a))}))),a.ma}function tr(a){return a.fa||(a.fa=(function(n,s,l){const u=wt(n);return u.sa(),new f2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:A2.bind(null,a),r_:R2.bind(null,a),ta:S2.bind(null,a),na:w2.bind(null,a)}),a.da.push((async t=>{t?(a.fa.B_(),await sh(a)):(await a.fa.stop(),a.Ta.length>0&&(dt(Br,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t,n,s,l,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=u,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,u){const f=Date.now()+s,g=new wg(t,n,f,l,u);return g.start(s),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(st.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(a,t){if(is("AsyncQueue",`${t}: ${a}`),Wa(a))return new pt(st.UNAVAILABLE,`${t}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{static emptySet(t){return new ja(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||yt.comparator(n.key,s.key):(n,s)=>yt.comparator(n.key,s.key),this.keyedMap=fo(),this.sortedSet=new he(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ja)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=s.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new ja;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.ga=new he(yt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Et(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class Xa{constructor(t,n,s,l,u,f,g,p,m){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(t,n,s,l,u){const f=[];return n.forEach((g=>{f.push({type:0,doc:g})})),new Xa(t,n,ja.emptySet(n),f,s,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$c(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class D2{constructor(){this.queries=Av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const l=wt(n),u=l.queries;l.queries=Av(),u.forEach(((f,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new pt(st.ABORTED,"Firestore shutting down"))}}function Av(){return new Hr((a=>S0(a)),$c)}async function V2(a,t){const n=wt(a);let s=3;const l=t.query;let u=n.queries.get(l);u?!u.ba()&&t.Da()&&(s=2):(u=new C2,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const g=Rg(f,`Initialization of query '${La(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&xg(n)}async function N2(a,t){const n=wt(a),s=t.query;let l=3;const u=n.queries.get(s);if(u){const f=u.Sa.indexOf(t);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?l=t.Da()?0:1:!u.ba()&&t.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function M2(a,t){const n=wt(a);let s=!1;for(const l of t){const u=l.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Fa(l)&&(s=!0);f.wa=l}}s&&xg(n)}function O2(a,t,n){const s=wt(a),l=s.queries.get(t);if(l)for(const u of l.Sa)u.onError(n);s.queries.delete(t)}function xg(a){a.Ca.forEach((t=>{t.next()}))}var Qd,Sv;(Sv=Qd||(Qd={})).Ma="default",Sv.Cache="cache";class I2{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Xa(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Xa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Qd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t){this.key=t}}class ab{constructor(t){this.key=t}}class L2{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=kt(),this.mutatedKeys=kt(),this.eu=w0(t),this.tu=new ja(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new Tv,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,m=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((b,E)=>{const T=l.get(b),M=Zc(this.query,E)?E:null,x=!!T&&this.mutatedKeys.has(T.key),I=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;T&&M?T.data.isEqual(M.data)?x!==I&&(s.track({type:3,doc:M}),U=!0):this.su(T,M)||(s.track({type:2,doc:M}),U=!0,(p&&this.eu(M,p)>0||m&&this.eu(M,m)<0)&&(g=!0)):!T&&M?(s.track({type:0,doc:M}),U=!0):T&&!M&&(s.track({type:1,doc:T}),U=!0,(p||m)&&(g=!0)),U&&(M?(f=f.add(M),u=I?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),s.track({type:1,doc:b})}return{tu:f,iu:s,Cs:g,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const f=t.iu.ya();f.sort(((b,E)=>(function(M,x){const I=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Rt:U})}};return I(M)-I(x)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(s),l=l??!1;const g=n&&!l?this._u():[],p=this.Xa.size===0&&this.current&&!l?1:0,m=p!==this.Za;return this.Za=p,f.length!==0||m?{snapshot:new Xa(this.query,t.tu,u,f,t.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=kt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new ab(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new rb(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=kt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Xa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cg="SyncEngine";class z2{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class U2{constructor(t){this.key=t,this.hu=!1}}class k2{constructor(t,n,s,l,u,f){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Hr((g=>S0(g)),$c),this.Iu=new Map,this.Eu=new Set,this.du=new he(yt.comparator),this.Au=new Map,this.Ru=new _g,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B2(a,t,n=!0){const s=fb(a);let l;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await lb(s,t,n,!0),l}async function j2(a,t){const n=fb(a);await lb(n,t,!0,!1)}async function lb(a,t,n,s){const l=await i2(a.localStore,Ci(t)),u=l.targetId,f=a.sharedClientState.addLocalQueryTarget(u,n);let g;return s&&(g=await H2(a,t,u,f==="current",l.resumeToken)),a.isPrimaryClient&&n&&W0(a.remoteStore,l),g}async function H2(a,t,n,s,l){a.pu=(E,T,M)=>(async function(I,U,rt,X){let K=U.view.ru(rt);K.Cs&&(K=await pv(I.localStore,U.query,!1).then((({documents:w})=>U.view.ru(w,K))));const at=X&&X.targetChanges.get(U.targetId),it=X&&X.targetMismatches.get(U.targetId)!=null,et=U.view.applyChanges(K,I.isPrimaryClient,at,it);return Rv(I,U.targetId,et.au),et.snapshot})(a,E,T,M);const u=await pv(a.localStore,t,!0),f=new L2(t,u.Qs),g=f.ru(u.documents),p=Io.createSynthesizedTargetChangeForCurrentChange(n,s&&a.onlineState!=="Offline",l),m=f.applyChanges(g,a.isPrimaryClient,p);Rv(a,n,m.au);const b=new z2(t,n,f);return a.Tu.set(t,b),a.Iu.has(n)?a.Iu.get(n).push(t):a.Iu.set(n,[t]),m.snapshot}async function q2(a,t,n){const s=wt(a),l=s.Tu.get(t),u=s.Iu.get(l.targetId);if(u.length>1)return s.Iu.set(l.targetId,u.filter((f=>!$c(f,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Gd(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Eg(s.remoteStore,l.targetId),Yd(s,l.targetId)})).catch(Ja)):(Yd(s,l.targetId),await Gd(s.localStore,l.targetId,!0))}async function P2(a,t){const n=wt(a),s=n.Tu.get(t),l=n.Iu.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Eg(n.remoteStore,s.targetId))}async function G2(a,t,n){const s=Z2(a);try{const l=await(function(f,g){const p=wt(f),m=le.now(),b=g.reduce(((M,x)=>M.add(x.key)),kt());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let x=ss(),I=kt();return p.Ns.getEntries(M,b).next((U=>{x=U,x.forEach(((rt,X)=>{X.isValidDocument()||(I=I.add(rt))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,x))).next((U=>{E=U;const rt=[];for(const X of g){const K=nw(X,E.get(X.key).overlayedDocument);K!=null&&rt.push(new qr(X.key,K,p0(K.value.mapValue),es.exists(!0)))}return p.mutationQueue.addMutationBatch(M,m,rt,g)})).next((U=>{T=U;const rt=U.applyToLocalDocumentSet(E,I);return p.documentOverlayCache.saveOverlays(M,U.batchId,rt)}))})).then((()=>({batchId:T.batchId,changes:x0(E)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(f,g,p){let m=f.Vu[f.currentUser.toKey()];m||(m=new he(Ut)),m=m.insert(g,p),f.Vu[f.currentUser.toKey()]=m})(s,l.batchId,n),await zo(s,l.changes),await sh(s.remoteStore)}catch(l){const u=Rg(l,"Failed to persist write");n.reject(u)}}async function ob(a,t){const n=wt(a);try{const s=await t2(n.localStore,t);t.targetChanges.forEach(((l,u)=>{const f=n.Au.get(u);f&&(Kt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Kt(f.hu,14607):l.removedDocuments.size>0&&(Kt(f.hu,42227),f.hu=!1))})),await zo(n,s,t)}catch(s){await Ja(s)}}function wv(a,t,n){const s=wt(a);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.Tu.forEach(((u,f)=>{const g=f.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(f,g){const p=wt(f);p.onlineState=g;let m=!1;p.queries.forEach(((b,E)=>{for(const T of E.Sa)T.va(g)&&(m=!0)})),m&&xg(p)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function F2(a,t,n){const s=wt(a);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Au.get(t),u=l&&l.key;if(u){let f=new he(yt.comparator);f=f.insert(u,nn.newNoDocument(u,At.min()));const g=kt().add(u),p=new eh(At.min(),new Map,new he(Ut),f,g);await ob(s,p),s.du=s.du.remove(u),s.Au.delete(t),Dg(s)}else await Gd(s.localStore,t,!1).then((()=>Yd(s,t,n))).catch(Ja)}async function Q2(a,t){const n=wt(a),s=t.batch.batchId;try{const l=await Ww(n.localStore,t);cb(n,s,null),ub(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await zo(n,l)}catch(l){await Ja(l)}}async function Y2(a,t,n){const s=wt(a);try{const l=await(function(f,g){const p=wt(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let b;return p.mutationQueue.lookupMutationBatch(m,g).next((E=>(Kt(E!==null,37113),b=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,b,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,b))).next((()=>p.localDocuments.getDocuments(m,b)))}))})(s.localStore,t);cb(s,t,n),ub(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await zo(s,l)}catch(l){await Ja(l)}}function ub(a,t){(a.mu.get(t)||[]).forEach((n=>{n.resolve()})),a.mu.delete(t)}function cb(a,t,n){const s=wt(a);let l=s.Vu[s.currentUser.toKey()];if(l){const u=l.get(t);u&&(n?u.reject(n):u.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Yd(a,t,n=null){a.sharedClientState.removeLocalQueryTarget(t);for(const s of a.Iu.get(t))a.Tu.delete(s),n&&a.Pu.yu(s,n);a.Iu.delete(t),a.isPrimaryClient&&a.Ru.jr(t).forEach((s=>{a.Ru.containsKey(s)||hb(a,s)}))}function hb(a,t){a.Eu.delete(t.path.canonicalString());const n=a.du.get(t);n!==null&&(Eg(a.remoteStore,n),a.du=a.du.remove(t),a.Au.delete(n),Dg(a))}function Rv(a,t,n){for(const s of n)s instanceof rb?(a.Ru.addReference(s.key,t),X2(a,s)):s instanceof ab?(dt(Cg,"Document no longer in limbo: "+s.key),a.Ru.removeReference(s.key,t),a.Ru.containsKey(s.key)||hb(a,s.key)):Et(19791,{wu:s})}function X2(a,t){const n=t.key,s=n.path.canonicalString();a.du.get(n)||a.Eu.has(s)||(dt(Cg,"New document in limbo: "+n),a.Eu.add(s),Dg(a))}function Dg(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const t=a.Eu.values().next().value;a.Eu.delete(t);const n=new yt(ae.fromString(t)),s=a.fu.next();a.Au.set(s,new U2(n)),a.du=a.du.insert(n,s),W0(a.remoteStore,new Hs(Ci(A0(n.path)),s,"TargetPurposeLimboResolution",Qc.ce))}}async function zo(a,t,n){const s=wt(a),l=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{f.push(s.pu(p,t,n).then((m=>{if((m||n)&&s.isPrimaryClient){const b=m?!m.fromCache:n?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(m){l.push(m);const b=vg.As(p.targetId,m);u.push(b)}})))})),await Promise.all(f),s.Pu.H_(l),await(async function(p,m){const b=wt(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>nt.forEach(m,(T=>nt.forEach(T.Es,(M=>b.persistence.referenceDelegate.addReference(E,T.targetId,M))).next((()=>nt.forEach(T.ds,(M=>b.persistence.referenceDelegate.removeReference(E,T.targetId,M)))))))))}catch(E){if(!Wa(E))throw E;dt(bg,"Failed to update sequence numbers: "+E)}for(const E of m){const T=E.targetId;if(!E.fromCache){const M=b.Ms.get(T),x=M.snapshotVersion,I=M.withLastLimboFreeSnapshotVersion(x);b.Ms=b.Ms.insert(T,I)}}})(s.localStore,u))}async function K2(a,t){const n=wt(a);if(!n.currentUser.isEqual(t)){dt(Cg,"User change. New user:",t.toKey());const s=await K0(n.localStore,t);n.currentUser=t,(function(u,f){u.mu.forEach((g=>{g.forEach((p=>{p.reject(new pt(st.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await zo(n,s.Ls)}}function $2(a,t){const n=wt(a),s=n.Au.get(t);if(s&&s.hu)return kt().add(s.key);{let l=kt();const u=n.Iu.get(t);if(!u)return l;for(const f of u){const g=n.Tu.get(f);l=l.unionWith(g.view.nu)}return l}}function fb(a){const t=wt(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=ob.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=F2.bind(null,t),t.Pu.H_=M2.bind(null,t.eventManager),t.Pu.yu=O2.bind(null,t.eventManager),t}function Z2(a){const t=wt(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Q2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Y2.bind(null,t),t}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=nh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Jw(this.persistence,new Kw,t.initialUser,this.serializer)}Cu(t){return new X0(yg.mi,this.serializer)}Du(t){return new r2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class J2 extends Hc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Kt(this.persistence.referenceDelegate instanceof Bc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Iw(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new X0((s=>Bc.mi(s,n)),this.serializer)}}class Xd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>wv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=K2.bind(null,this.syncEngine),await x2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new D2})()}createDatastore(t){const n=nh(t.databaseInfo.databaseId),s=(function(u){return new c2(u)})(t.databaseInfo);return(function(u,f,g,p){return new g2(u,f,g,p)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,l,u,f,g){return new p2(s,l,u,f,g)})(this.localStore,this.datastore,t.asyncQueue,(n=>wv(this.syncEngine,n,0)),(function(){return vv.v()?new vv:new a2})())}createSyncEngine(t,n){return(function(l,u,f,g,p,m,b){const E=new k2(l,u,f,g,p,m);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=wt(n);dt(Br,"RemoteStore shutting down."),s.Ea.add(5),await Lo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xd.provider={build:()=>new Xd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):is("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="FirestoreClient";class tR{constructor(t,n,s,l,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=en.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{dt(er,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(dt(er,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Rg(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function wd(a,t){a.asyncQueue.verifyOperationInProgress(),dt(er,"Initializing OfflineComponentProvider");const n=a.configuration;await t.initialize(n);let s=n.initialUser;a.setCredentialChangeListener((async l=>{s.isEqual(l)||(await K0(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=t}async function xv(a,t){a.asyncQueue.verifyOperationInProgress();const n=await eR(a);dt(er,"Initializing OnlineComponentProvider"),await t.initialize(n,a.configuration),a.setCredentialChangeListener((s=>Ev(t.remoteStore,s))),a.setAppCheckTokenChangeListener(((s,l)=>Ev(t.remoteStore,l))),a._onlineComponents=t}async function eR(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){dt(er,"Using user provided OfflineComponentProvider");try{await wd(a,a._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(l){return l.name==="FirebaseError"?l.code===st.FAILED_PRECONDITION||l.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Pa("Error using user provided cache. Falling back to memory cache: "+n),await wd(a,new Hc)}}else dt(er,"Using default OfflineComponentProvider"),await wd(a,new J2(void 0));return a._offlineComponents}async function db(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(dt(er,"Using user provided OnlineComponentProvider"),await xv(a,a._uninitializedComponentsProvider._online)):(dt(er,"Using default OnlineComponentProvider"),await xv(a,new Xd))),a._onlineComponents}function nR(a){return db(a).then((t=>t.syncEngine))}async function iR(a){const t=await db(a),n=t.eventManager;return n.onListen=B2.bind(null,t.syncEngine),n.onUnlisten=q2.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=j2.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=P2.bind(null,t.syncEngine),n}function sR(a,t,n={}){const s=new Fs;return a.asyncQueue.enqueueAndForget((async()=>(function(u,f,g,p,m){const b=new W2({next:T=>{b.Nu(),f.enqueueAndForget((()=>N2(u,E))),T.fromCache&&p.source==="server"?m.reject(new pt(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),E=new I2(g,b,{includeMetadataChanges:!0,qa:!0});return V2(u,E)})(await iR(a),a.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(a){const t={};return a.timeoutSeconds!==void 0&&(t.timeoutSeconds=a.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="firestore.googleapis.com",Dv=!0;class Vv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new pt(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mb,this.ssl=Dv}else this.host=t.host,this.ssl=t.ssl??Dv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Y0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Mw)throw new pt(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gb(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pt(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new rS;switch(s.type){case"firstParty":return new uS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pt(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Cv.get(n);s&&(dt("ComponentProvider","Removing Datastore"),Cv.delete(n),s.terminate())})(this),Promise.resolve()}}function rR(a,t,n,s={}){a=Ao(a,rh);const l=ig(t),u=a._getSettings(),f={...u,emulatorOptions:a._getEmulatorOptions()},g=`${t}:${n}`;l&&(MT(`https://${g}`),zT("Firestore",!0)),u.host!==mb&&u.host!==g&&Pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:g,ssl:l,emulatorOptions:s};if(!Cc(p,f)&&(a._setSettings(p),s.mockUserToken)){let m,b;if(typeof s.mockUserToken=="string")m=s.mockUserToken,b=en.MOCK_USER;else{m=OT(s.mockUserToken,a._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new pt(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new en(E)}a._authCredentials=new aS(new s0(m,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new ah(this.firestore,t,this._query)}}class He{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new He(this.firestore,t,this._key)}toJSON(){return{type:He._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(Oo(n,He._jsonSchema))return new He(t,s||null,new yt(ae.fromString(n.referencePath)))}}He._jsonSchemaVersion="firestore/documentReference/1.0",He._jsonSchema={type:Ve("string",He._jsonSchemaVersion),referencePath:Ve("string")};class Qs extends ah{constructor(t,n,s){super(t,n,A0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new He(this.firestore,null,new yt(t))}withConverter(t){return new Qs(this.firestore,t,this._path)}}function aR(a,t,...n){if(a=Ks(a),r0("collection","path",t),a instanceof rh){const s=ae.fromString(t,...n);return Gy(s),new Qs(a,null,s)}{if(!(a instanceof He||a instanceof Qs))throw new pt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(ae.fromString(t,...n));return Gy(s),new Qs(a.firestore,null,s)}}function lR(a,t,...n){if(a=Ks(a),arguments.length===1&&(t=ag.newId()),r0("doc","path",t),a instanceof rh){const s=ae.fromString(t,...n);return Py(s),new He(a,null,new yt(s))}{if(!(a instanceof He||a instanceof Qs))throw new pt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(ae.fromString(t,...n));return Py(s),new He(a.firestore,a instanceof Qs?a.converter:null,new yt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="AsyncQueue";class Mv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z0(this,"async_queue_retry"),this._c=()=>{const s=Sd();s&&dt(Nv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=Sd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Wa(t))throw t;dt(Nv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",Ov(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const l=wg.createAndSchedule(this,t,n,s,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Et(47125,{Pc:Ov(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Ov(a){let t=a.message||"";return a.stack&&(t=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),t}class Vg extends rh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new Mv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Mv(t),this._firestoreClient=void 0,await t}}}function oR(a,t){const n=typeof a=="object"?a:QA(),s=typeof a=="string"?a:Mc,l=HA(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const u=VT("firestore");u&&rR(l,...u)}return l}function pb(a){if(a._terminated)throw new pt(st.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||uR(a),a._firestoreClient}function uR(a){const t=a._freezeSettings(),n=(function(l,u,f,g){return new RS(l,u,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,gb(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,t);a._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),a._firestoreClient=new tR(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Fn(Je.fromBase64String(t))}catch(n){throw new pt(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Fn(Je.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Oo(t,Fn._jsonSchema))return Fn.fromBase64String(t.bytes)}}Fn._jsonSchemaVersion="firestore/bytes/1.0",Fn._jsonSchema={type:Ve("string",Fn._jsonSchemaVersion),bytes:Ve("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new pt(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new pt(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new pt(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ut(this._lat,t._lat)||Ut(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(t){if(Oo(t,Vi._jsonSchema))return new Vi(t.latitude,t.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Ve("string",Vi._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==l[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Oo(t,Ni._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ni(t.vectorValues);throw new pt(st.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:Ve("string",Ni._jsonSchemaVersion),vectorValues:Ve("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=/^__.*__$/;class _b{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new qr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function yb(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{Ac:a})}}class Mg{constructor(t,n,s,l,u,f){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Mg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return qc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(yb(this.Ac)&&cR.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class hR{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||nh(t)}Cc(t,n,s,l=!1){return new Mg({Ac:t,methodName:n,Dc:s,path:Ze.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fR(a){const t=a._freezeSettings(),n=nh(a._databaseId);return new hR(a._databaseId,!!t.ignoreUndefinedProperties,n)}class oh extends Ng{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof oh}}function dR(a,t,n,s){const l=a.Cc(1,t,n);bb("Data must be an object, but it was:",l,s);const u=[],f=Cn.empty();ir(s,((p,m)=>{const b=Og(t,p,n);m=Ks(m);const E=l.yc(b);if(m instanceof oh)u.push(b);else{const T=uh(m,E);T!=null&&(u.push(b),f.set(b,T))}}));const g=new si(u);return new _b(f,g,l.fieldTransforms)}function gR(a,t,n,s,l,u){const f=a.Cc(1,t,n),g=[Iv(t,s,n)],p=[l];if(u.length%2!=0)throw new pt(st.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)g.push(Iv(t,u[T])),p.push(u[T+1]);const m=[],b=Cn.empty();for(let T=g.length-1;T>=0;--T)if(!_R(m,g[T])){const M=g[T];let x=p[T];x=Ks(x);const I=f.yc(M);if(x instanceof oh)m.push(M);else{const U=uh(x,I);U!=null&&(m.push(M),b.set(M,U))}}const E=new si(m);return new _b(b,E,f.fieldTransforms)}function uh(a,t){if(vb(a=Ks(a)))return bb("Unsupported field value:",t,a),mR(a,t);if(a instanceof Ng)return(function(s,l){if(!yb(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(a,t),null;if(a===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const u=[];let f=0;for(const g of s){let p=uh(g,l.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}})(a,t)}return(function(s,l){if((s=Ks(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $S(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=le.fromDate(s);return{timestampValue:kc(l.serializer,u)}}if(s instanceof le){const u=new le(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:kc(l.serializer,u)}}if(s instanceof Vi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Fn)return{bytesValue:j0(l.serializer,s._byteString)};if(s instanceof He){const u=l.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:pg(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ni)return(function(f,g){return{mapValue:{fields:{[g0]:{stringValue:m0},[Oc]:{arrayValue:{values:f.toArray().map((m=>{if(typeof m!="number")throw g.Sc("VectorValues must only contain numeric values.");return dg(g.serializer,m)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${lg(s)}`)})(a,t)}function mR(a,t){const n={};return o0(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ir(a,((s,l)=>{const u=uh(l,t.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function vb(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof le||a instanceof Vi||a instanceof Fn||a instanceof He||a instanceof Ng||a instanceof Ni)}function bb(a,t,n){if(!vb(n)||!a0(n)){const s=lg(n);throw s==="an object"?t.Sc(a+" a custom object"):t.Sc(a+" "+s)}}function Iv(a,t,n){if((t=Ks(t))instanceof lh)return t._internalPath;if(typeof t=="string")return Og(a,t);throw qc("Field path arguments must be of type string or ",a,!1,void 0,n)}const pR=new RegExp("[~\\*/\\[\\]]");function Og(a,t,n){if(t.search(pR)>=0)throw qc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new lh(...t.split("."))._internalPath}catch{throw qc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function qc(a,t,n,s,l){const u=s&&!s.isEmpty(),f=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${s}`),f&&(p+=` in document ${l}`),p+=")"),new pt(st.INVALID_ARGUMENT,g+a+p)}function _R(a,t){return a.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(t,n,s,l,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Tb("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yR extends Eb{data(){return super.data()}}function Tb(a,t){return typeof t=="string"?Og(a,t):t instanceof lh?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new pt(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bR{convertValue(t,n="none"){switch(Ws(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ve(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Js(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Et(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return ir(t,((l,u)=>{s[l]=this.convertValue(u,n)})),s}convertVectorValue(t){const n=t.fields?.[Oc].arrayValue?.values?.map((s=>ve(s.doubleValue)));return new Ni(n)}convertGeoPoint(t){return new Vi(ve(t.latitude),ve(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Xc(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(wo(t));default:return null}}convertTimestamp(t){const n=Zs(t);return new le(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=ae.fromString(t);Kt(Q0(s),9688,{name:t});const l=new Ro(s.get(1),s.get(3)),u=new yt(s.popFirst(5));return l.isEqual(n)||is(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class yc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ha extends Eb{constructor(t,n,s,l,u,f){super(t,n,s,l,f),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(Tb("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pt(st.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Ha._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ha._jsonSchema={type:Ve("string",Ha._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class wc extends Ha{data(t={}){return super.data(t)}}class qa{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new yc(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new wc(this._firestore,this._userDataWriter,s.key,s,new yc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pt(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((g=>{const p=new wc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new yc(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>u||g.type!==3)).map((g=>{const p=new wc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new yc(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let m=-1,b=-1;return g.type!==0&&(m=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),b=f.indexOf(g.doc.key)),{type:ER(g.type),doc:p,oldIndex:m,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pt(st.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=qa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ER(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:a})}}qa._jsonSchemaVersion="firestore/querySnapshot/1.0",qa._jsonSchema={type:Ve("string",qa._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};class TR extends bR{constructor(t){super(),this.firestore=t}convertBytes(t){return new Fn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new He(this.firestore,null,n)}}function AR(a){a=Ao(a,ah);const t=Ao(a.firestore,Vg),n=pb(t),s=new TR(t);return vR(a._query),sR(n,a._query).then((l=>new qa(t,s,a,l)))}function SR(a,t,n,...s){a=Ao(a,He);const l=Ao(a.firestore,Vg),u=fR(l);let f;return f=typeof(t=Ks(t))=="string"||t instanceof lh?gR(u,"updateDoc",a._key,t,n,s):dR(u,"updateDoc",a._key,t),wR(l,[f.toMutation(a._key,es.exists(!0))])}function wR(a,t){return(function(s,l){const u=new Fs;return s.asyncQueue.enqueueAndForget((async()=>G2(await nR(s),l,u))),u.promise})(pb(a),t)}(function(t,n=!0){(function(l){Za=l})(FA),Vc(new Eo("firestore",((s,{instanceIdentifier:l,options:u})=>{const f=s.getProvider("app").getImmediate(),g=new Vg(new lS(s.getProvider("auth-internal")),new cS(f,s.getProvider("app-check-internal")),(function(m,b){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new pt(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(m.options.projectId,b)})(f,l),f);return u={useFetchStreams:n,...u},g._setSettings(u),g}),"PUBLIC").setMultipleInstances(!0)),Ba(By,jy,t),Ba(By,jy,"esm2020")})();const RR={apiKey:"AIzaSyAdBuHUx7dBx81RAOZ7IhaZHE8XSUnbS6g",authDomain:"ai-problems-reviewer.firebaseapp.com",projectId:"ai-problems-reviewer",storageBucket:"ai-problems-reviewer.firebasestorage.app",messagingSenderId:"698171835673",appId:"1:698171835673:web:5f47f5f6eb85a007df7188",measurementId:"G-8BX6TN0HSP"},xR=Xv(RR),Ab=oR(xR);let Ig="production";window.location.hash==="#math"&&(Ig="test");async function CR(){try{const a=aR(Ab,Ig),t=await AR(a),n={};return t.forEach(s=>{const l=s.data(),{unit:u,kaiSubtopic:f,kaiLevel:g,template:p}=l;n[u]||(n[u]={}),n[u][f]||(n[u][f]={}),n[u][f][g]||(n[u][f][g]=[]),n[u][f][g][p]||(n[u][f][g][p]=[]),n[u][f][g][p].push({id:s.id,...l})}),n}catch(a){throw console.error("Error fetching problems:",a),a}}async function DR(a,t){try{const n=lR(Ab,Ig,a);await SR(n,t)}catch(n){throw console.error("Error updating problem:",n),n}}function VR({problem:a,onQuestionChange:t,onChoicesChange:n,onAnswerChange:s,onSolutionChange:l,onHintChange:u,onReviewStatusChange:f,onSaveSuccess:g}){const[p,m]=$e.useState(a),[b,E]=$e.useState(!1),T=()=>a===p?ft.jsx("button",{disabled:!0,children:"save"}):b?ft.jsx("button",{disabled:!0,children:"saving..."}):ft.jsx("button",{onClick:M,children:"save"}),M=async()=>{if(!a.id){alert("No problem selected to save");return}E(!0);try{await DR(a.id,{question:a.question,choices:a.choices,hint:a.hint,answer:a.answer,solution:a.solution,isReviewed:a.isReviewed}),m(a),g&&await g()}catch(I){console.error("Failed to save problem:",I),alert("Failed to save problem. Check console for details.")}finally{E(!1)}},x=a.choices.map((I,U)=>ft.jsx("textarea",{"data-index":U,value:I,rows:"1",onChange:n},U));return ft.jsxs("div",{className:vT.editor,children:[ft.jsx("h3",{style:{margin:"-5px 0px 6px 0px"},children:""}),ft.jsx("textarea",{value:a.question,onChange:t,rows:"10"}),ft.jsx("h3",{style:{margin:"10px 0px 6px 0px"},children:""}),x,ft.jsx("h3",{style:{margin:"10px 0px 6px 0px"},children:""}),ft.jsx("textarea",{value:a.hint,onChange:u,rows:"3"}),ft.jsx("h3",{style:{margin:"10px 0px 6px 0px"},children:""}),ft.jsx("input",{type:"number",min:1,max:a.choices.length,value:a.answer+1,onChange:s}),ft.jsx("h3",{style:{margin:"10px 0px 6px 0px"},children:""}),ft.jsx("textarea",{value:a.solution,onChange:l,rows:"22"}),ft.jsxs("div",{style:{margin:"10px 0px 6px 0px"},children:[ft.jsxs("label",{children:[ft.jsx("input",{type:"checkbox",checked:a.isReviewed,onChange:f}),""]}),T()]})]})}const NR="_showButton_wvp3w_1",MR={showButton:NR};function OR({onClick:a}){return ft.jsx("div",{className:MR.showButton,children:ft.jsx("button",{onClick:a,children:""})})}const IR="_menu_ux2ve_1",LR="_header_ux2ve_23",zR="_navigation_ux2ve_67",UR="_unitSection_ux2ve_75",kR="_kaiSubtopicSection_ux2ve_77",BR="_kaiLevelSection_ux2ve_79",jR="_templateSection_ux2ve_81",HR="_unitHeader_ux2ve_89",qR="_kaiSubtopicHeader_ux2ve_91",PR="_kaiLevelHeader_ux2ve_143",GR="_templateHeader_ux2ve_175",FR="_arrow_ux2ve_207",QR="_kaiSubtopics_ux2ve_219",YR="_kaiLevels_ux2ve_221",XR="_problems_ux2ve_231",KR="_problemItem_ux2ve_239",$R="_reviewedProblem_ux2ve_267",ZR="_reviewedBadge_ux2ve_283",ge={menu:IR,header:LR,navigation:zR,unitSection:UR,kaiSubtopicSection:kR,kaiLevelSection:BR,templateSection:jR,unitHeader:HR,kaiSubtopicHeader:qR,kaiLevelHeader:PR,templateHeader:GR,arrow:FR,kaiSubtopics:QR,kaiLevels:YR,problems:XR,problemItem:KR,reviewedProblem:$R,reviewedBadge:ZR};function JR({isShowed:a,setIsShowed:t,problemsStructure:n,onProblemSelect:s}){const[l,u]=$e.useState({}),[f,g]=$e.useState({}),[p,m]=$e.useState({}),[b,E]=$e.useState({}),T=$e.useRef(null),M=X=>{u(K=>({...K,[X]:!K[X]}))},x=(X,K)=>{const at=`${X}-${K}`;g(it=>({...it,[at]:!it[at]}))},I=(X,K,at)=>{const it=`${X}-${K}-${at}`;m(et=>({...et,[it]:!et[it]}))},U=(X,K,at,it)=>{const et=`${X}-${K}-${at}-${it}`;E(w=>({...w,[et]:!w[et]}))},rt=X=>{s(X)};return $e.useEffect(()=>{const X=K=>{T.current&&!T.current.contains(K.target)&&t(!1)};return a&&document.addEventListener("mousedown",X),()=>{document.removeEventListener("mousedown",X)}},[a,t]),ft.jsxs("div",{ref:T,className:ge.menu,style:{display:a?"block":"none"},children:[ft.jsxs("div",{className:ge.header,children:[ft.jsx("h2",{children:""}),ft.jsx("button",{onClick:()=>t(!1),children:""})]}),ft.jsx("div",{className:ge.navigation,children:Object.keys(n).map(X=>ft.jsxs("div",{className:ge.unitSection,children:[ft.jsxs("div",{className:ge.unitHeader,onClick:()=>M(X),children:[ft.jsx("span",{className:ge.arrow,children:l[X]?"":""}),ft.jsx("span",{children:X})]}),l[X]&&ft.jsx("div",{className:ge.kaiSubtopics,children:Object.keys(n[X]).map(K=>{const at=`${X}-${K}`;return ft.jsxs("div",{className:ge.kaiSubtopicSection,children:[ft.jsxs("div",{className:ge.kaiSubtopicHeader,onClick:()=>x(X,K),children:[ft.jsx("span",{className:ge.arrow,children:f[at]?"":""}),ft.jsx("span",{children:K})]}),f[at]&&ft.jsx("div",{className:ge.kaiLevels,children:Object.keys(n[X][K]).map(it=>{const et=`${X}-${K}-${it}`;return ft.jsxs("div",{className:ge.kaiLevelSection,children:[ft.jsxs("div",{className:ge.kaiLevelHeader,onClick:()=>I(X,K,it),children:[ft.jsx("span",{className:ge.arrow,children:p[et]?"":""}),ft.jsx("span",{children:it})]}),p[et]&&ft.jsx("div",{className:ge.template,children:Object.keys(n[X][K][it]).map(w=>{const R=`${X}-${K}-${it}-${w}`;return ft.jsxs("div",{className:ge.templateSection,children:[ft.jsxs("div",{className:ge.templateHeader,onClick:()=>U(X,K,it,w),children:[ft.jsx("span",{className:ge.arrow,children:b[R]?"":""}),ft.jsx("span",{children:"template "+w})]}),b[R]&&ft.jsx("div",{className:ge.problems,children:n[X][K][it][w].map(C=>{const V=C.question?C.question.substring(0,50)+(C.question.length>50?"...":""):"";return ft.jsxs("div",{className:`${ge.problemItem} ${C.isReviewed?ge.reviewedProblem:""}`,onClick:()=>rt(C),children:[V,C.isReviewed&&ft.jsx("span",{className:ge.reviewedBadge,children:""})]},C.id)})})]},R)})})]},it)})})]},K)})})]},X))})]})}function WR({problemsStructure:a,onProblemSelect:t}){const[n,s]=$e.useState(!1),l=()=>{s(!0)};return ft.jsxs("div",{children:[ft.jsx(OR,{onClick:l}),ft.jsx(JR,{isShowed:n,setIsShowed:s,problemsStructure:a,onProblemSelect:t})]})}function tx(){const[a,t]=$e.useState({id:null,question:"",choices:["a","b","c","d"],hint:"",answer:3,solution:"",isReviewed:!1}),[n,s]=$e.useState({}),[l,u]=$e.useState(!0);$e.useEffect(()=>{f()},[]);const f=async()=>{try{const x=await CR();s(x),u(!1)}catch(x){console.error("Failed to load problems:",x),u(!1)}},g=x=>{t({id:x.id,question:x.question||"",choices:x.choices||["","","",""],hint:x.hint||"",answer:x.answer||0,solution:x.solution||"",isReviewed:x.isReviewed||!1})},p=x=>{t(I=>({...I,question:x.target.value}))},m=x=>{const I=parseInt(x.target.dataset.index,10),U=[...a.choices];U[I]=x.target.value,t(rt=>({...rt,choices:U}))},b=x=>{t(I=>({...I,hint:x.target.value}))},E=x=>{t(I=>({...I,answer:parseInt(x.target.value-1,10)}))},T=x=>{t(I=>({...I,solution:x.target.value}))},M=()=>{t(x=>({...x,isReviewed:!x.isReviewed}))};return ft.jsxs(ft.Fragment,{children:[ft.jsx(WR,{problemsStructure:n,onProblemSelect:g}),ft.jsx("h1",{children:"Problems Reviewer"}),l?ft.jsx("p",{children:"Loading problems..."}):ft.jsxs("div",{className:"workArea",children:[ft.jsx(VR,{problem:a,onQuestionChange:p,onChoicesChange:m,onHintChange:b,onAnswerChange:E,onSolutionChange:T,onReviewStatusChange:M,onSaveSuccess:f}),ft.jsx(_T,{problem:a})]})]})}u1.createRoot(document.getElementById("root")).render(ft.jsx($e.StrictMode,{children:ft.jsx(tx,{})}));
